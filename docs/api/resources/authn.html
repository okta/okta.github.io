<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
<head>
  <script src="//use.typekit.net/jff5neq.js">
  </script>
  <script>
  try{Typekit.load({ async: true });}catch(e){}
  </script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico">
  <link rel="stylesheet" type="text/css" media="all" href="/assets/css/animate.css">
  <link rel="stylesheet" type="text/css" media="all" href="/assets/css/okta.css">
  <title>Authentication API | Okta Developer</title>
  <meta name="description" content="Authentication API">
  <link rel="canonical" href="http://developer.okta.com/docs/api/resources/authn.html">
  <link rel="alternate" type="application/rss+xml" title="Okta Developer" href="http://developer.okta.com/feed.xml"><!-- GA -->

  <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-15777010-3', 'auto');
        ga('send', 'pageview');
  </script>
</head>

<body>
  <div class="Page">
    <!-- START Header -->
    <header id="header">
      <div class="Wrap">
        <h1 class="logo"><a href="/">Okta</a></h1><!-- START Primary Nav -->
        <nav>
          <div id="top-nav">
            <a href="#" id="mobile-close" class="mobile-toggle">
              <span></span>
              <span></span>
            </a>
            <a class="Button--green" href="https://www.okta.com/developer/signup">Get Started</a>
            <a class="SearchIcon" href="#"></a>
            <ul>
              <li>
                <a href="/product/">Product</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/code/">Code</a>
              </li>
              <li class="has-dropdown">
                <a href="#">Support</a>
                <div class="dropdown-window">
                  <p class="stack-overflow">Post your question on <a href="http://stackoverflow.com/search?q=okta" target="_blank">Stack Overflow</a></p>
                  <p class="email">Email us:<br>
                  <a href="mailto:developers@okta.com">developers@okta.com</a></p>
                  <p class="tel">Call us:<br>
                  <a href="tel:18887227871">1 (888) 722-7871</a></p>
                </div>
              </li>
            </ul>
            <form id="form_search" method="get" action="http://developer.okta.com/search/" name="form_search">
              <input type="text" name="q" id="q" autocomplete="off">
            </form>
          </div>
          <div id="mobile-nav">
            <a id="mobile-search" href="http://developer.okta.com/search/"><span class="icon-search-light"></span></a>
            <a id="mobile-open" class="mobile-toggle" href="#top-nav">
              <span></span>
              <span></span>
              <span></span>
            </a>
          </div>
        </nav><!-- END Primary Nav -->
      </div>
    </header><!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TJ45R6');
    </script> <!-- End Google Tag Manager -->
     <!-- END Header -->
     <!-- START Page Center w/Sub Nav & Content -->
    <section class="PageContent DynamicSidebar has-tableOfContents">
      <!-- START Fixed sidebar --><aside class="Sidebar">
        <h2 class="Sidebar-location Sidebar-toggle h6">Navigation</h2>
        <div class="Sidebar-close Sidebar-toggle"></div>
        <div>
          <h3 class="Sidebar-title">Use Cases</h3>
          <ul class="Sidebar-nav">
            <li>
              <a href="/use_cases/authentication">Authentication</a>
            </li>
            <li>
              <a href="/use_cases/mfa">Multi-Factor Authentication</a>
            </li>
            <li>
              <a href="/use_cases/api_security">API Access Management</a>
            </li>
            <li>
              <a href="/use_cases/integrate_with_okta">Integrate with Okta</a>
            </li>
          </ul>
          <h3 class="Sidebar-title">Reference</h3>
          <ul class="Sidebar-nav">
            <li>
              <a href="/docs/api/getting_started/api_test_client.html">Getting Started</a>
            </li>
            <li>
              <a href="/docs/api/resources/authn.html">Authentication Reference</a>
              <ul id="Sidebar_References" class="Sidebar-hide">
                <li class="is-active"><a href="/docs/api/resources/authn.html">Authentication API</a></li>
                <li><a href="/docs/api/resources/oauth2.html">OAuth 2.0</a></li>
                <li><a href="/docs/api/resources/oidc.html">OpenID Connect</a></li>
                <li><a href="/docs/api/resources/social_authentication.html">Social Authentication</a></li>
                <li><a href="/docs/api/resources/sessions.html">Sessions</a></li>
              </ul>
            </li>
            <li>
              <a href="/docs/api/resources/apps.html">API Reference</a>
              <ul id="Sidebar_Resources" class="Sidebar-hide">
                <li><a href="/docs/api/resources/apps.html">Apps</a></li>
                <li><a href="/docs/api/resources/events.html">Events</a></li>
                <li><a href="/docs/api/resources/factors.html">Factors</a></li>
                <li><a href="/docs/api/resources/groups.html">Groups</a></li>
                <li><a href="/docs/api/resources/idps.html">Identity Providers</a></li>
                <li><a href="/docs/api/resources/roles.html">Admin Roles</a></li>
                <li><a href="/docs/api/resources/schemas.html">Schemas API</a></li>
                <li><a href="/docs/api/resources/system_log.html">System Log (Beta)</a></li>
                <li><a href="/docs/api/resources/templates.html">Templates</a></li>
                <li><a href="/docs/api/resources/users.html">Users</a></li>
              </ul>
            </li>
            <li>
              <a href="/reference/error_codes">Error Codes</a>
            </li>
            <li>
              <a href="/reference/okta_expression_language">Okta Expression Language</a>
            </li>
            <li>
              <a href="/docs/platform-release-notes/platform-release-notes.html">Platform Release Notes</a>
            </li>
          </ul>
          
          <script>
            if (document.querySelectorAll("#Sidebar_Resources .is-active").length) {
                document.getElementById('Sidebar_Resources').classList.remove('Sidebar-hide');
            }

            if (document.querySelectorAll("#Sidebar_References .is-active").length) {
                document.getElementById('Sidebar_References').classList.remove('Sidebar-hide');
            }
          </script>
        </div>
      </aside>
<!-- END Fixed sidebar -->
      <!-- START Page Content -->
      <div class="PageContent-main" id="docs-body">
        <a id="edit-link" href="https://github.com/okta/okta.github.io/edit/master/_source/_docs/api/resources/authn.md">Edit Page</a>
      <h1 id="authentication-api">Authentication API</h1>

<p>The Okta Authentication API provides operations to authenticate users, perform multi-factor enrollment and verification, recover forgotten passwords, and unlock accounts. It can be used as a standalone API to provide the identity layer on top of your existing application, or it can be integrated with the Okta <a href="sessions.html">Sessions API</a> to obtain an Okta <a href="/docs/examples/session_cookie.html">session cookie</a> and access apps within Okta.</p>

<p>The API is targeted for developers who want to build their own end-to-end login experience to replace the built-in Okta login experience and addresses the following key scenarios:</p>

<ul>
  <li>
    <p><strong>Primary authentication</strong> allows you to verify username and password credentials for a user.</p>
  </li>
  <li>
    <p><strong>Multifactor authentication</strong> (MFA) strengthens the security of password-based authentication by requiring additional verification of another factor such as a temporary one-time password or an SMS passcode. The Authentication API supports user enrollment with MFA factors enabled by the administrator, as well as MFA challenges based on your <strong>Okta Sign-On Policy</strong>.</p>
  </li>
  <li>
    <p><strong>Recovery</strong> allows users to securely reset their password if they’ve forgotten it, or unlock their account if it has been locked out due to excessive failed login attempts. This functionality is subject to the security policy set by the administrator.</p>
  </li>
</ul>

<h2 id="application-types">Application Types</h2>

<p>The behavior of the Okta Authentication API varies depending on the type of your application and your org’s security policies such as the <strong>Okta Sign-On Policy</strong>, <strong>MFA Enrollment Policy</strong>, or <strong>Password Policy</strong>.</p>

<blockquote>
  <p>Policy evaluation is conditional on the <a href="../getting_started/design_principles.html#client-request-context">client request context</a> such as IP address.</p>
</blockquote>

<h3 id="public-application">Public Application</h3>

<p>Public applications are any application that anonymously start an authentication or recovery transaction without an API token such as the <a href="/docs/guides/okta_sign-in_widget.html">Okta Sign-In Widget</a>.  Public applications are aggressively rate-limited to prevent abuse and require primary authentication to be successfully completed before releasing any metadata about a user.</p>

<h3 id="trusted-application">Trusted Application</h3>

<p>Trusted applications are backend applications that act as authentication broker or login portal for your Okta organization and may start an authentication or recovery transaction with an administrator API token.  Trusted apps may implement their own recovery flows and primary authentication process and may receive additional metadata about the user before primary authentication has successfully completed.</p>

<blockquote>
  <p>Trusted web applications may need to override the <a href="../getting_started/design_principles.html#client-request-context">client request context</a> to forward the originating client context for the user.</p>
</blockquote>

<h2 id="getting-started-with-authentication">Getting Started with Authentication</h2>

<ol>
  <li>Make sure you need the API. Check out the <a href="/docs/guides/okta_sign-in_widget.html">Okta Sign-In Widget</a> which is built on the Authentication API. The Sign-In Widget is easier to use and supports basic use cases.</li>
  <li>For more advanced use cases, learn <a href="/docs/api/getting_started/api_test_client.html">the Okta API basics</a>.</li>
  <li>
    <p>Explore the Authentication API:</p>

    <p><a href="https://app.getpostman.com/run-collection/07df454531c56cb5fe71"><img src="https://run.pstmn.io/button.svg" alt="Run in Postman" /></a></p>
  </li>
</ol>

<h2 id="authentication-operations">Authentication Operations</h2>

<h3 class="api api-operation" id="primary-authentication">Primary Authentication</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn</span></p>

<p>Every authentication transaction starts with primary authentication which validates a user’s primary password credential. <strong>Password Policy</strong>, <strong>MFA Policy</strong>,  and <strong>Sign-On Policy</strong> are evaluated during primary authentication to determine if the user’s password is expired, a factor should be enrolled, or additional verification is required. The <a href="#transaction-state">transaction state</a> of the response depends on the user’s status, group memberships and assigned policies.</p>

<p>The requests and responses vary depending on the application type, and whether a password expiration warning is sent:</p>

<ul>
  <li><a href="#primary-authentication-with-public-application">Primary Authentication with Public Application</a>—<a href="#request-example-public-application">Request Example</a></li>
  <li><a href="#primary-authentication-with-trusted-application">Primary Authentication with Trusted Application</a>—<a href="#request-example-trusted-application">Request Example</a></li>
  <li><a href="#primary-authentication-with-password-expiration-warning">Primary Authentication with Password Expiration Warning</a>—<a href="#request-example-password-expiration-warning">Request Example</a></li>
</ul>

<blockquote>
  <p>You must first enable MFA factors and assign a valid <strong>Sign-On Policy</strong> to a user to enroll and/or verify a MFA factor during authentication.</p>
</blockquote>

<h4 class="api api-request api-request-params" id="request-parameters">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
      <th>MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>User’s non-qualified short-name (e.g. dade.murphy) or unique fully-qualified login (e.g dade.murphy@example.com)</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>password</td>
      <td>User’s password credential</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the authentication transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
      <td>2048</td>
    </tr>
    <tr>
      <td>options</td>
      <td>Opt-in features for the authentication transaction</td>
      <td>Body</td>
      <td><a href="#options-object">Options Object</a></td>
      <td>FALSE</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>context</td>
      <td>Provides additional context for the authentication transaction</td>
      <td>Body</td>
      <td><a href="#context-object">Context Object</a></td>
      <td>FALSE</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 id="options-object">Options Object</h5>

<p>The authentication transaction <a href="#transaction-state">state machine</a> can be modified via the following opt-in features:</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>multiOptionalFactorEnroll</td>
      <td>Transitions transaction back to <code class="highlighter-rouge">MFA_ENROLL</code> state after successful factor enrollment when additional optional factors are available for enrollment</td>
      <td>Boolean</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>FALSE</td>
    </tr>
    <tr>
      <td>warnBeforePasswordExpired</td>
      <td>Transitions transaction to <code class="highlighter-rouge">PASSWORD_WARN</code> state before <code class="highlighter-rouge">SUCCESS</code> if the user’s password is about to expire and within their password policy warn period</td>
      <td>Boolean</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>FALSE</td>
    </tr>
  </tbody>
</table>

<h5 id="context-object">Context Object</h5>

<p>The context object allows <a href="#trusted-application">trusted web applications</a> such as an external portal to pass additional context for the authentication or recovery transaction.</p>

<blockquote>
  <p>Overriding context such as <code class="highlighter-rouge">deviceToken</code> is a highly privileged operation limited to trusted web applications and requires making authentication or recovery requests with a valid <em>administrator API token</em>.</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>deviceToken</td>
      <td>A globally unique ID identifying the user’s client device or user agent</td>
      <td>String</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td> </td>
      <td>32</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>You must always pass the same <code class="highlighter-rouge">deviceToken</code> for a user’s device with every authentication request for <strong>per-device</strong> or <strong>per-session</strong> Sign-On Policy factor challenges.  If the <code class="highlighter-rouge">deviceToken</code> is absent or does not match the previous <code class="highlighter-rouge">deviceToken</code>, the user will be challenged every-time instead of <strong>per-device</strong> or <strong>per-session</strong>.</p>
</blockquote>

<p>It is recommend that you generate a UUID or GUID for each client and persist the <code class="highlighter-rouge">deviceToken</code> as a persistent cookie or HTML5 localStorage item scoped to your web application’s origin.</p>

<h4 class="api api-response api-response-params" id="response-parameters">Response Parameters</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p><code class="highlighter-rouge">401 Unauthorized</code> status code is returned for requests with invalid credentials or locked out accounts</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeuHRrvMnuRga5UzpKIOhKpQ"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><code class="highlighter-rouge">403 Forbidden</code> status code is returned for requests with valid credentials but the user is denied access via <strong>Sign-On Policy</strong> or <strong>MFA Policy</strong>.</p>

<blockquote>
  <p>Ensure the user is assigned to a valid <strong>MFA Policy</strong> if additional verification is required in the user’s <strong>Sign-On Policy</strong></p>
</blockquote>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000085"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You do not have permission to access your account at this time."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000085"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeLngBsntPSj2IVcrEWcAZSA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><code class="highlighter-rouge">429 Too Many Requests</code> status code may be returned when the rate-limit is exceeded</p>

<blockquote>
  <p>Authentication requests are aggressively rate-limited (e.g. 1 request per username/per second) for security purposes.</p>
</blockquote>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">429</span> <span class="ne">Too Many Requests</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">X-Rate-Limit-Limit</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-Rate-Limit-Remaining</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-Rate-Limit-Reset</span><span class="p">:</span> <span class="s">1447534590</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000047"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API call exceeded rate limit due to too many requests."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000047"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeWaNHfOyQSES34-a2Dw6Phw"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="primary-authentication-with-public-application">Primary Authentication with Public Application</h4>

<p>Authenticates a user with username/password credentials via a <a href="#public-application">public application</a></p>

<h5 class="api api-request api-request-example" id="request-example-public-application">Request Example: Public Application</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "password": "correcthorsebatterystaple",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "options": {
    "multiOptionalFactorEnroll": false,
    "warnBeforePasswordExpired": false
  }
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-success">Response Example (Success)</h5>

<p>Users with a valid password not assigned to a <strong>Sign-On Policy</strong> with additional verification requirements will successfully complete the authentication transaction.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-invalid-credentials">Response Example (Invalid Credentials)</h5>

<p>Primary authentication requests with an invalid <code class="highlighter-rouge">username</code> or <code class="highlighter-rouge">password</code> fail with a <code class="highlighter-rouge">401 Unauthorized</code> error.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeuHRrvMnuRga5UzpKIOhKpQ"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-access-denied">Response Example (Access Denied)</h5>

<p>Primary authentication request has valid credentials but the user is denied access via  <strong>Sign-On Policy</strong> or <strong>MFA Policy</strong> with <code class="highlighter-rouge">403 Forbidden</code> error.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000085"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You do not have permission to access your account at this time."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000085"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeLngBsntPSj2IVcrEWcAZSA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-locked-out">Response Example (Locked Out)</h5>

<p>Primary authentication requests for a user with <code class="highlighter-rouge">LOCKED_OUT</code> status is conditional on the user’s password policy.  Password policies define whether to hide or show  lockout failures which disclose a valid user identifier to the caller.</p>

<h6 id="hide-lockout-failures-default">Hide Lockout Failures (Default)</h6>

<p>If the user’s password policy is configure to <strong>hide lockout failures</strong>, a <code class="highlighter-rouge">401 Unauthorized</code> error is returned preventing information disclosure of a valid user identifier.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000004"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeuHRrvMnuRga5UzpKIOhKpQ"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="show-lockout-failures">Show Lockout Failures</h6>

<p>If the user’s password policy is configure to <strong>show lockout failures</strong>, the authentication transaction completes with <code class="highlighter-rouge">LOCKED_OUT</code> status.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LOCKED_OUT"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unlock"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/unlock"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-expired-password">Response Example (Expired Password)</h5>

<p>User must <a href="#change-password">change their expired password</a> to complete the authentication transaction.</p>

<blockquote>
  <p>Users will be challenged for MFA (<code class="highlighter-rouge">MFA_REQUIRED</code>) before <code class="highlighter-rouge">PASSWORD_EXPIRED</code> if they have an active factor enrollment</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD_EXPIRED"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"changePassword"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/credentials/change_password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-factor-challenge">Response Example (Factor Challenge)</h5>

<p>User is assigned to a <strong>Sign-On Policy</strong> that requires additional verification and must <a href="#verify-factor">select and verify</a> a previously enrolled <a href="#factor-object">factor</a> by <code class="highlighter-rouge">id</code> to complete the authentication transaction.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_REQUIRED"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rsalhpMQVYKHZKXZJQEW"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/rsalhpMQVYKHZKXZJQEW/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ostfm3hPNYSOIOIVTQWY"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clf193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/clf193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
             </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                 </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opf3hkfocI4JTLAju0g4"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"deviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SmartPhone_IPhone"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gibson"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOS"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opf3hkfocI4JTLAju0g4/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-factor-enroll">Response Example (Factor Enroll)</h5>

<p>User is assigned to a <strong>MFA Policy</strong> that requires enrollment during sign-on and must <a href="#enroll-factor">select a factor to enroll</a> to complete the authentication transaction.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
               </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="primary-authentication-with-trusted-application">Primary Authentication with Trusted Application</h4>

<p>Authenticates a user via a <a href="#trusted-application">trusted application</a> or proxy that overrides <a href="../getting_started/design_principles.html#client-request-context">client request context</a>.</p>

<blockquote>
  <p>Specifying your own <code class="highlighter-rouge">deviceToken</code> is a highly privileged operation limited to trusted web applications and requires making authentication requests with a valid <em>admin API token</em>.</p>
</blockquote>

<blockquote>
  <p>The <strong>public IP address</strong> of your <a href="#trusted-application">trusted application</a> must be <a href="../getting_started/design_principles.html#ip-address">whitelisted as a gateway IP address</a> to forward the user agent’s original IP address with the <code class="highlighter-rouge">X-Forwarded-For</code> HTTP header</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-trusted-application">Request Example: Trusted Application</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-H <span class="s2">"User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"</span> <span class="se">\</span>
-H <span class="s2">"X-Forwarded-For: 23.235.46.133"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "password": "correcthorsebatterystaple",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "options": {
    "multiOptionalFactorEnroll": false,
    "warnBeforePasswordExpired": false
  },
  "context": {
    "deviceToken": "26q43Ak9Eh04p7H6Nnx0m69JqYOrfVBY"
  }
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="primary-authentication-with-password-expiration-warning">Primary Authentication with Password Expiration Warning</h4>

<p>Authenticates a user with a password that is about to expire.  The user should <a href="#change-password">change their password</a> to complete the authentication transaction but may opt-out (skip).</p>

<blockquote>
  <p>Please note:
* The <code class="highlighter-rouge">warnBeforePasswordExpired</code> option must be explicitly specified as <code class="highlighter-rouge">true</code> to allow the authentication transaction to transition to <code class="highlighter-rouge">PASSWORD_WARN</code> status.
* Non-expired passwords successfully complete the authentication transaction if this option is omitted or is specified as <code class="highlighter-rouge">false</code>.</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-password-expiration-warning">Request Example: Password Expiration Warning</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "password": "correcthorsebatterystaple",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "options": {
    "multiOptionalFactorEnroll": false,
    "warnBeforePasswordExpired": true
  }
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-1">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD_WARN"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"expiration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"passwordExpireDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"changePassword"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/credentials/change_password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"skip"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"skip"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/skip"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="change-password">Change Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> api/v1/authn/credentials/change_password</span></p>

<p>This operation changes a user’s password by providing the existing password and the new password password for authentication transactions with either the <code class="highlighter-rouge">PASSWORD_EXPIRED</code> or <code class="highlighter-rouge">PASSWORD_WARN</code> state.</p>

<ul>
  <li>A user <em>must</em> change their expired password for an authentication transaction with <code class="highlighter-rouge">PASSWORD_EXPIRED</code> status to successfully complete the transaction.</li>
  <li>A user <em>may</em> opt-out of changing their password (skip) when the transaction has a <code class="highlighter-rouge">PASSWORD_WARN</code> status.</li>
</ul>

<h4 class="api api-request api-request-params" id="request-parameters-1">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>oldPassword</td>
      <td>User’s current password that is expired or about to expire</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>newPassword</td>
      <td>New password for user</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-1">Response Parameters</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the <code class="highlighter-rouge">oldPassword</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Update of credentials failed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeYx8fd_-VQdONMI5OYcqoqw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oldPassword: The credentials provided were incorrect."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>If the <code class="highlighter-rouge">newPassword</code> does not meet password policy requirements, you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The password does meet the complexity requirements of the current password policy."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeuNNAquYEQkWFnUVG86Abbw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Passwords must have at least 8 characters, a lowercase letter, an uppercase letter, a number, no parts of your username"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "oldPassword": "correcthorsebatterystaple",
  "newPassword": "Ch-ch-ch-ch-Changes!"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/credentials/change_password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-2">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="multifactor-authentication-operations">Multifactor Authentication Operations</h2>

<p>You can enroll, activate, and verify factors using the <code class="highlighter-rouge">/api/v1/authn/factors</code> endpoint.</p>

<blockquote>
  <p>You can also enroll, manage, and verify factors outside the authentication context with <a href="factors.html#factor-verification-operations"><code class="highlighter-rouge">/api/v1/users/:uid/factors/</code></a>.</p>
</blockquote>

<h3 class="api api-operation" id="enroll-factor">Enroll Factor</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors</span></p>

<p>Enrolls a user with a <a href="factors.html#supported-factors-for-providers">factor</a> assigned by their <strong>MFA Policy</strong>.</p>

<ul>
  <li><a href="#enroll-okta-security-question-factor">Enroll Okta Security Question Factor</a></li>
  <li><a href="#enroll-okta-sms-factor">Enroll Okta SMS Factor</a></li>
  <li><a href="#enroll-call-factor">Enroll Okta Call Factor</a></li>
  <li><a href="#enroll-okta-verify-totp-factor">Enroll Okta Verify TOTP Factor</a></li>
  <li><a href="#enroll-okta-verify-push-factor">Enroll Okta Verify Push Factor</a></li>
  <li><a href="#enroll-google-authenticator-factor">Enroll Google Authenticator Factor</a></li>
  <li><a href="#enroll-rsa-securid-factor">Enroll RSA SecurID Factor</a></li>
  <li><a href="#enroll-symantec-vip-factor">Enroll Symantec VIP Factor</a></li>
  <li><a href="#enroll-yubikey-factor">Enroll YubiKey Factor</a></li>
  <li><a href="#enroll-duo-factor">Enroll Duo Factor</a></li>
  <li><a href="#enroll-u2f-factor">Enroll U2F Factor</a></li>
</ul>

<blockquote>
  <p>This operation is only available for users that have not previously enrolled a factor and have transitioned to the <code class="highlighter-rouge">MFA_ENROLL</code> <a href="#transaction-state">state</a>.</p>
</blockquote>

<h4 class="api api-request api-request-params" id="request-parameters-2">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>type of factor</td>
      <td>Body</td>
      <td><a href="factors.html#factor-type">Factor Type</a></td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>provider</td>
      <td>factor provider</td>
      <td>Body</td>
      <td><a href="factors.html#provider-type">Provider Type</a></td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of a <a href="factors.html#supported-factors-for-providers">supported factor</a></td>
      <td>Body</td>
      <td><a href="factors.html#factor-profile-object">Factor Profile Object</a></td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-2">Response Parameters</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<blockquote>
  <p>Some <a href="factors.html#factor-type">factor types</a> require <a href="#activate-factor">activation</a> to complete the enrollment process.  The <a href="#transaction-state">authentication transaction</a> will transition to <code class="highlighter-rouge">MFA_ENROLL_ACTIVATE</code> if a factor requires activation.</p>
</blockquote>

<h4 class="api api-operation" id="enroll-okta-security-question-factor">Enroll Okta Security Question Factor</h4>

<p>Enrolls a user with the Okta <code class="highlighter-rouge">question</code> factor and <a href="factors.html#question-profile">question profile</a>.</p>

<blockquote>
  <p>Security Question factor does not require activation and is <code class="highlighter-rouge">ACTIVE</code> after enrollment</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-1">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "question",
  "provider": "OKTA",
  "profile": {
    "question": "disliked_food",
    "answer": "mayonnaise"
  }
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-3">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-okta-sms-factor">Enroll Okta SMS Factor</h4>

<p>Enrolls a user with the Okta <code class="highlighter-rouge">sms</code> factor and an <a href="factors.html#sms-profile">SMS profile</a>.  A text message with an OTP is sent to the device during enrollment and must be <a href="#activate-sms-factor">activated</a> by following the <code class="highlighter-rouge">next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-2">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "sms",
  "provider": "OKTA",
  "profile": {
    "phoneNumber": "+1-555-415-1337"
  }
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-4">Response Example</h5>

<blockquote>
  <p>Use the <code class="highlighter-rouge">resend</code> link to send another OTP if user doesn’t receive the original activation SMS OTP.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mbl198rKSEWOSKRIVIFT"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/mbl198rKSEWOSKRIVIFT/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/mbl198rKSEWOSKRIVIFT/lifecycle/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-okta-call-factor">Enroll Okta Call Factor</h4>

<p>Enrolls a user with the Okta <code class="highlighter-rouge">call</code> factor and a <a href="factors.html#call-profile">Call profile</a>.  A voice call with an OTP is sent to the device during enrollment and must be <a href="#activate-call-factor">activated</a> by following the <code class="highlighter-rouge">next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-3">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "call",
  "provider": "OKTA",
  "profile": {
    "phoneNumber": "+1-555-415-1337"
  }
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-5">Response Example</h5>

<blockquote>
  <p>Use the <code class="highlighter-rouge">resend</code> link to send another OTP if user doesn’t receive the original activation Voice Call OTP.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clf198rKSEWOSKRIVIFT"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/clf198rKSEWOSKRIVIFT/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/clf198rKSEWOSKRIVIFT/lifecycle/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-okta-verify-totp-factor">Enroll Okta Verify TOTP Factor</h4>

<p>Enrolls a user with the Okta <code class="highlighter-rouge">token:software:totp</code> factor.  The factor must be <a href="#activate-totp-factor">activated</a> after enrollment by following the <code class="highlighter-rouge">next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-4">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "token:software:totp",
  "provider": "OKTA"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-6">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ostf2xjtDKWFPZIKYDZV"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"timeStep"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
          </span><span class="nt">"sharedSecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KBMTM32UJZSXQ2DW"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base32"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"keyLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/ostf2xjtDKWFPZIKYDZV/qr/00Mb0zqhJQohwCDkB2wOifajAsAosEAXvDwuCmsAZs"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/ostf2xjtDKWFPZIKYDZV/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-okta-verify-push-factor">Enroll Okta Verify Push Factor</h4>

<p>Enrolls a user with the Okta verify <code class="highlighter-rouge">push</code> factor. The factor must be <a href="#activate-push-factor">activated on the device</a> by scanning the QR code or visiting the activation link sent via email or sms.</p>

<blockquote>
  <p>Use the published activation links to embed the QR code or distribute an activation <code class="highlighter-rouge">email</code> or <code class="highlighter-rouge">sms</code></p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-5">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "push",
  "provider": "OKTA"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-7">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/qr/00fukNElRS_Tz6k-CFhg3pH4KO2dj2guhmaapXWbc4"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-google-authenticator-factor">Enroll Google Authenticator Factor</h4>

<p>Enrolls a user with the Google <code class="highlighter-rouge">token:software:totp</code> factor.  The factor must be <a href="#activate-totp-factor">activated</a> after enrollment by following the <code class="highlighter-rouge">next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-6">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "token:software:totp",
  "provider": "GOOGLE"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-8">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ostf2xjtDKWFPZIKYDZV"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GOOGLE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"timeStep"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
          </span><span class="nt">"sharedSecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KYCRM33UJZSXQ2DW"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base32"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"keyLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/uftm3iHSGFQXHCUSDAND/qr/00Mb0zqhJQohwCDkB2wOifajAsAosEAXvDwuCmsAZs"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/uftm3iHSGFQXHCUSDAND/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-rsa-securid-factor">Enroll RSA SecurID Factor</h4>

<p>Enrolls a user with a RSA SecurID factor and a <a href="factors.html#token-profile">token profile</a>.  RSA tokens must be verified with the <a href="factors.html#factor-verification-object">current pin+passcode</a> as part of the enrollment request.</p>

<h5 class="api api-request api-request-example" id="request-example-7">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "token",
  "provider": "RSA",
  "profile": {
    "credentialId": "dade.murphy@example.com"
  },
  "passCode": "5275875498"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/users/00u15s1KDETTQMQYABRL/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-9">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-symantec-vip-factor">Enroll Symantec VIP Factor</h4>

<p>Enrolls a user with a Symantec VIP factor and a <a href="factors.html#token-profile">token profile</a>.  Symantec tokens must be verified with the <a href="factors.html#factor-verification-object">current and next passcodes</a> as part of the enrollment request.</p>

<h5 class="api api-request api-request-example" id="request-example-8">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "factorType": "token",
  "provider": "SYMANTEC",
  "profile": {
    "credentialId": "VSMT14393584"
  },
  "passCode": "875498",
  "nextPassCode": "678195"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/users/00u15s1KDETTQMQYABRL/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-10">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-yubikey-factor">Enroll YubiKey Factor</h4>

<p>Enrolls a user with a Yubico factor (YubiKey).  YubiKeys must be verified with the <a href="factors.html#factor-verification-object">current passcode</a> as part of the enrollment request.</p>

<h5 class="api api-request api-request-example" id="request-example-9">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "factorType": "token:hardware",
  "provider": "YUBICO",
  "passCode": "cccccceukngdfgkukfctkcvfidnetljjiknckkcjulji"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/users/00u15s1KDETTQMQYABRL/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-11">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-duo-factor">Enroll Duo Factor</h4>

<p>The enrollment process starts with enrollment <a href="#request-example-10">request to Okta</a>, then continues with the Duo widget that is embedded in the page. The page needs to create an iframe with name “duo_iframe” as described <a href="https://duo.com/docs/duoweb#3.-show-the-iframe">here</a> to host the widget. The script address is recieved in the response object in _embedded.factor._embedded._links.script object. The information to initialize the Duo object is taken from _embedded.factor._embedded.activation object as it is shown in the <a href="#full-page-example-for-duo-enrollment">full example</a>. In order to mainian the link between Duo and Okta the stateToken must be passed back when Duo calls the callback. This is done by populating the hidden element in the “duo_form” as it is decribed <a href="https://duo.com/docs/duoweb#passing-additional-post-arguments-with-the-signed-response">here</a>. After Duo enrollment and verification is done, the Duo script makes a call back to Okta. To complete the authentication process, make a call using <a href="#activation-poll-request-example">the poll link</a> to get session token and verify sucessful state.</p>

<h5 class="api api-request api-request-example" id="request-example-10">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "factorType": "web",
  "provider": "DUO",
  "stateToken": "$(stateToken}"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-12">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00BlN4kOtm7wNxuM8nuXsOK1PFXBkvvTH-buJUrgWX"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T13:14:52.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00uku2SnbUX49SAGb0g3"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:07:51.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@gexample.com"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"factor"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"dsflnpo99zpfMyaij0g3"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"web"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"DUO"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"DUO"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="s2">"first.last@gexample.com"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"activation"</span><span class="p">:{</span><span class="w">
                  </span><span class="nt">"host"</span><span class="p">:</span><span class="s2">"api-your-host.duosecurity.com"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"signature"</span><span class="p">:</span><span class="s2">"TX|...your-signature"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
                      </span><span class="nt">"complete"</span><span class="p">:{</span><span class="w">
                          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/duoCallback"</span><span class="p">,</span><span class="w">
                          </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                              </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                                  </span><span class="s2">"POST"</span><span class="w">
                             </span><span class="p">]</span><span class="w">
                          </span><span class="p">}</span><span class="w">
                      </span><span class="p">},</span><span class="w">
                      </span><span class="nt">"script"</span><span class="p">:{</span><span class="w">
                          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/js/sections/duo/Duo-Web-v2.js"</span><span class="p">,</span><span class="w">
                          </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"text/javascript; charset=utf-8"</span><span class="w">
                      </span><span class="p">}</span><span class="w">
                  </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                   </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                  </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"prev"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                  </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="full-page-example-for-duo-enrollment">Full Page Example for Duo enrollment</h4>
<p>In this example we will put all the elements together in html page.</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="c">&lt;!--
            The Duo SDK will automatically bind to this iFrame and populate it for us.
            See https://www.duosecurity.com/docs/duoweb for more info.
         --&gt;</span>
        <span class="nt">&lt;iframe</span> <span class="na">id=</span><span class="s">"duo_iframe"</span> <span class="na">width=</span><span class="s">"620"</span> <span class="na">height=</span><span class="s">"330"</span> <span class="na">frameborder=</span><span class="s">"0"</span><span class="nt">&gt;&lt;/iframe&gt;</span>
        <span class="c">&lt;!--
            The Duo SDK will automatically bind to this form and submit it for us.
            See https://www.duosecurity.com/docs/duoweb for more info.
         --&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"duo_form"</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- The state token is required here (in order to bind anonymous request back into Auth API) --&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"stateToken"</span> <span class="na">value=</span><span class="s">'00BlN4kOtm7wNxuM8nuXsOK1PFXBkvvTH-buJUrgWX'</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/form&gt;</span>

        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://your-domain.okta.com/js/sections/duo/Duo-Web-v2.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

        <span class="c">&lt;!-- The host, sig_request, and post_action values will be given via the Auth API --&gt;</span>
        <span class="nt">&lt;script&gt;</span>
            <span class="nx">Duo</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
                <span class="s1">'host'</span><span class="p">:</span> <span class="s1">'api-your-host.duosecurity.com'</span><span class="p">,</span>
                <span class="s1">'sig_request'</span><span class="p">:</span> <span class="s1">'TX|...your-signature'</span><span class="p">,</span>
                <span class="s1">'post_action'</span><span class="p">:</span> <span class="s1">'https://your-domain.okta.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/duoCallback'</span>
            <span class="p">});</span>
        <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<h5 class="api api-response api-request-example" id="activation-poll-request-example">Activation Poll Request Example</h5>
<p>The poll is to verify successful authentication and to obtain session token.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "$(stateToken}"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="k">}</span><span class="s2">/lifecycle/activate/poll"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="activation-poll-response-example">Activation Poll Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T13:37:42.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="s2">"20111zMXPaEe_lEw7pg2Ub810HDkpBwzSVBEPBRpA87LH5sW3Jj35_x"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:29:58.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="enroll-u2f-factor">Enroll U2F Factor</h4>

<blockquote>
  <p>Enrolling a U2F factor is an <span class="api-label api-label-ea "><i class="fa fa-flag"></i> Early Access</span> feature.</p>
</blockquote>

<p>Enrolls a user with a U2F factor.  The enrollment process starts with getting an <code class="highlighter-rouge">appId</code> and <code class="highlighter-rouge">nonce</code> from Okta and using those to get registration information from the U2F key using the U2F javascript API.</p>

<h5 class="api api-request api-request-example" id="request-example-11">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "factorType": "u2f",
  "provider": "FIDO",
  "stateToken": "$(stateToken}"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-13">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00s7Yewe3Z4aujPLpR4qW4y1hMKzAbyXK5LSKJRW2G"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-05T19:40:53.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-10-28T23:27:57.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first.last@gmail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"First"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fuf8y1y14jaygfX5K0h7"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u2f"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FIDO"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FIDO"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"U2F_V2"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"appId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s-NaltFnye-xNsJeAhnN"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"timeoutSeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/fuf8y1y14jaygfX5K0h7/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="activate-factor">Activate Factor</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/lifecycle/activate</span></p>

<p>The <code class="highlighter-rouge">sms</code>,<code class="highlighter-rouge">call</code> and <code class="highlighter-rouge">token:software:totp</code> <a href="factors.html#factor-type">factor types</a> require activation to complete the enrollment process.</p>

<ul>
  <li><a href="#activate-totp-factor">Activate TOTP Factor</a></li>
  <li><a href="#activate-sms-factor">Activate SMS Factor</a></li>
  <li><a href="#activate-call-factor">Activate Call Factor</a></li>
  <li><a href="#activate-push-factor">Activate Push Factor</a></li>
  <li>[Activate U2F Factor] (#activate-u2f-factor) (EA feature)</li>
</ul>

<h4 class="api api-operation" id="activate-totp-factor">Activate TOTP Factor</h4>

<p>Activates a <code class="highlighter-rouge">token:software:totp</code> factor by verifying the OTP.</p>

<h4 class="api api-request api-request-params" id="request-parameters-3">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a>  for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP generated by device</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-3">Response Parameters</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the passcode is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-request api-request-example" id="request-example-12">Request Example</h4>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "123456"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/ostf1fmaMGJLMNGNLIVG/lifecycle/activate"</span>
</code></pre>
</div>

<h4 class="api api-response api-response-example" id="response-example-14">Response Example</h4>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="activate-sms-factor">Activate SMS Factor</h4>

<p>Activates a <code class="highlighter-rouge">sms</code> factor by verifying the OTP.  The request/response is identical to <a href="#activate-totp-factor">activating a TOTP factor</a></p>

<h5 class="api api-request api-request-params" id="request-parameters-4">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to mobile device</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-4">Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the passcode is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-13">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "123456"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/sms1o51EADOTFXHHBXBP/lifecycle/activate"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-15">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<h4 class="api api-operation" id="activate-call-factor">Activate Call Factor</h4>

<p>Activates a <code class="highlighter-rouge">call</code> factor by verifying the OTP.  The request/response is identical to <a href="#activate-totp-factor">activating a TOTP factor</a></p>

<h5 class="api api-request api-request-params" id="request-parameters-5">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>Passcode received via the voice call</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-5">Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the passcode is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-14">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "12345"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/clf1o51EADOTFXHHBXBP/lifecycle/activate"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-16">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<h4 class="api api-operation" id="activate-push-factor">Activate Push Factor</h4>

<p>Activation of <code class="highlighter-rouge">push</code> factors are asynchronous and must be polled for completion when the <code class="highlighter-rouge">factorResult</code> returns a <code class="highlighter-rouge">WAITING</code> status.</p>

<p>Activations have a short lifetime (minutes) and will <code class="highlighter-rouge">TIMEOUT</code> if they are not completed before the <code class="highlighter-rouge">expireAt</code> timestamp.  Use the published <code class="highlighter-rouge">activate</code> link to restart the activation process if the activation is expired.</p>

<h5 class="api api-request api-request-params" id="request-parameters-6">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-6">Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<h5 class="api api-request api-request-example" id="request-example-15">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-waiting">Response Example (Waiting)</h5>

<blockquote>
  <p>Follow the the published <code class="highlighter-rouge">next</code> link to keep polling for activation completion</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/qr/00fukNElRS_Tz6k-CFhg3pH4KO2dj2guhmaapXWbc4"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-success-1">Response Example (Success)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-timeout">Response Example (Timeout)</h5>

<blockquote>
  <p>Follow the the published <code class="highlighter-rouge">activate</code> link to restart the activation process</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TIMEOUT"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TIMEOUT"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"activate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00u4vi0VX6U816Kl90g4/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                  </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="poll-for-push-factor-activation">Poll for Push Factor Activation</h5>

<p>After the push notification is sent to user’s device we need to know when the user completes the activation. This is done by polling the “poll” link.</p>

<h6 class="api api-request api-request-example" id="poll-request-example">Poll Request Example</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="poll-response-example">Poll Response Example</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-12-22T21:36:47.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-12-22T21:41:47.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://your-domain.okta.com/api/v1/users/opfh52xcuft3J4uZc0g3/factors/opfn169oIx3k63Klh0g3/qr/20111huUFWDFTAeq_lFQKfKFS_rLABkE_pKgGl5PBUeLvJVmaIrWq5u"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"http://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:[</span><span class="s2">"POST"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="send-activation-links">Send Activation Links</h5>

<p>An activation email or sms can be sent when when the user is unable to scan the QR code.</p>

<h6 class="api api-request api-request-example" id="request-example-email">Request Example (Email)</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span>
</code></pre>
</div>

<h6 class="api api-request api-request-example" id="request-example-sms">Request Example (SMS)</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "profile": {
    "phoneNumber": "+1-555-415-1337"
  }
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-17">Response Example</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL_ACTIVATE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/qr/00fukNElRS_Tz6k-CFhg3pH4KO2dj2guhmaapXWbc4"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/lifecycle/activate/poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="activate-u2f-factor">Activate U2F Factor</h4>

<blockquote>
  <p>Activating a U2F factor is an <span class="api-label api-label-ea "><i class="fa fa-flag"></i> Early Access</span> release.</p>
</blockquote>

<p>Activation gets the registration information from the U2F token using the platform APIs and passes it to Okta.</p>

<h5 class="api api-response api-response-example" id="get-registration-information-from-u2f-token-by-calling-the-u2f-javascript-call">Get registration information from U2F token by calling the U2F Javascript call</h5>

<div class="language-html highlighter-rouge"><pre class="highlight"><code>//Get the u2f-api.js from https://github.com/google/u2f-ref-code/tree/master/u2f-gae-demo/war/js
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/u2f-api.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="c1">//use the appId from the activation object</span>
<span class="kd">var</span> <span class="nx">appId</span> <span class="o">=</span> <span class="nx">activation</span><span class="p">.</span><span class="nx">appId</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">registerRequests</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="na">version</span><span class="p">:</span> <span class="nx">activation</span><span class="p">.</span><span class="nx">version</span><span class="p">,</span> <span class="c1">//use the version from the activation object</span>
    <span class="na">challenge</span><span class="p">:</span> <span class="nx">activation</span><span class="p">.</span><span class="nx">nonce</span> <span class="c1">//use the nonce from the activation object</span>
    <span class="p">}];</span>
<span class="nx">u2f</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">appId</span><span class="p">,</span> <span class="nx">registerRequests</span><span class="p">,</span> <span class="p">[],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">errorCode</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">errorCode</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Error from U2F platform</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	  <span class="c1">//Get the registrationData from the callback result</span>
	  <span class="kd">var</span> <span class="nx">registrationData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">registrationData</span><span class="p">;</span>

	  <span class="c1">//Get the clientData from the callback result</span>
	  <span class="kd">var</span> <span class="nx">clientData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">clientData</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>

<p>Activate a <code class="highlighter-rouge">u2f</code> factor by verifying the registration data and client data.</p>

<h5 class="api api-request api-request-params" id="request-parameters-7">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>registrationData</td>
      <td>base64 encoded registration data from U2F javascript call</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>clientData</td>
      <td>base64 encoded client data from U2F javascript call</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-7">Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the registration nonce is invalid or if registration data is invalid, you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-16">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "registrationData": "BQTl3Iu9V4caCvcI44pmYwIehICWyboL_J2Wl5FA6ZGNx9qT11Df-rHJIy9iP6MSJ_qAaKqdq8O0XVqBG46p6qbpQLIb471thYthrQiW9955tNdORCEhvZX9iYNI1peNlETOr7Qx_PgIZ6Ein6aB3wH9JCTGgsdd4JX3cYixbj1v9W8wggJEMIIBLqADAgECAgRVYr6gMAsGCSqGSIb3DQEBCzAuMSwwKgYDVQQDEyNZdWJpY28gVTJGIFJvb3QgQ0EgU2VyaWFsIDQ1NzIwMDYzMTAgFw0xNDA4MDEwMDAwMDBaGA8yMDUwMDkwNDAwMDAwMFowKjEoMCYGA1UEAwwfWXViaWNvIFUyRiBFRSBTZXJpYWwgMTQzMjUzNDY4ODBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABEszH3c9gUS5mVy-RYVRfhdYOqR2I2lcvoWsSCyAGfLJuUZ64EWw5m8TGy6jJDyR_aYC4xjz_F2NKnq65yvRQwmjOzA5MCIGCSsGAQQBgsQKAgQVMS4zLjYuMS40LjEuNDE0ODIuMS41MBMGCysGAQQBguUcAgEBBAQDAgUgMAsGCSqGSIb3DQEBCwOCAQEArBbZs262s6m3bXWUs09Z9Pc-28n96yk162tFHKv0HSXT5xYU10cmBMpypXjjI-23YARoXwXn0bm-BdtulED6xc_JMqbK-uhSmXcu2wJ4ICA81BQdPutvaizpnjlXgDJjq6uNbsSAp98IStLLp7fW13yUw-vAsWb5YFfK9f46Yx6iakM3YqNvvs9M9EUJYl_VrxBJqnyLx2iaZlnpr13o8NcsKIJRdMUOBqt_ageQg3ttsyq_3LyoNcu7CQ7x8NmeCGm_6eVnZMQjDmwFdymwEN4OxfnM5MkcKCYhjqgIGruWkVHsFnJa8qjZXneVvKoiepuUQyDEJ2GcqvhU2YKY1zBGAiEAxWDh5F7vr0AoEsi3N-uR6KR3ADXlZnQgzROUTVhff8ICIQCiUUG1FkQ9e8PW1dhRk6tjHjL22KZ9JqBrTfpytC5jaQ==",
  "clientData": "eyAiY2hhbGxlbmdlIjogImFYLS1wMTlibldWcUlnY25HU0hLIiwgIm9yaWdpbiI6ICJodHRwczpcL1wvc25hZ2FuZGxhLm9rdGFwcmV2aWV3LmNvbSIsICJ0eXAiOiAibmF2aWdhdG9yLmlkLmZpbmlzaEVucm9sbG1lbnQiIH0=",
  "stateToken": "00MBkDX0vBddsuU1VnDsa7-qqIOi7g51YLNQEen1hi"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/fuf1o51EADOTFXHHBXBP/lifecycle/activate"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-18">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="verify-factor">Verify Factor</h3>

<p>Verifies an enrolled factor for an authentication transaction with the <code class="highlighter-rouge">MFA_REQUIRED</code> or <code class="highlighter-rouge">MFA_CHALLENGE</code> <a href="#transaction-state">state</a></p>

<ul>
  <li><a href="#verify-security-question-factor">Verify Security Question Factor</a></li>
  <li><a href="#verify-sms-factor">Verify SMS Factor</a></li>
  <li><a href="#verify-totp-factor">Verify TOTP Factor</a></li>
  <li><a href="#verify-push-factor">Verify Push Factor</a></li>
  <li><a href="#verify-duo-factor">Verify Duo Factor</a></li>
  <li><a href="#verify-u2f-factor">Verify U2F Factor</a></li>
  <li><a href="#verify-call-factor">Verify Call Factor</a></li>
</ul>

<h4 class="api api-operation" id="verify-security-question-factor">Verify Security Question Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<p>Verifies an answer to a <code class="highlighter-rouge">question</code> factor.</p>

<h5 class="api api-request api-request-params" id="request-parameters-8">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>answer</td>
      <td>answer to security question</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-8">Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the <code class="highlighter-rouge">answer</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your answer doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-17">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "answer": "mayonnaise"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/ufs1pe3ISGKGPYKXRBKK/verify"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-19">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ZD3Z7ixppspFljXV2t_Z6GfrYzqG7cDJ8reWo2hy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-sms-factor">Verify SMS Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<h5 class="api api-request api-request-params" id="request-parameters-9">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>If you omit <code class="highlighter-rouge">passCode</code> in the request a new OTP will be sent to the device, otherwise the request will attempt to verify the <code class="highlighter-rouge">passCode</code></p>
</blockquote>

<h4 class="api api-response api-response-params" id="response-parameters-9">Response Parameters</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the <code class="highlighter-rouge">passCode</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your answer doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="send-sms-challenge-otp">Send SMS Challenge (OTP)</h5>

<p>Omit <code class="highlighter-rouge">passCode</code> in the request to sent an OTP to the device.</p>

<h6 class="api api-request api-request-example" id="request-example-18">Request Example</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-20">Response Example</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="verify-sms-challenge-otp">Verify SMS Challenge (OTP)</h5>

<p>Specify <code class="highlighter-rouge">passCode</code> in the request to verify the factor.</p>

<h6 class="api api-request api-request-example" id="request-example-19">Request Example</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "657866"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-21">Response Example</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-totp-factor">Verify TOTP Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<p>Verifies an OTP for a <code class="highlighter-rouge">token:software:totp</code> factor.</p>

<h5 class="api api-request api-request-params" id="request-parameters-10">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-10">Response Parameters</h5>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the passcode is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your passcode doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 class="api api-request api-request-example" id="request-example-20">Request Example</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "657866"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-22">Response Example</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-push-factor">Verify Push Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<p>Sends an asynchronous push notification (challenge) to the device for the user to approve or reject.  The <code class="highlighter-rouge">factorResult</code> for the transaction will have a result of <code class="highlighter-rouge">WAITING</code>, <code class="highlighter-rouge">SUCCESS</code>, <code class="highlighter-rouge">REJECTED</code>, or <code class="highlighter-rouge">TIMEOUT</code>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-11">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-request api-request-example" id="request-example-21">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/ufs1pe3ISGKGPYKXRBKK/verify"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-waiting-1">Response Example (Waiting)</h5>

<blockquote>
  <p>Keep polling authentication transactions with <code class="highlighter-rouge">WAITING</code> result until the challenge completes or expires.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"deviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SmartPhone_IPhone"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gibson"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOS"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-approved">Response Example (Approved)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9xx"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-rejected">Response Example (Rejected)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REJECTED"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"deviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SmartPhone_IPhone"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gibson"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOS"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-timeout-1">Response Example (Timeout)</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opfh52xcuft3J4uZc0g3"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"deviceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SmartPhone_IPhone"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gibson"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOS"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/opfh52xcuft3J4uZc0g3/verify/resend"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"POST"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-duo-factor">Verify Duo Factor</h4>

<p>Verification of the Duo factor is implemented as an integration with Duo widget. The process is very similar to the  <a href="#full-page-example-for-duo-enrollment">enrollment</a> where the widget is embedded in iframe - “duo_iframe”. Verification starts with request to the Okta API, then continues with a Duo widget that handles the actual verification. We need to pass the state token as hidden object in “duo_form”. The authentication completes with call to <a href="#verification-poll-request-example">poll link</a> to verify the state and obtain session token.</p>

<h5 class="api api-request api-request-example" id="request-example-22">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "${stateToken}"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="p">]/verify</span><span class="s2">"
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-23">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00CzoxFVe4R2nv0hTxm32r1kayfrrOkuxcE2rfINwZ"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T14:13:58.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:29:58.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@gexample.com"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"factor"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"dsflnpo99zpfMyaij0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"web"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"DUO"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"DUO"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="s2">"first.last@example.com"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"verification"</span><span class="p">:{</span><span class="w">
                    </span><span class="nt">"host"</span><span class="p">:</span><span class="s2">"api-your-host.duosecurity.com"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"signature"</span><span class="p">:</span><span class="s2">"TX|...your-signature"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
                        </span><span class="nt">"complete"</span><span class="p">:{</span><span class="w">
                            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/duoCallback"</span><span class="p">,</span><span class="w">
                            </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                                </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                                    </span><span class="s2">"POST"</span><span class="w">
                                </span><span class="p">]</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nt">"script"</span><span class="p">:{</span><span class="w">
                            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/js/sections/duo/Duo-Web-v2.js"</span><span class="p">,</span><span class="w">
                            </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"text/javascript; charset=utf-8"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"policy"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allowRememberDevice"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"rememberDeviceLifetimeInMinutes"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
            </span><span class="nt">"rememberDeviceByDefault"</span><span class="p">:</span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"poll"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/verify"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"prev"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
                    </span><span class="s2">"POST"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="sample-for-duo-iframe">Sample for Duo iFrame</h5>

<div class="language-html highlighter-rouge"><pre class="highlight"><code>...
<span class="c">&lt;!--
    The Duo SDK will automatically bind to this iFrame and populate it for us.
    See https://www.duosecurity.com/docs/duoweb for more info.
 --&gt;</span>
<span class="nt">&lt;iframe</span> <span class="na">id=</span><span class="s">"duo_iframe"</span> <span class="na">width=</span><span class="s">"620"</span> <span class="na">height=</span><span class="s">"330"</span> <span class="na">frameborder=</span><span class="s">"0"</span><span class="nt">&gt;&lt;/iframe&gt;</span>
<span class="c">&lt;!--
    The Duo SDK will automatically bind to this form and submit it for us.
    See https://www.duosecurity.com/docs/duoweb for more info.
 --&gt;</span>
<span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"duo_form"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- The state token is required here (in order to bind anonymous request back into Auth API) --&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"stateToken"</span> <span class="na">value=</span><span class="s">'00CzoxFVe4R2nv0hTxm32r1kayfrrOkuxcE2rfINwZ'</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://your-domain.okta.com/js/sections/duo/Duo-Web-v2.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- The host, sig_request, and post_action values will be given via the Auth API --&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="nx">Duo</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
        <span class="s1">'host'</span><span class="p">:</span> <span class="s1">'api-your-host.duosecurity.com'</span><span class="p">,</span>
        <span class="s1">'sig_request'</span><span class="p">:</span> <span class="s1">'TX|...your-signature'</span><span class="p">,</span>
        <span class="s1">'post_action'</span><span class="p">:</span> <span class="s1">'https://your-domain.okta.com/api/v1/authn/factors/dsflnpo99zpfMyaij0g3/lifecycle/duoCallback'</span>
    <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
...

</code></pre>
</div>

<h5 class="api api-request api-request-example" id="verification-poll-request-example">Verification Poll Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "${stateToken}"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="p">]/verify</span><span class="s2">"
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="verification-poll-response-example">Verification Poll Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T14:14:44.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="s2">"201111XUk7La2gw5r5PV1IhU4WSd0fV6mvNYdlJoeqjuyej7S83x3Hr"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:29:58.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@example.com"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-u2f-factor">Verify U2F Factor</h4>

<blockquote>
  <p>Verifying a U2F factor is an <span class="api-label api-label-ea "><i class="fa fa-flag"></i> Early Access</span> feature.</p>
</blockquote>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<h5 class="api api-request api-request-params" id="request-parameters-12">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>clientData</td>
      <td>base64 encoded client data from the U2F token</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>signatureData</td>
      <td>base64 encoded signature data from the U2F token</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 id="start-verification-to-get-challenge-nonce">Start verification to get challenge nonce</h5>

<p>Verification of the U2F factor starts with getting the challenge nonce and U2F token details and then using the client side
javascript API to get the signed assertion from the U2F token.</p>

<h5 class="api api-request api-request-example" id="request-example-23">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "${stateToken}"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="p">]/verify</span><span class="s2">"
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-24">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="s2">"00wCfuPA3qX3azDawSdPGFIhHuzbZX72Gv4bu_ew9d"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-12-06T01:32:39.000Z"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00u21eb3qyRDNNIKTGCW"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2015-10-28T23:27:57.000Z"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@gmail.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"factor"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"fuf8y2l4n5mfH0UWe0h7"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"factorType"</span><span class="p">:</span><span class="s2">"u2f"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"FIDO"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"vendorName"</span><span class="p">:</span><span class="s2">"FIDO"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="s2">"shvjvW2Fi2GtCJb33nm0105EISG9lf2Jg0jWl42URM6vtDH8-AhnoSKfpoHfAf0kJMaCx13glfdxiLFuPW_1bw"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"appId"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"version"</span><span class="p">:</span><span class="s2">"U2F_V2"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"challenge"</span><span class="p">:{</span><span class="w">
               </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"tT1MI7XGzMu48Ivnz3vB"</span><span class="p">,</span><span class="w">
               </span><span class="nt">"timeoutSeconds"</span><span class="p">:</span><span class="mi">20</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"policy"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"allowRememberDevice"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="nt">"rememberDeviceLifetimeInMinutes"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
         </span><span class="nt">"rememberDeviceByDefault"</span><span class="p">:</span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"_links"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"next"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/fuf8y2l4n5mfH0UWe0h7/verify"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"cancel"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"prev"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"href"</span><span class="p">:</span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
         </span><span class="nt">"hints"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="get-the-signed-assertion-from-the-u2f-token">Get the signed assertion from the U2F token</h5>

<div class="language-html highlighter-rouge"><pre class="highlight"><code>//Get the u2f-api.js from https://github.com/google/u2f-ref-code/tree/master/u2f-gae-demo/war/js
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/u2f-api.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="kd">var</span> <span class="nx">challengeNonce</span> <span class="o">=</span> <span class="nx">factor</span><span class="p">.</span><span class="nx">_embedded</span><span class="p">.</span><span class="nx">challenge</span><span class="p">.</span><span class="nx">nonce</span><span class="p">;</span> <span class="c1">//use the nonce from the challenge object</span>
<span class="kd">var</span> <span class="nx">appId</span> <span class="o">=</span> <span class="nx">factor</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">appId</span><span class="p">;</span> <span class="c1">//use the appId from factor profile object</span>

<span class="c1">//Use the version and credentialId from factor profile object</span>
<span class="kd">var</span> <span class="nx">registeredKeys</span> <span class="o">=</span> <span class="p">[{</span><span class="na">version</span><span class="p">:</span> <span class="nx">factor</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">version</span><span class="p">,</span> <span class="na">keyHandle</span><span class="p">:</span> <span class="nx">factor</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">credentialId</span> <span class="p">}];</span>

<span class="c1">//Call the U2F javascript API to get signed assertion from the U2F token</span>
<span class="nx">u2f</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">appId</span><span class="p">,</span> <span class="nx">factorData</span><span class="p">.</span><span class="nx">challenge</span><span class="p">.</span><span class="nx">nonce</span><span class="p">,</span> <span class="nx">registeredKeys</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">errorCode</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">errorCode</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Error from U2F platform</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	  <span class="c1">//Get the client data from callback result</span>
	  <span class="kd">var</span> <span class="nx">clientData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">clientData</span><span class="p">;</span>

    <span class="c1">//Get the signature data from callback result</span>
	  <span class="kd">var</span> <span class="nx">signatureData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">signatureData</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>

<h5 class="api api-request api-request-example" id="post-the-signed-assertion-to-okta-to-complete-verification">Post the signed assertion to Okta to complete verification</h5>

<h5 class="api api-request api-request-example" id="request-example-24">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "${stateToken}",
  "clientData":"eyAiY2hhbGxlbmdlIjogIlJ6ZDhQbEJEWUEyQ0VsbXVGcHlMIiwgIm9yaWdpbiI6ICJodHRwczpcL1wvc25hZ2FuZGxhLm9rdGFwcmV2aWV3LmNvbSIsICJ0eXAiOiAibmF2aWdhdG9yLmlkLmdldEFzc2VydGlvbiIgfQ==",
  "signatureData":"AQAAAAEwRQIgRDEdmXr_jh1bEHtoUs1l7mMd-eUDO0eKqXKkrK5hUi0CIQDaVX030GgxVPr4RX3c4XgugildmHwDLwKRL0aMS3Sbpw==",
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/</span><span class="k">${</span><span class="nv">factorId</span><span class="p">]/verify</span><span class="s2">"
</span></code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-of-u2f-verification-example">Response of U2F verification Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="s2">"2016-07-13T14:14:44.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="s2">"201111XUk7La2gw5r5PV1IhU4WSd0fV6mvNYdlJoeqjuyej7S83x3Hr"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"_embedded"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"user"</span><span class="p">:{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"00ukv3jVTgRjDctlX0g3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="s2">"2016-07-13T13:29:58.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"profile"</span><span class="p">:{</span><span class="w">
                </span><span class="nt">"login"</span><span class="p">:</span><span class="s2">"first.last@example.com"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"First"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"lastName"</span><span class="p">:</span><span class="s2">"Last"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"locale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="s2">"America/Los_Angeles"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-operation" id="verify-call-factor">Verify Call Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/factors/<em>:fid</em>/verify</span></p>

<h5 class="api api-request api-request-params" id="request-parameters-13">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code class="highlighter-rouge">id</code> of factor</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>If you omit <code class="highlighter-rouge">passCode</code> in the request a new OTP will be sent to the device, otherwise the request will attempt to verify the <code class="highlighter-rouge">passCode</code></p>
</blockquote>

<h4 class="api api-response api-response-params" id="response-parameters-11">Response Parameters</h4>

<p><a href="#authentication-transaction-model">Authentication Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication transaction.</p>

<p>If the <code class="highlighter-rouge">passCode</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaei_IfXcpnTHit_YEKGInpFw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your answer doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">#####</span><span class="w"> </span><span class="err">Send</span><span class="w"> </span><span class="err">Voice</span><span class="w"> </span><span class="err">Call</span><span class="w"> </span><span class="err">Challenge</span><span class="w"> </span><span class="err">(OTP)</span><span class="w">

</span><span class="err">Omit</span><span class="w"> </span><span class="err">`passCode`</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">sent</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">OTP</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">device.</span><span class="w">

</span><span class="err">######</span><span class="w"> </span><span class="err">Request</span><span class="w"> </span><span class="err">Example</span><span class="w">
</span><span class="p">{</span><span class="err">:.api</span><span class="w"> </span><span class="err">.api-request</span><span class="w"> </span><span class="err">.api-request-example</span><span class="p">}</span><span class="w">

</span><span class="err">~~~sh</span><span class="w">
</span><span class="err">curl</span><span class="w"> </span><span class="err">-v</span><span class="w"> </span><span class="err">-X</span><span class="w"> </span><span class="err">POST</span><span class="w"> </span><span class="err">\</span><span class="w">
</span><span class="err">-H</span><span class="w"> </span><span class="s2">"Accept: application/json"</span><span class="w"> </span><span class="err">\</span><span class="w">
</span><span class="err">-H</span><span class="w"> </span><span class="s2">"Content-Type: application/json"</span><span class="w"> </span><span class="err">\</span><span class="w">
</span><span class="err">-d</span><span class="w"> </span><span class="err">'</span><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="w">
</span><span class="p">}</span><span class="err">'</span><span class="w"> </span><span class="s2">"https://${org}.okta.com/api/v1/authn/factors/clf193zUBEROPBNZKPPE/verify"</span><span class="w">

</span><span class="err">######</span><span class="w"> </span><span class="err">Response</span><span class="w"> </span><span class="err">Example</span><span class="w">
</span><span class="p">{</span><span class="err">:.api</span><span class="w"> </span><span class="err">.api-response</span><span class="w"> </span><span class="err">.api-response-example</span><span class="p">}</span><span class="w">

</span><span class="err">~~~json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clf193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/clf193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="verify-call-challenge-otp">Verify Call Challenge (OTP)</h5>

<p>Specify <code class="highlighter-rouge">passCode</code> in the request to verify the factor.</p>

<h6 class="api api-request api-request-example" id="request-example-25">Request Example</h6>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb",
  "passCode": "65786"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/clf193zUBEROPBNZKPPE/verify"</span>
</code></pre>
</div>

<h6 class="api api-response api-response-example" id="response-example-25">Response Example</h6>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<h2 id="recovery-operations">Recovery Operations</h2>

<h3 class="api api-operation" id="forgot-password">Forgot Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/password</span></p>

<p>Starts a new password recovery transaction for a given user and issues a <a href="#recovery-token">recovery token</a> that can be used to reset a user’s password.</p>

<ul>
  <li><a href="#forgot-password-with-email-factor">Forgot Password with Email Factor</a></li>
  <li><a href="#forgot-password-with-sms-factor">Forgot Password with SMS Factor</a></li>
  <li><a href="#forgot-password-with-call-factor">Forgot Password with Call Factor</a></li>
  <li><a href="#forgot-password-with-trusted-application">Forgot Password with Trusted Application</a></li>
</ul>

<blockquote>
  <p>Self-service password reset (forgot password) must be permitted via the user’s assigned password policy to use this operation.</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-14">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
      <th>MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>User’s non-qualified short-name (e.g. dade.murphy) or unique fully-qualified login (e.g dade.murphy@example.com)</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>Recovery factor to use for primary authentication</td>
      <td>Body</td>
      <td><code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code> or <code class="highlighter-rouge">Voice Call</code></td>
      <td>FALSE</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
      <td>2048</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>A valid <code class="highlighter-rouge">factorType</code> is required for requests without an API token with admin privileges. (See <a href="#forgot-password-with-trusted-application">Forgot Password with Trusted Application</a>)</p>
</blockquote>

<h5 class="api api-response api-response-params" id="response-parameters-12">Response Parameters</h5>

<h6 id="public-application-1">Public Application</h6>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> status for the new recovery transaction.</p>

<blockquote>
  <p>You will always receive a <a href="#recovery-transaction-model">Recovery Transaction</a> response even if the requested <code class="highlighter-rouge">username</code> is not a valid identifier to prevent information disclosure.</p>
</blockquote>

<h6 id="trusted-application-1">Trusted Application</h6>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with an issued <code class="highlighter-rouge">recoveryToken</code> that can be distributed to the end-user.</p>

<p>You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">username</code> requested is not valid</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000095"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recovery not allowed for unknown user."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000095"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaetVarN2dKS6ap08dq0k4n7A"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="forgot-password-with-email-factor">Forgot Password with Email Factor</h4>

<p>Starts a new password recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a recovery email to the user’s primary and secondary email address with a <a href="#recovery-token">recovery token</a> that can be used to complete the transaction.</p>

<p>Since the recovery email is distributed out-of-band and may be viewed on a different user agent or device, this operation does not return a <a href="#state-token">state token</a> and does not have a <code class="highlighter-rouge">next</code> link.</p>

<blockquote>
  <p>Primary authentication of a user’s recovery credential (e.g <code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code>) has not yet completed.
Okta will not publish additional metadata about the user until primary authentication has successfully completed.</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-26">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "EMAIL",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-26">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="forgot-password-with-sms-factor">Forgot Password with SMS Factor</h4>

<p>Starts a new password recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a SMS OTP (challenge) to the user’s mobile phone.  This operation will transition the recovery transaction to the <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> state and wait for user to <a href="#verify-sms-recovery-factor">verify the OTP</a>.</p>

<blockquote>
  <p>Primary authentication of a user’s recovery credential (e.g email or SMS) has not yet completed.
Okta will not publish additional metadata about the user until primary authentication has successfully completed.</p>
</blockquote>

<blockquote>
  <p>SMS recovery factor must be enabled via the user’s assigned password policy to use this operation.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "SMS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-27">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/SMS/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/SMS/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="forgot-password-with-call-factor">Forgot Password with Call Factor</h4>

<p>Starts a new password recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a Voice Call with OTP (challenge) to the user’s phone.  This operation will transition the recovery transaction to the <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> state and wait for user to <a href="#verify-call-recovery-factor">verify the OTP</a>.</p>

<blockquote>
  <p>Primary authentication of a user’s recovery credential (e.g email or SMS or Voice Call) has not yet completed.
Okta will not publish additional metadata about the user until primary authentication has successfully completed.</p>
</blockquote>

<blockquote>
  <p>Voice Call recovery factor must be enabled via the user’s assigned password policy to use this operation.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "call",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-28">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/CALL/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/CALL/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="forgot-password-with-trusted-application">Forgot Password with Trusted Application</h4>

<p>Allows a <a href="#trusted-application">trusted application</a> such as an external portal to implement its own primary authentication process and directly obtain a <a href="#recovery-token">recovery token</a> for a user given just the user’s identifier.</p>

<blockquote>
  <p>Directly obtaining a <code class="highlighter-rouge">recoveryToken</code> is a highly privileged operation that requires an administrator API token and should be restricted to trusted web applications.  Anyone that obtains a <code class="highlighter-rouge">recoveryToken</code> for a user and knows the answer to a user’s recovery question can reset their password or unlock their account.</p>
</blockquote>

<blockquote>
  <p>The <strong>public IP address</strong> of your <a href="#trusted-application">trusted application</a> must be <a href="../getting_started/design_principles.html#ip-address">whitelisted as a gateway IP address</a> to forward the user agent’s original IP address with the <code class="highlighter-rouge">X-Forwarded-For</code> HTTP header</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-27">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-H <span class="s2">"User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"</span> <span class="se">\</span>
-H <span class="s2">"X-Forwarded-For: 23.235.46.133"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-29">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VBQ0gwBp5LyJJFdbmWCM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recovery"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/token"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="unlock-account">Unlock Account</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/unlock</span></p>

<p>Starts a new unlock recovery transaction for a given user and issues a <a href="#recovery-token">recovery token</a> that can be used to unlock a user’s account.</p>

<ul>
  <li><a href="#unlock-account-with-email-factor">Unlock Account with Email Factor</a></li>
  <li><a href="#unlock-account-with-sms-factor">Unlock Account with SMS Factor</a></li>
  <li><a href="#unlock-account-with-trusted-application">Unlock Account with Trusted Application</a></li>
</ul>

<blockquote>
  <p>Self-service unlock must be permitted via the user’s assigned password policy to use this operation.</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-15">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
      <th>MaxLength</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>User’s non-qualified short-name (e.g. dade.murphy) or unique fully-qualified login (e.g dade.murphy@example.com)</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>Recovery factor to use for primary authentication</td>
      <td>Body</td>
      <td><code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code></td>
      <td>FALSE</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
      <td>2048</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>A valid <code class="highlighter-rouge">factoryType</code> is required for requests without an API token with admin privileges. (See <a href="#unlock-account-with-trusted-application">Unlock Account with Trusted Application</a>)</p>
</blockquote>

<h5 class="api api-response api-response-params" id="response-parameters-13">Response Parameters</h5>

<h6 id="public-application-2">Public Application</h6>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> status for the new recovery transaction.</p>

<blockquote>
  <p>You will always receive a <a href="#recovery-transaction-model">Recovery Transaction</a> response even if the requested <code class="highlighter-rouge">username</code> is not a valid identifier to prevent information disclosure.</p>
</blockquote>

<h6 id="trusted-application-2">Trusted Application</h6>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with an issued <code class="highlighter-rouge">recoveryToken</code> that can be distributed to the end-user.</p>

<p>You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">username</code> requested is not valid</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000095"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recovery not allowed for unknown user."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000095"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaetVarN2dKS6ap08dq0k4n7A"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="unlock-account-with-email-factor">Unlock Account with Email Factor</h4>

<p>Starts a new unlock recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a recovery email to the user’s primary and secondary email address with a <a href="#recovery-token">recovery token</a> that can be used to complete the transaction.</p>

<p>Since the recovery email is distributed out-of-band and may be viewed on a different user agent or device, this operation does not return a <a href="#state-token">state token</a> and does not have a <code class="highlighter-rouge">next</code> link.</p>

<blockquote>
  <p>Primary authentication of a user’s recovery credential (e.g <code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code>) has not yet completed.
Okta will not publish additional metadata about the user until primary authentication has successfully completed.</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-28">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "EMAIL",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/unlock"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-30">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAITING"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLOCK"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="unlock-account-with-sms-factor">Unlock Account with SMS Factor</h4>

<p>Starts a new unlock recovery transaction with a user identifier (<code class="highlighter-rouge">username</code>) and asynchronously sends a SMS OTP (challenge) to the user’s mobile phone.  This operation will transition the recovery transaction to the <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> state and wait for user to <a href="#verify-sms-recovery-factor">verify the OTP</a>.</p>

<blockquote>
  <p>Primary authentication of a user’s recovery credential (e.g email or SMS) has not yet completed.
Okta will not publish additional metadata about the user until primary authentication has successfully completed.</p>
</blockquote>

<blockquote>
  <p>SMS recovery factor must be enabled via the user’s assigned password policy to use this operation.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "factorType": "SMS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/unlock"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-31">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLOCK"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/SMS/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/SMS/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="unlock-account-with-trusted-application">Unlock Account with Trusted Application</h4>

<p>Allows a <a href="#trusted-application">trusted application</a> such as an external portal to implement its own primary authentication process and directly obtain a <a href="#recovery-token">recovery token</a> for a user given just the user’s identifier.</p>

<blockquote>
  <p>Directly obtaining a <code class="highlighter-rouge">recoveryToken</code> is a highly privileged operation that requires an administrator API token and should be restricted to <a href="#trusted-application">trusted web applications</a>.  Anyone that obtains a <code class="highlighter-rouge">recoveryToken</code> for a user and knows the answer to a user’s recovery question can reset their password or unlock their account.</p>
</blockquote>

<blockquote>
  <p>The <strong>public IP address</strong> of your <a href="#trusted-application">trusted application</a> must be <a href="../getting_started/design_principles.html#ip-address">whitelisted as a gateway IP address</a> to forward the user agent’s original IP address with the <code class="highlighter-rouge">X-Forwarded-For</code> HTTP header</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-29">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-H <span class="s2">"User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"</span> <span class="se">\</span>
-H <span class="s2">"X-Forwarded-For: 23.235.46.133"</span> <span class="se">\</span>
-d <span class="s1">'{
  "username": "dade.murphy@example.com",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/unlock"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-32">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VBQ0gwBp5LyJJFdbmWCM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLOCK"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recovery"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/token"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="verify-recovery-factor">Verify Recovery Factor</h3>

<h4 class="api api-operation" id="verify-sms-recovery-factor">Verify SMS Recovery Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/factors/sms/verify</span></p>

<p>Verifies a SMS OTP (<code class="highlighter-rouge">passCode</code>) sent to the user’s mobile phone for primary authentication for a recovery transaction with <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> status.</p>

<h5 class="api api-request api-request-params" id="request-parameters-16">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-14">Response Parameters</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<p>If the <code class="highlighter-rouge">passCode</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oae2uOmZcuzToCPEV2Pc_f5zw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your token doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-30">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh",
  "passCode": "657866"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/sms/verify"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-33">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"recovery_question"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who's a major player in the cowboy scene?"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 class="api api-operation" id="resend-sms-recovery-challenge">Resend SMS Recovery Challenge</h6>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/factors/sms/resend</span></p>

<p>Resends a SMS OTP (<code class="highlighter-rouge">passCode</code>) to the user’s mobile phone</p>

<h4 class="api api-request api-request-params" id="request-parameters-17">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-15">Response Parameters</h4>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<h4 class="api api-request api-request-example" id="request-example-31">Request Example</h4>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/factors/sms/resend"</span>
</code></pre>
</div>

<h4 class="api api-response api-response-example" id="response-example-34">Response Example</h4>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/SMS/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/SMS/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<blockquote>
  <p>The <code class="highlighter-rouge">factorType</code> and <code class="highlighter-rouge">recoveryType</code> properties vary depending on recovery transaction.</p>
</blockquote>

<h4 class="api api-operation" id="verify-call-recovery-factor">Verify Call Recovery Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/factors/call/verify</span></p>

<p>Verifies a Voice Call OTP (<code class="highlighter-rouge">passCode</code>) sent to the user’s device for primary authentication for a recovery transaction with <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> status.</p>

<h5 class="api api-request api-request-params" id="request-parameters-18">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>Passcode received via the voice call</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-16">Response Parameters</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<p>If the <code class="highlighter-rouge">passCode</code> is invalid you will receive a <code class="highlighter-rouge">403 Forbidden</code> status code with the following error:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Passcode/Answer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000068"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oae2uOmZcuzToCPEV2Pc_f5zw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your token doesn't match our records. Please try again."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-32">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh",
  "passCode": "65786"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/factors/CALL/verify"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-35">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"recovery_question"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who's a major player in the cowboy scene?"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span><span class="err">######</span><span class="w"> </span><span class="err">Resend</span><span class="w"> </span><span class="err">Call</span><span class="w"> </span><span class="err">Recovery</span><span class="w"> </span><span class="err">Challenge</span><span class="w">
</span><span class="p">{</span><span class="err">:.api</span><span class="w"> </span><span class="err">.api-operation</span><span class="p">}</span><span class="w">

</span><span class="err">&lt;span</span><span class="w"> </span><span class="err">class=</span><span class="s2">"api-uri-template api-uri-post"</span><span class="err">&gt;&lt;span</span><span class="w"> </span><span class="err">class=</span><span class="s2">"api-label"</span><span class="err">&gt;POST&lt;/span&gt;</span><span class="w"> </span><span class="err">/api/v</span><span class="mi">1</span><span class="err">/authn/recovery/factors/call/resend&lt;/span&gt;</span><span class="w">

</span><span class="err">Resends</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">Voice</span><span class="w"> </span><span class="err">Call</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">OTP</span><span class="w"> </span><span class="err">(`passCode`)</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">user's</span><span class="w"> </span><span class="err">phone</span><span class="w">

</span><span class="err">####</span><span class="w"> </span><span class="err">Request</span><span class="w"> </span><span class="err">Parameters</span><span class="w">
</span><span class="p">{</span><span class="err">:.api</span><span class="w"> </span><span class="err">.api-request</span><span class="w"> </span><span class="err">.api-request-params</span><span class="p">}</span><span class="w">

</span><span class="err">Parameter</span><span class="w">    </span><span class="err">|</span><span class="w"> </span><span class="err">Description</span><span class="w">                                                  </span><span class="err">|</span><span class="w"> </span><span class="err">Param</span><span class="w"> </span><span class="err">Type</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">DataType</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">Required</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">Default</span><span class="w">
</span><span class="err">------------</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">------------------------------------------------------------</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">----------</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">--------</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">--------</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">-------</span><span class="w">
</span><span class="err">stateToken</span><span class="w">   </span><span class="err">|</span><span class="w"> </span><span class="p">[</span><span class="err">state</span><span class="w"> </span><span class="err">token</span><span class="p">]</span><span class="err">(#state-token)</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">current</span><span class="w"> </span><span class="err">recovery</span><span class="w"> </span><span class="err">transaction</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">Body</span><span class="w">       </span><span class="err">|</span><span class="w"> </span><span class="err">String</span><span class="w">   </span><span class="err">|</span><span class="w"> </span><span class="err">TRUE</span><span class="w">     </span><span class="err">|</span><span class="w">

</span><span class="err">####</span><span class="w"> </span><span class="err">Response</span><span class="w"> </span><span class="err">Parameters</span><span class="w">
</span><span class="p">{</span><span class="err">:.api</span><span class="w"> </span><span class="err">.api-response</span><span class="w"> </span><span class="err">.api-response-params</span><span class="p">}</span><span class="w">

</span><span class="p">[</span><span class="err">Recovery</span><span class="w"> </span><span class="err">Transaction</span><span class="w"> </span><span class="err">Object</span><span class="p">]</span><span class="err">(#recovery-transaction-model)</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">current</span><span class="w"> </span><span class="p">[</span><span class="err">state</span><span class="p">]</span><span class="err">(#transaction-state)</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">recovery</span><span class="w"> </span><span class="err">transaction.</span><span class="w">

</span><span class="err">####</span><span class="w"> </span><span class="err">Request</span><span class="w"> </span><span class="err">Example</span><span class="w">
</span><span class="p">{</span><span class="err">:.api</span><span class="w"> </span><span class="err">.api-request</span><span class="w"> </span><span class="err">.api-request-example</span><span class="p">}</span><span class="w">

</span><span class="err">~~~sh</span><span class="w">
</span><span class="err">curl</span><span class="w"> </span><span class="err">-v</span><span class="w"> </span><span class="err">-X</span><span class="w"> </span><span class="err">POST</span><span class="w"> </span><span class="err">\</span><span class="w">
</span><span class="err">-H</span><span class="w"> </span><span class="s2">"Accept: application/json"</span><span class="w"> </span><span class="err">\</span><span class="w">
</span><span class="err">-H</span><span class="w"> </span><span class="s2">"Content-Type: application/json"</span><span class="w"> </span><span class="err">\</span><span class="w">
</span><span class="err">-d</span><span class="w"> </span><span class="err">'</span><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="w">
</span><span class="p">}</span><span class="err">'</span><span class="w"> </span><span class="s2">"https://${org}.okta.com/api/v1/authn/recovery/factors/CALL/resend"</span><span class="w">
</span></code></pre>
</div>

<h4 class="api api-response api-response-example" id="response-example-36">Response Example</h4>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00xdqXOE5qDXX8-PBR1bYv8AESqIEinDy3yul01tyh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recoveryType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/CALL/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"resend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"call"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/factors/CALL/resend"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<blockquote>
  <p>The <code class="highlighter-rouge">factorType</code> and <code class="highlighter-rouge">recoveryType</code> properties will vary depending on recovery transaction</p>
</blockquote>

<h3 class="api api-operation" id="verify-recovery-token">Verify Recovery Token</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/token</span></p>

<p>Validates a <a href="#recovery-token">recovery token</a> that was distributed to the end-user to continue the recovery transaction.</p>

<h5 class="api api-request api-request-params" id="request-parameters-19">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>recoveryToken</td>
      <td><a href="#recovery-token">Recovery token</a> that was distributed to end-user via out-of-band mechanism such as email</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-17">Response Parameters</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with a <code class="highlighter-rouge">RECOVERY</code> status and an issued <code class="highlighter-rouge">stateToken</code> that must be used to complete the recovery transaction.</p>

<p>You will receive a <code class="highlighter-rouge">401 Unauthorized</code> status code if you attempt to use an expired or invalid <a href="#recovery-token">recovery token</a>.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000011"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid token provided"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000011"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeY-4G_TBUTBSZAn9n7oZCfw"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-33">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "recoveryToken": "00xdqXOE5qDZX8-PBR1bYv8AESqIFinDy3yul01tyh"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/token"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-37">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECOVERY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"recovery_question"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who's a major player in the cowboy scene?"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/recovery/answer"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="answer-recovery-question">Answer Recovery Question</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/recovery/answer</span></p>

<p>Answers the user’s recovery question to ensure only the end-user redeemed the <a href="#recovery-token">recovery token</a> for recovery transaction with a <code class="highlighter-rouge">RECOVERY</code> <a href="#transaction-state">status</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-20">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>answer</td>
      <td>answer to user’s recovery question</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-18">Response Parameters</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<p>You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">answer</code> to the user’s <a href="#recovery-question-object">recovery question</a> is invalid</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000087"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The recovery question answer did not match our records."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000087"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeGEiIPFfeR3a_XxpezUH9ug"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-34">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb",
  "answer": "Cowboy Dan"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/recovery/answer"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-38">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD_RESET"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"expiration"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"passwordExpireDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"excludeUsername"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="nt">"age"</span><span class="p">:{</span><span class="w">
         </span><span class="nt">"minAgeMinutes"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
         </span><span class="nt">"historyCount"</span><span class="p">:</span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/credentials/reset_password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="reset-password">Reset Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/credentials/reset_password</span></p>

<p>Resets a user’s password to complete a recovery transaction with a <code class="highlighter-rouge">PASSWORD_RESET</code> <a href="#transaction-state">state</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-21">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>newPassword</td>
      <td>user’s new password</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-19">Response Parameters</h5>

<p><a href="#recovery-transaction-model">Recovery Transaction Object</a> with the current <a href="#transaction-state">state</a> for the recovery transaction.</p>

<p>You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">answer</code> to the user’s <a href="#recovery-question-object">recovery question</a> is invalid.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000087"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The recovery question answer did not match our records."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000087"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeGEiIPFfeR3a_XxpezUH9ug"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>You will also receive a <code class="highlighter-rouge">403 Forbidden</code> status code if the <code class="highlighter-rouge">newPassword</code> does not meet password policy requirements for the user.</p>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The password does meet the complexity requirements of the current password policy."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000014"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeS4O7BUp5Roefkk_y4Z2u8Q"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Passwords must have at least 8 characters, a lowercase letter, an uppercase letter, a number, no parts of your username"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 class="api api-request api-request-example" id="request-example-35">Request Example</h5>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: SSWS </span><span class="k">${</span><span class="nv">api_token</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb",
  "newPassword": "Ch-ch-ch-ch-Changes!"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/credentials/reset_password"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-39">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="state-management-operations">State Management Operations</h2>

<h3 class="api api-operation" id="get-transaction-state">Get Transaction State</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn</span></p>

<p>Retrieves the current <a href="#transaction-state">transaction state</a> for a <a href="#state-token">state token</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-22">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-20">Response Parameters</h5>

<p><a href="#transaction-model">Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication or recovery transaction.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-40">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_CHALLENGE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms193zUBEROPBNZKPPE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="previous-transaction-state">Previous Transaction State</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/previous</span></p>

<p>Moves the current <a href="#transaction-state">transaction state</a> back to the previous state.</p>

<h5 class="api api-request api-request-params" id="request-parameters-23">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-21">Response Parameters</h5>

<p><a href="#transaction-model">Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication or recovery transaction.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/previous"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-41">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"stateToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"007ucIX7PATyn94hsHfOLVaXAmOBkKHWnOOLG43bsb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFA_ENROLL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"factors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"enroll"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"POST"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="skip-transaction-state">Skip Transaction State</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/skip</span></p>

<p>Skips the current <a href="#transaction-state">transaction state</a> and advances the state machine to the next state.</p>

<blockquote>
  <p>This operation is only available for <code class="highlighter-rouge">MFA_ENROLL</code> or <code class="highlighter-rouge">PASSWORD_WARN</code> states when published as a link</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-24">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-22">Response Parameters</h5>

<p><a href="#transaction-model">Transaction Object</a> with the current <a href="#transaction-state">state</a> for the authentication or recovery transaction.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/skip"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-42">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-03T10:15:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00ub0oNGTSWTBKOLGLNR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 class="api api-operation" id="cancel-transaction">Cancel Transaction</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /api/v1/authn/cancel</span></p>

<p>Cancels the current transaction and revokes the <a href="#state-token">state token</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-25">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-23">Response Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>relayState</td>
      <td>Optional state value that was persisted for the authentication or recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>curl -v -X POST <span class="se">\</span>
-H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'</span> <span class="s2">"https://</span><span class="k">${</span><span class="nv">org</span><span class="k">}</span><span class="s2">.okta.com/api/v1/authn/cancel"</span>
</code></pre>
</div>

<h5 class="api api-response api-response-example" id="response-example-43">Response Example</h5>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"relayState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/myapp/some/deep/link/i/want/to/return/to"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="transaction-model">Transaction Model</h2>

<p>The Authentication API is a <em>stateful</em> API that implements a finite state machine with <a href="#transaction-state">defined states</a> and transitions.  Each initial authentication or recovery request is issued a unique <a href="#state-token">state token</a> that must be passed with each subsequent request until the transaction is complete or canceled.</p>

<p>The Authentication API leverages the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a> format to publish <code class="highlighter-rouge">next</code> and <code class="highlighter-rouge">prev</code> links for the current transaction state which should be used to transition the state machine.</p>

<h3 id="authentication-transaction-model">Authentication Transaction Model</h3>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td>ephemeral <a href="#state-token">token</a> that encodes the current state of an authentication transaction</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>sessionToken</td>
      <td>ephemeral <a href="#session-token">one-time token</a> used to bootstrap an Okta session</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>expiresAt</td>
      <td>lifetime of the <code class="highlighter-rouge">stateToken</code> or <code class="highlighter-rouge">sessionToken</code> (See <a href="#tokens">Tokens</a>)</td>
      <td>Date</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>status</td>
      <td>current <a href="#transaction-state">state</a> of the authentication transaction</td>
      <td><a href="#transaction-state">Transaction State</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>optional opaque value that is persisted for the lifetime of the authentication transaction</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td>2048</td>
      <td> </td>
    </tr>
    <tr>
      <td>factorResult</td>
      <td>optional status of last verification attempt for a given factor</td>
      <td><a href="#factor-result">Factor Result</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>_embedded</td>
      <td><a href="#embedded-resources">embedded resources</a> for the current <code class="highlighter-rouge">status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>_links</td>
      <td><a href="#links-object">link relations</a> for the current <code class="highlighter-rouge">status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>The <code class="highlighter-rouge">relayState</code> paramater is an opaque value for the transaction and processed as untrusted data which is just echoed in a response.  It is the client’s responsibility to escape/encode this value before displaying in a UI such as a HTML document using <a href="https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet">best-practices</a></p>
</blockquote>

<h3 id="recovery-transaction-model">Recovery Transaction Model</h3>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td>ephemeral <a href="#state-token">token</a> that encodes the current state of a recovery transaction</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>recoveryToken</td>
      <td>ephemeral <a href="#recovery-token">one-time token</a> for recovery transaction to be distributed to the end-user</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>expiresAt</td>
      <td>lifetime of the <code class="highlighter-rouge">stateToken</code> or <code class="highlighter-rouge">recoveryToken</code> (See <a href="#tokens">Tokens</a>)</td>
      <td>Date</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>status</td>
      <td>current <a href="#transaction-state">state</a> of the recovery transaction</td>
      <td><a href="#transaction-state">Transaction State</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>optional opaque value that is persisted for the lifetime of the recovery transaction</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td>2048</td>
      <td> </td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>type of selected factor for the recovery transaction</td>
      <td><code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>recoveryType</td>
      <td>type of recovery operation</td>
      <td><code class="highlighter-rouge">PASSWORD</code> or <code class="highlighter-rouge">UNLOCK</code></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>factorResult</td>
      <td>optional status of last verification attempt for the <code class="highlighter-rouge">factorType</code></td>
      <td><a href="#factor-result">Factor Result</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>_embedded</td>
      <td><a href="#embedded-resources">embedded resources</a> for the current <code class="highlighter-rouge">status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>_links</td>
      <td><a href="#links-object">link relations</a> for the current <code class="highlighter-rouge">status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>The <code class="highlighter-rouge">relayState</code> paramater is an opaque value for the transaction and processed as untrusted data which is just echoed in a response.  It is the client’s responsibility to escape/encode this value before displaying in a UI such as a HTML document using <a href="https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet">best-practices</a></p>
</blockquote>

<h3 id="transaction-state">Transaction State</h3>

<p><img src="/assets/img/auth-state-model.png" alt="State Model Diagram" title="State Model Diagram" /></p>

<p>An authentication or recovery transaction has one of the following states:</p>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Description</th>
      <th>Next Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">PASSWORD_WARN</code></td>
      <td>The user’s password was successfully validated but is about to expire and should be changed.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#change-password">change the user’s password</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PASSWORD_EXPIRED</code></td>
      <td>The user’s password was successfully validated but is expired.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#change-password">change the user’s expired password</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">RECOVERY</code></td>
      <td>The user has requested a recovery token to reset their password or unlock their account.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#answer-recovery-question">answer the user’s recovery question</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">RECOVERY_CHALLENGE</code></td>
      <td>The user must verify the factor-specific recovery challenge.</td>
      <td>POST to the <code class="highlighter-rouge">verify</code> link relation to <a href="#verify-recovery-factor">verify the recovery factor</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PASSWORD_RESET</code></td>
      <td>The user successfully answered their recovery question and must to set a new password.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#reset-password">reset the user’s password</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">LOCKED_OUT</code></td>
      <td>The user account is locked; self-service unlock or admin unlock is required.</td>
      <td>POST to the <code class="highlighter-rouge">unlock</code> link relation to perform a <a href="#unlock-account">self-service unlock</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MFA_ENROLL</code></td>
      <td>The user must select and enroll an available factor for additional verification.</td>
      <td>POST to the <code class="highlighter-rouge">enroll</code> link relation for a specific factor to <a href="#enroll-factor">enroll the factor</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MFA_ENROLL_ACTIVATE</code></td>
      <td>The user must activate the factor to complete enrollment.</td>
      <td>POST to the <code class="highlighter-rouge">next</code> link relation to <a href="#activate-factor">activate the factor</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MFA_REQUIRED</code></td>
      <td>The user must provide additional verification with a previously enrolled factor.</td>
      <td>POST to the <code class="highlighter-rouge">verify</code> link relation for a specific factor to <a href="#verify-factor">provide additional verification</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MFA_CHALLENGE</code></td>
      <td>The user must verify the factor-specific challenge.</td>
      <td>POST to the <code class="highlighter-rouge">verify</code> link relation to <a href="#verify-factor">verify the factor</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">SUCCESS</code></td>
      <td>The transaction has completed successfully</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>You advance the authentication or recovery transaction to the next state by posting a request with a valid <a href="#state-token">state token</a> to the the <code class="highlighter-rouge">next</code> link relation published in the <a href="#links-object">JSON HAL links object</a> for the response.</p>

<p><a href="#enroll-factor">Enrolling a factor</a> and <a href="#verify-factor">verifying a factor</a> do not have <code class="highlighter-rouge">next</code> link relationships as the end-user must make a selection of which factor to enroll or verify.</p>

<blockquote>
  <p>You should never assume a specific state transition or URL when navigating the <a href="#transaction-state">state model</a>.  Always inspect the response for <code class="highlighter-rouge">status</code> and dynamically follow the <a href="#links-object">published link relations</a>.</p>
</blockquote>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/ostf2xjtDKWFPZIKYDZV/lifecycle/activate"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/previous"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"skip"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/skip"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cancel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/cancel"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="tokens">Tokens</h3>

<p>Authentication API operations will return different token types depending on the <a href="#transaction-state">state</a> of the authentication or recovery transaction.</p>

<h4 id="state-token">State Token</h4>

<p>Ephemeral token that encodes the current state of an authentication or recovery transaction.</p>

<ul>
  <li>The <code class="highlighter-rouge">stateToken</code> must be passed with every request except when verifying a <code class="highlighter-rouge">recoveryToken</code> that was distributed out-of-band</li>
  <li>The <code class="highlighter-rouge">stateToken</code> is only intended to be used between the web application performing end-user authentication and the Okta API. It should never distributed to the end-user via email or other out-of-band mechanism.</li>
  <li>The lifetime of the <code class="highlighter-rouge">stateToken</code> uses a sliding scale expiration algorithm that extends with every request.  Always introspect the <code class="highlighter-rouge">expiresAt</code> property for the transaction when making decisions based on lifetime.</li>
</ul>

<blockquote>
  <p>All Authentication API operations will return <code class="highlighter-rouge">401 Unauthorized</code> status code when you attempt to use an expired state token.</p>
</blockquote>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">401</span> <span class="ne">Unauthorized</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000011"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid token provided"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000011"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaeY-4G_TBUTBSZAn9n7oZCfw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<blockquote>
  <p>State transitions are strictly enforced for state tokens.  You will receive a <code class="highlighter-rouge">403 Forbidden</code> status code if you call an Authentication API operation with a <code class="highlighter-rouge">stateToken</code> with an invalid <a href="#transaction-state">state</a>.</p>
</blockquote>

<div class="language-http highlighter-rouge"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">403</span> <span class="ne">Forbidden</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000079"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This operation is not allowed in the current authentication state."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E0000079"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oaen9Ly_ivHQJ-STb8KiADh9w"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"errorCauses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"errorSummary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This operation is not allowed in the current authentication state."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="recovery-token">Recovery Token</h4>

<p>One-time token issued as <code class="highlighter-rouge">recoveryToken</code> response parameter when a recovery transaction transitions to the <code class="highlighter-rouge">RECOVERY</code> status.</p>

<ul>
  <li>The token can be exchanged for a <code class="highlighter-rouge">stateToken</code> to recover a user’s password or unlock their account.</li>
  <li>Unlike the <code class="highlighter-rouge">statusToken</code> the <code class="highlighter-rouge">recoveryToken</code> should be distributed out-of-band to a user such as via email.</li>
  <li>The lifetime of the <code class="highlighter-rouge">recoveryToken</code> is managed by the organization’s security policy.</li>
</ul>

<p>The <code class="highlighter-rouge">recoveryToken</code> is sent via an out-of-band channel to the end-user’s verified email address or SMS phone number and acts as primary authentication for the recovery transaction.</p>

<blockquote>
  <p>Directly obtaining a <code class="highlighter-rouge">recoveryToken</code> is a highly privileged operation and should be restricted to trusted web applications.  Anyone that obtains a <code class="highlighter-rouge">recoveryToken</code> for a user and knows the answer to a user’s recovery question can reset their password or unlock their account.</p>
</blockquote>

<h4 id="session-token">Session Token</h4>

<p>One-time token issued as <code class="highlighter-rouge">sessionToken</code> response parameter when an authentication transaction completes with the <code class="highlighter-rouge">SUCCESS</code> status.</p>

<ul>
  <li>The token can be exchanged for a session with the <a href="sessions.html#create-session-with-session-token">Session API</a> or converted to a <a href="/docs/examples/session_cookie.html">session cookie</a>.</li>
  <li>The lifetime of the <code class="highlighter-rouge">sessionToken</code> is the same as the lifetime of a user’s session and managed by the organization’s security policy.</li>
</ul>

<h3 id="factor-result">Factor Result</h3>

<p>The <code class="highlighter-rouge">MFA_CHALLENGE</code> or <code class="highlighter-rouge">RECOVERY_CHALLENGE</code> state can return an additional property <strong>factorResult</strong> that provides additional context for the last factor verification attempt.</p>

<p>The following table shows the possible values for this property:</p>

<table>
  <thead>
    <tr>
      <th>factorResult</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">WAITING</code></td>
      <td>Factor verification has started but not yet completed (e.g user hasn’t answered phone call yet)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CANCELLED</code></td>
      <td>Factor verification was canceled by user</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TIMEOUT</code></td>
      <td>Unable to verify factor within the allowed time window</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TIME_WINDOW_EXCEEDED</code></td>
      <td>Factor was successfully verified but outside of the computed time window.  Another verification is required in current time window.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">PASSCODE_REPLAYED</code></td>
      <td>Factor was previously verified within the same time window.  User must wait another time window and retry with a new verification.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ERROR</code></td>
      <td>Unexpected server error occurred verifying factor.</td>
    </tr>
  </tbody>
</table>

<h3 id="links-object">Links Object</h3>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the current <a href="#transaction-state">transaction state</a> using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  These links are used to transition the <a href="#transaction-state">state machine</a> of the authentication or recovery transaction.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>next</td>
      <td>Transitions the  <a href="#transaction-state">state machine</a> to the next state.  <strong>Note: The <code class="highlighter-rouge">name</code> of the link relationship will provide a hint of the next operation required</strong></td>
    </tr>
    <tr>
      <td>prev</td>
      <td>Transitions the  <a href="#transaction-state">state machine</a> to the previous state.</td>
    </tr>
    <tr>
      <td>cancel</td>
      <td>Cancels the current  transaction and revokes the <a href="#state-token">state token</a>.</td>
    </tr>
    <tr>
      <td>skip</td>
      <td>Skips over the current  transaction state to the next valid <a href="#transaction-state">state</a></td>
    </tr>
    <tr>
      <td>resend</td>
      <td>Resends a challenge or OTP to a device</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>The Links Object is <strong>read-only</strong></p>
</blockquote>

<h2 id="embedded-resources">Embedded Resources</h2>

<h3 id="user-object">User Object</h3>

<p>A subset of <a href="users.html#user-model">user properties</a> published in an authentication or recovery transaction after the user successfully completes primary authentication.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>unique key for user</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>passwordChanged</td>
      <td>timestamp when user’s password last changed</td>
      <td>Date</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>profile</td>
      <td>user’s profile</td>
      <td><a href="#user-profile-object">User Profile Object</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>recovery_question</td>
      <td>user’s recovery question</td>
      <td><a href="#recovery-question-object">Recovery Question Object</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00udnlQDVLVRIVXESCMZ"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"passwordChanged"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-08T20:14:45.000Z"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"firstName"</span><span class="p">:</span><span class="s2">"Dade"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Murphy"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en_US"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="nt">"recovery_question"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who's a major player in the cowboy scene?"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="user-profile-object">User Profile Object</h4>

<p>Subset of <a href="users.html#profile-object">profile properties</a> for a user</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>login</td>
      <td>unique login for user</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>firstName</td>
      <td>first name of user</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>lastName</td>
      <td>last name of user</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>locale</td>
      <td>user’s default location for purposes of localizing items such as currency, date time format, numerical representations, etc.</td>
      <td>String</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td><a href="https://tools.ietf.org/html/rfc5646">RFC 5646</a></td>
    </tr>
    <tr>
      <td>timeZone</td>
      <td>user’s time zone</td>
      <td>String</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td><a href="https://tools.ietf.org/html/rfc6557">IANA Time Zone database format</a></td>
    </tr>
  </tbody>
</table>

<h4 id="recovery-question-object">Recovery Question Object</h4>

<p>User’s recovery question used for verification of a recovery transaction</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>question</td>
      <td>user’s recovery question</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="password-policy-object">Password Policy Object</h3>

<p>A subset of policy settings for the user’s assigned password policy published during <code class="highlighter-rouge">PASSWORD_WARN</code>, <code class="highlighter-rouge">PASSWORD_EXPIRED</code>, or <code class="highlighter-rouge">PASSWORD_RESET</code> states</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>expiration</td>
      <td>password expiration settings</td>
      <td><a href="#password-expiration-object">Password Expiration Object</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>complexity</td>
      <td>password complexity settings</td>
      <td><a href="#password-complexity-object">Password Complexity Object</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"expiration"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"passwordExpireDays"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"complexity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minLowerCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minUpperCase"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minSymbol"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"excludeUsername"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
    </span><span class="p">},</span><span class="w">
   </span><span class="nt">"age"</span><span class="p">:{</span><span class="w">
     </span><span class="nt">"minAgeMinutes"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
     </span><span class="nt">"historyCount"</span><span class="p">:</span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="password-expiration-object">Password Expiration Object</h4>

<p>Specifies the password age requirements of the assigned password policy</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>passwordExpireDays</td>
      <td>number of days before password is expired</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="password-complexity-object">Password Complexity Object</h4>

<p>Specifies the password complexity requirements of the assigned password policy</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>minLength</td>
      <td>minimum number of characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>minLowerCase</td>
      <td>minimum number of lower case characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>minUpperCase</td>
      <td>minimum number of upper case characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>minNumber</td>
      <td>minimum number of numeric characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>minSymbol</td>
      <td>minimum number of symbol characters for password</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>excludeUsername</td>
      <td>Prevents username or domain from appearing in the password</td>
      <td>boolean</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Duplicate the minimum Active Directory requirements in these settings for AD-mastered users. No enforcement is triggered by Okta settings for AD-mastered users.</p>
</blockquote>

<h4 id="password-age-object">Password Age Object</h4>

<p>Specifies the password requirements related to password age and history</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>minAgeMinutes</td>
      <td>minimum number of minutes required since the last password change</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>historyCount</td>
      <td>Number of previous passwords that the current password can’t match</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="factor-object">Factor Object</h3>

<p>A subset of <a href="factors.html#factor-model">factor properties</a> published in an authentication transaction during <code class="highlighter-rouge">MFA_ENROLL</code>, <code class="highlighter-rouge">MFA_REQUIRED</code>, or <code class="highlighter-rouge">MFA_CHALLENGE</code> states</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>unique key for factor</td>
      <td>String</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>type of factor</td>
      <td><a href="factors.html#factor-type">Factor Type</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>provider</td>
      <td>factor provider</td>
      <td><a href="factors.html#provider-type">Provider Type</a></td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of a <a href="factors.html#supported-factors-for-providers">supported factor</a></td>
      <td><a href="factors.html#factor-profile-object">Factor Profile Object</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>_embedded</td>
      <td><a href="#factor-embedded-resources">embedded resources</a> related to the factor</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>_links</td>
      <td><a href="#factor-links-object">discoverable resources</a> for the factor</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ostfm3hPNYSOIOIVTQWY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"factorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token:software:totp"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"credentialId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dade.murphy@example.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"verify"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="factor-embedded-resources">Factor Embedded Resources</h4>

<h5 id="totp-factor-activation-object">TOTP Factor Activation Object</h5>

<p>TOTP factors when activated have an embedded verification object which describes the <a href="http://tools.ietf.org/html/rfc6238">TOTP</a> algorithm parameters.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>timeStep</td>
      <td>time-step size for TOTP</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>sharedSecret</td>
      <td>unique secret key for prover</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>encoding</td>
      <td>encoding of <code class="highlighter-rouge">sharedSecret</code></td>
      <td><code class="highlighter-rouge">base32</code> or <code class="highlighter-rouge">base64</code></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>keyLength</td>
      <td>number of digits in an TOTP value</td>
      <td>Number</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>_links</td>
      <td>discoverable resources related to the activation</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"timeStep"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sharedSecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HE64TMLL2IUZW2ZLB"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base32"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"keyLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="totp-activation-links-object">TOTP Activation Links Object</h6>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the TOTP activation object using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  This object is used for dynamic discovery of related resources and operations.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>qrcode</td>
      <td>QR code that encodes the TOTP parameters that can be used for enrollment</td>
    </tr>
  </tbody>
</table>

<h5 id="phone-object">Phone Object</h5>

<p>The phone object describes previously enrolled phone numbers for the <code class="highlighter-rouge">sms</code> factor.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>unique key for phone</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of phone</td>
      <td><a href="#phone-profile-object">Phone Profile Object</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>status</td>
      <td>status of phone</td>
      <td><code class="highlighter-rouge">ACTIVE</code> or <code class="highlighter-rouge">INACTIVE</code></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mbl198rKSEWOSKRIVIFT"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+1 XXX-XXX-1337"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="phone-profile-object">Phone Profile Object</h6>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>phoneNumber</td>
      <td>masked phone number</td>
      <td>String</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 id="phone-object-1">Phone Object</h5>

<p>The phone object describes previously enrolled phone numbers for the <code class="highlighter-rouge">sms</code> factor.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>unique key for phone</td>
      <td>String</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of phone</td>
      <td><a href="#phone-profile-object">Phone Profile Object</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>status</td>
      <td>status of phone</td>
      <td><code class="highlighter-rouge">ACTIVE</code> or <code class="highlighter-rouge">INACTIVE</code></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 id="push-factor-activation-object">Push Factor Activation Object</h5>

<p>Push factors must complete activation on the device by scanning the QR code or visiting activation link sent via email or sms.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>DataType</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Validation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>expiresAt</td>
      <td>lifetime of activation</td>
      <td>Date</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>_links</td>
      <td>discoverable resources related to the activation</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"activation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T07:44:22.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"send"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00u15s1KDETTQMQYABRL/factors/opfbtzzrjgwauUsxO0g4/lifecycle/activate/email"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00u15s1KDETTQMQYABRL/factors/opfbtzzrjgwauUsxO0g4/lifecycle/activate/sms"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"allow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"qrcode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-domain.okta.com/api/v1/users/00u15s1KDETTQMQYABRL/factors/opfbtzzrjgwauUsxO0g4/qr/00Ji8qVBNJD4LmjYy1WZO2VbNqvvPdaCVua-1qjypa"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="push-factor-activation-links-object">Push Factor Activation Links Object</h6>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the push factor activation object using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  This object is used for dynamic discovery of related resources and operations.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>qrcode</td>
      <td>QR code that encodes the push activation code needed for enrollment on the device</td>
    </tr>
    <tr>
      <td>send</td>
      <td>Sends an activation link via <code class="highlighter-rouge">email</code> or <code class="highlighter-rouge">sms</code> for users who can’t scan the QR code</td>
    </tr>
  </tbody>
</table>

<h5 id="factor-links-object">Factor Links Object</h5>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the factor using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  This object is used for dynamic discovery of related resources and operations.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>enroll</td>
      <td><a href="#enroll-factor">Enrolls a factor</a></td>
    </tr>
    <tr>
      <td>verify</td>
      <td><a href="#verify-factor">Verifies a factor</a></td>
    </tr>
    <tr>
      <td>questions</td>
      <td>Lists all possible questions for the <code class="highlighter-rouge">question</code> factor type</td>
    </tr>
    <tr>
      <td>resend</td>
      <td>Resends a challenge or OTP to a device</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>The Links Object is <strong>read-only</strong></p>
</blockquote>

      </div>
      <div class="TableOfContents TableOfContentsPreload">
        <div class="TableOfContents-item is-level1">
          <script>
                  document.write(document.title.split('|')[0].trim());
          </script>
        </div>
        <div class="TableOfContentsLoader"></div>
      </div><!-- END Page Content -->
    </section><!-- END Page Center w/Sub Nav & Content -->

    <!-- START Footer -->
    <footer class="footer">
      <div class="Wrap">
        <ul>
          <li>
            <a href="http://www.okta.com" target="_blank">Okta.com</a>
          </li>
          <li>
            <a href="/blog">Blog</a>
          </li>
          <li>
            <a href="/docs/platform-release-notes/platform-release-notes.html">Platform Release Notes</a>
          </li>
          <li>
            <a href="/terms/">Terms & Conditions</a>
          </li>
          <li>
            <a href="/3rd_party_notices/">3rd Party Notices</a>
          </li>
          <li>
            <a href="/privacy/">Privacy Policy</a>
          </li>
          <li>
            <a href="http://okta.com/developer/contact/">Contact Sales</a>
          </li>
          <li>
            <a href="mailto:developers@okta.com">Contact Support</a>
          </li>
        </ul>
        <ul>
          <li>
            <a class="icon" href="http://github.com/oktadeveloper" target="_blank"><i class="fa fa-github"></i></a>
          </li>
          <li>
            <a class="icon" href="http://twitter.com/okta" target="_blank"><i class="fa fa-twitter"></i></a>
          </li>
          <li>
            <a class="icon" href="http://stackoverflow.com/search?q=okta" target="_blank"><i class="fa fa-stack-overflow"></i></a>
          </li>
          <li>
            <a class="icon" href="http://feeds.feedburner.com/OktaBlog" target="_blank"><i class="fa fa-rss"></i></a>
          </li><!-- <li><a class="icon" href="http://community.okta.com" target="_blank"><i class="fa fa-comments"></i></a></li> -->
        </ul>
      </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous">
    </script>
    <script type="text/javascript" defer="defer" src="/assets/js/docs.js">
    </script>
    <script src="/assets/js/master.js">
    </script> <!-- Remarketing tag -->
    <script type="text/javascript">
        /* <![CDATA[ */
        var google_conversion_id = 1006913831;
        var google_custom_params = window.google_tag_params;
        var google_remarketing_only = true;
        /* ]]> */
    </script>
    <div style="display:none;">
      <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
      </script>
    </div><noscript>
    <div style="display:inline;"><img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"></div></noscript> <!-- End Remarketing tag -->
     <!-- Crazy Egg Tracking -->
    <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
    </script> <!-- End Crazy Egg Tracking -->

     <!-- END Footer -->
  </div>
</body>
</html>
