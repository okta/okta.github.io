<!doctype html>
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]-->
<head>
	
	<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="/favicon.ico">
	<title>Authentication | Okta Developer</title>
	<meta name="description" content="Secure, scalable, and highly available authentication and user management for any app.">

	<link rel="canonical" href="http://developer.okta.com/docs/api/resources/authn.html">

	<link rel="stylesheet" href="/assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/assets/css/animate.css">
	<link rel="stylesheet" href="/assets/css/master.css">
	<link rel="stylesheet" href="/assets/css/layout-docs.css">
	<link rel="stylesheet" href="/assets/css/responsive.css">


  
	<script type="text/javascript" defer="defer" src="/assets/js/jquery.min.js"></script>
	<script type="text/javascript" defer="defer" src="/assets/js/tabber.js"></script>
	<script type="text/javascript" defer="defer" src="/assets/js/pacnav.js"></script>
	<script type="text/javascript" defer="defer" src="/assets/js/master.js"></script>
	<script type="text/javascript" defer="defer" src="/assets/js/scrollspy.js"></script>

	<script type="text/javascript" defer="defer" src="/assets/js/docs.js"></script>
	<!-- TypeKit -->
	<script src="//use.typekit.net/pls8pog.js"></script>
	<script>try{Typekit.load();}catch(e){}</script>
	<!-- GA -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-15777010-3', 'auto');
		ga('send', 'pageview');
	</script>
</head>

	
<body>
	
	<header class="site-header">
	<div class="wrap">

		<h1 class="site-title"><a href="/">Okta Developer</a></h1>

		<nav id="primary-nav" class="site-nav loaded">
			<ul>
				<li><a href="/product/">Product</a></li>
				<li><a href="/pricing/">Pricing</a></li>
				<li><a href="/customers/">Customers</a></li>
				<li><a href="/docs/guides/overview.html">Docs</a></li>
				<li><a href="/discussion/">Discussion</a></li>
				<li class="has-dropdown"><a href="#">Support</a>
					<div class="dropdown-window">
						<p class="stack-overflow">
							Post your question on <a href="http://stackoverflow.com/search?q=okta" target="_blank">Stack Overflow</a>.<br />
							We'll answer it within 24 hours.
						</p>
						<p class="email">
							Email us:<br />
							<a href="mailto:developers@okta.com">developers@okta.com</a>
						</p>
						<p class="tel">
							Call us:<br />
							<a href="tel:18777227871">1 (877) 722-7871</a>
						</p>
					</div>
				</li>
			</ul>
		</nav>

		<a href="/search" class="gsc-trigger search-button"></a>


		<div class="search-container">
			<div class="gsc-container">
				<script defer="defer">
					(function() {
						var cx = '005121479574088032773:mmh_vhv8uns';
						var gcse = document.createElement('script');
						gcse.type = 'text/javascript';
						gcse.async = true;
						gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
						'//cse.google.com/cse.js?cx=' + cx;
						var s = document.getElementsByTagName('script')[0];
						s.parentNode.insertBefore(gcse, s);
					})();
				</script>
				<gcse:searchbox-only resultsUrl="/search" enableAutoComplete="true"></gcse:searchbox-only>
			</div>
		</div>
		<a href="https://www.okta.com/developer/signup/" class="cta-button button--small">Get Started</a>

	</div>
</header>

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-P6JKVN"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P6JKVN');</script>
<!-- End Google Tag Manager -->


	
	<div class="page-content">
		
		
			
		

<section class="section--with-sidebar docs-page">
	<aside id="sidebar-wrapper" class="sticky-nav--sidebar">

		






<div id="docs-sidebar-wrap" id="sidebar-wrapper">
	<div class="docs-sidebar-block" id="myScrollspy" >
		
			
				
		
			
				
				<h2>
					Getting Started
				</h2>

				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="design_principles" data-section="authn">
									<li data-name="Design Principles" >
										<a href="/docs/api/getting_started/design_principles.html">Design Principles</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="error_codes" data-section="authn">
									<li data-name="Error Codes" >
										<a href="/docs/api/getting_started/error_codes.html">Error Codes</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="getting_a_token" data-section="authn">
									<li data-name="Getting a Token" >
										<a href="/docs/api/getting_started/getting_a_token.html">Getting a Token</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="enabling_cors" data-section="authn">
									<li data-name="Enabling CORS" >
										<a href="/docs/api/getting_started/enabling_cors.html">Enabling CORS</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="api_test_client" data-section="authn">
									<li data-name="API Test Client" >
										<a href="/docs/api/getting_started/api_test_client.html">API Test Client</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="apps" data-section="authn">
									<li data-name="Apps" >
										<a href="/docs/api/resources/apps.html">Apps</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav nav-title">
									<li data-name="Authentication" >
										<a href="/docs/api/resources/authn.html">Authentication</a>
									</li>
								</ul>
									<div id="gen-toc-container"><div class="gen-toc" id="gen-toc"><div class="gen-toc-title hide"><h2><div id="gen-toctitle" class="caret2 hide">Authentication</div></h2></div><ul class="nav sidebar-nav"><li class="gen-toc_level-1 toc_section-1"><a href="#overview"><span class="gen-toctext">Overview</span></a></li><li class="gen-toc_level-1 toc_section-2"><a href="#authentication-model"><span class="gen-toctext">Authentication Model</span></a><ul class="closed"><li class="gen-toc_level-2 toc_section-3"><a href="#authentication-status"><span class="gen-toctext">Authentication Status</span></a></li><li class="gen-toc_level-2 toc_section-4"><a href="#tokens"><span class="gen-toctext">Tokens</span></a></li><li class="gen-toc_level-2 toc_section-5"><a href="#factor-result"><span class="gen-toctext">Factor Result</span></a></li><li class="gen-toc_level-2 toc_section-6"><a href="#links-object"><span class="gen-toctext">Links Object</span></a></li></ul></li><li class="gen-toc_level-1 toc_section-7"><a href="#embedded-resources"><span class="gen-toctext">Embedded Resources</span></a><ul class="closed"><li class="gen-toc_level-2 toc_section-8"><a href="#user-object"><span class="gen-toctext">User Object</span></a></li><li class="gen-toc_level-2 toc_section-9"><a href="#factor-object"><span class="gen-toctext">Factor Object</span></a></li></ul></li><li class="gen-toc_level-1 toc_section-10"><a href="#authentication-operations"><span class="gen-toctext">Authentication Operations</span></a><ul class="closed"><li class="gen-toc_level-2 toc_section-11"><a href="#primary-authentication"><span class="gen-toctext">Primary Authentication</span></a></li><li class="gen-toc_level-2 toc_section-12"><a href="#change-expired-password"><span class="gen-toctext">Change Expired Password</span></a></li><li class="gen-toc_level-2 toc_section-13"><a href="#enroll-factor"><span class="gen-toctext">Enroll Factor</span></a></li><li class="gen-toc_level-2 toc_section-14"><a href="#activate-factor"><span class="gen-toctext">Activate Factor</span></a></li><li class="gen-toc_level-2 toc_section-15"><a href="#verify-factor"><span class="gen-toctext">Verify Factor</span></a></li></ul></li><li class="gen-toc_level-1 toc_section-16"><a href="#recovery-operations"><span class="gen-toctext">Recovery Operations</span></a><ul class="closed"><li class="gen-toc_level-2 toc_section-17"><a href="#forgot-password"><span class="gen-toctext">Forgot Password</span></a></li><li class="gen-toc_level-2 toc_section-18"><a href="#unlock-account"><span class="gen-toctext">Unlock Account</span></a></li><li class="gen-toc_level-2 toc_section-19"><a href="#verify-recovery-token"><span class="gen-toctext">Verify Recovery Token</span></a></li><li class="gen-toc_level-2 toc_section-20"><a href="#answer-recovery-question"><span class="gen-toctext">Answer Recovery Question</span></a></li><li class="gen-toc_level-2 toc_section-21"><a href="#reset-password"><span class="gen-toctext">Reset Password</span></a></li></ul></li><li class="gen-toc_level-1 toc_section-22"><a href="#state-management-operations"><span class="gen-toctext">State Management Operations</span></a><ul class="closed"><li class="gen-toc_level-2 toc_section-23"><a href="#get-authentication-status-for-transaction"><span class="gen-toctext">Get Authentication Status for Transaction</span></a></li><li class="gen-toc_level-2 toc_section-24"><a href="#cancel-transaction"><span class="gen-toctext">Cancel Transaction</span></a></li></ul></li></ul></div></div>
								
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="events" data-section="authn">
									<li data-name="Events" >
										<a href="/docs/api/resources/events.html">Events</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="factors" data-section="authn">
									<li data-name="Factors (MFA)" >
										<a href="/docs/api/resources/factors.html">Factors (MFA)</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="groups" data-section="authn">
									<li data-name="Groups" >
										<a href="/docs/api/resources/groups.html">Groups</a>
									</li>
								</ul>
								
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="roles" data-section="authn">
									<li data-name="Roles Administration" >
										<a href="/docs/api/resources/roles.html">Roles Administration</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="sessions" data-section="authn">
									<li data-name="Sessions" >
										<a href="/docs/api/resources/sessions.html">Sessions</a>
									</li>
								</ul>
								
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
						
					
						
						
							
								
								<ul class="nav sidebar-nav" data-item="users" data-section="authn">
									<li data-name="Users" >
										<a href="/docs/api/resources/users.html">Users</a>
									</li>
								</ul>
								
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
				
			
		
			
				
		
			
				
		
	</ul>
</div>
</div>

	</aside>

	<div id="docs-body" class="body docs-body">

		<nav id="sticky-nav" class="sticky-nav--top no-flexbox">

			

	<a href="#" class="toggle-menu"></a>
	<a  href="/docs/guides/overview.html">
		Guides
	</a>
	<a  class="on"  href="/docs/api/getting_started/design_principles.html">
		API
	</a>
	<a  href="/docs/sdk/core/api.html">
		SDKs
	</a>
	<a  href="/docs/examples/session_cookie.html">
		Examples
	</a>

		</nav>

		<a href="#docs-body" id="scroll-top-button">Scroll to Top</a>

		
		<header>
			<a href="https://github.com/okta/okta.github.io/tree/master/_source/docs/api/resources/authn.md" target="_blank" class="btn btn-default btn-sm btn-github"><i class="fa fa-github"></i> Edit on GitHub</a>
			<h1 class="h3">Authentication</h1>
		</header>
		

		<ul class="list-unstyled toc" id="markdown-toc">
  <li><a href="#overview">Overview</a></li>
  <li><a href="#authentication-model">Authentication Model</a>    <ul>
      <li><a href="#authentication-status">Authentication Status</a></li>
      <li><a href="#tokens">Tokens</a></li>
      <li><a href="#factor-result">Factor Result</a></li>
      <li><a href="#links-object">Links Object</a></li>
    </ul>
  </li>
  <li><a href="#embedded-resources">Embedded Resources</a>    <ul>
      <li><a href="#user-object">User Object</a></li>
      <li><a href="#factor-object">Factor Object</a></li>
    </ul>
  </li>
  <li><a href="#authentication-operations">Authentication Operations</a>    <ul>
      <li><a href="#primary-authentication">Primary Authentication</a></li>
      <li><a href="#change-expired-password">Change Expired Password</a></li>
      <li><a href="#enroll-factor">Enroll Factor</a></li>
      <li><a href="#activate-factor">Activate Factor</a></li>
      <li><a href="#verify-factor">Verify Factor</a></li>
    </ul>
  </li>
  <li><a href="#recovery-operations">Recovery Operations</a>    <ul>
      <li><a href="#forgot-password">Forgot Password</a></li>
      <li><a href="#unlock-account">Unlock Account</a></li>
      <li><a href="#verify-recovery-token">Verify Recovery Token</a></li>
      <li><a href="#answer-recovery-question">Answer Recovery Question</a></li>
      <li><a href="#reset-password">Reset Password</a></li>
    </ul>
  </li>
  <li><a href="#state-management-operations">State Management Operations</a>    <ul>
      <li><a href="#get-authentication-status-for-transaction">Get Authentication Status for Transaction</a></li>
      <li><a href="#cancel-transaction">Cancel Transaction</a></li>
    </ul>
  </li>
</ul>

<h2 id="overview">Overview</h2>

<p>The Okta Authentication API provides operations to authenticate users, perform multi-factor enrollment and verification, recover forgotten passwords, and unlock accounts. It can be used as a standalone API to provide the identity layer on top of your existing application, or it can be integrated with the Okta <a href="sessions.html">Sessions API</a> to obtain an Okta <a href="#/docs/examples/session_cookie.html">session cookie</a> and access apps within Okta.  </p>

<p>The API is targeted for developers who want to build their own end-to-end login experience to replace the built-in Okta login experience and addresses the following key scenarios:</p>

<ul>
  <li>
    <p><strong>Primary authentication</strong> allows you to verify username and password credentials for a user.</p>
  </li>
  <li>
    <p><strong>Multifactor authentication</strong> (MFA) strengthens the security of password-based authentication by requiring additional verification of another factor such as a temporary one-time password or an SMS passcode. The Auth API supports user enrollment with MFA factors enabled by the administrator, as well as MFA challenges based on your Sign-On security policy.</p>
  </li>
  <li>
    <p><strong>Recovery</strong> allows users to securely reset their password if they’ve forgotten it, or unlock their account if it has been locked out due to excessive failed login attempts. This functionality is subject to the security policy set by the administrator.</p>
  </li>
</ul>

<blockquote>
  <p>This API is currently in <strong>Early Access (EA)</strong> status.</p>
</blockquote>

<h2 id="authentication-model">Authentication Model</h2>

<p>The Authentication API is a <em>stateful</em> API that implements a finite state machine with defined states and required transitions between those states.  State is transferred with a <code>stateToken</code> that is issued for each authentication or recovery transaction and must be passed with each request.  The Authentication API leverages the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a> format to publish <code>next</code> and <code>prev</code> links for the current transaction state which should be used to transition the state machine.  </p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>DataType</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td>ephemeral token that encodes the current state of an authentication or recovery transaction</td>
      <td>String</td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>expiresAt</td>
      <td>lifetime of the <code>stateToken</code>, <code>recoveryToken</code>, or <code>sessionToken</code> (See <a href="#tokens">Tokens</a>)</td>
      <td>Date</td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>status</td>
      <td>current state of the  transaction</td>
      <td><a href="#authentication-status">Authentication Status</a></td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the authentication or recovery transaction</td>
      <td>String</td>
      <td> </td>
      <td>2048</td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_embedded</td>
      <td><a href="#embedded-resources">embedded resources</a> for the current <code>status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_links</td>
      <td><a href="#links-object">link relations</a> for the current <code>status</code></td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h3 id="authentication-status">Authentication Status</h3>

<p><img src="/assets/img/auth-state-model.png" alt="Authentication State Model Diagram" title="Authentication State Model Diagram" /></p>

<p>An authentication or recovery transaction has one of the following statuses:</p>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Description</th>
      <th>Next Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PASSWORD_EXPIRED</td>
      <td>The user’s password was successfully validated but is expired.</td>
      <td>POST to the <code>next</code> link relation to <a href="#change-expired-password">change the user’s expired password</a>.</td>
    </tr>
    <tr>
      <td>RECOVERY</td>
      <td>The user has requested a recovery token to reset their password or unlock their account.</td>
      <td>POST to the <code>next</code> link relation to <a href="#answer-recovery-question">answer the user’s recovery question</a>.</td>
    </tr>
    <tr>
      <td>PASSWORD_RESET</td>
      <td>The user successfully answered their recovery question and must to set a new password.</td>
      <td>POST to the <code>next</code> link relation to <a href="#reset-password">reset the user’s password</a>.</td>
    </tr>
    <tr>
      <td>LOCKED_OUT</td>
      <td>The user account is locked; self-service unlock or admin unlock is required.</td>
      <td>POST to the <code>unlock</code> link relation to perform a <a href="#unlock-account">self-service unlock</a>.</td>
    </tr>
    <tr>
      <td>MFA_ENROLL</td>
      <td>The user must select and enroll an available factor for additional verification.</td>
      <td>POST to the <code>enroll</code> link relation for a specific factor to <a href="#enroll-factor">enroll the factor</a>.</td>
    </tr>
    <tr>
      <td>MFA_ENROLL_ACTIVATE</td>
      <td>The user must activate the factor to complete enrollment.</td>
      <td>POST to the <code>next</code> link relation to <a href="#activate-factor">activate the factor</a>.</td>
    </tr>
    <tr>
      <td>MFA_REQUIRED</td>
      <td>The user must provide additional verification with a previously enrolled factor.</td>
      <td>POST to the <code>verify</code> link relation for a specific factor to <a href="#verify-factor">provide additional verification</a>.</td>
    </tr>
    <tr>
      <td>MFA_CHALLENGE</td>
      <td>The user must verify the factor-specific challenge.</td>
      <td>POST to the <code>verify</code> link relation to <a href="#verify-factor">verify the factor</a>.</td>
    </tr>
    <tr>
      <td>SUCCESS</td>
      <td>The transaction has completed successfully</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>You can advance the authentication or recovery transaction to the next status by posting a <strong>status-specific</strong> request to the the <code>next</code> link relation published in the <a href="#links-object">JSON HAL links object</a> for the response.  <a href="#enroll-factor">Enrolling a factor</a> and <a href="#verify-factor">verifying a factor</a> do not have <code>next</code> link relationships as the end-user must make a selection of which factor to enroll or verify.</p>

<blockquote>
  <p>You should never assume a specific state transition or URL when navigating the <a href="#authentication-status">state model</a>.  Always inspect the response for <code>status</code> and dynamically follow the <a href="#links-object">published link relations</a>.</p>
</blockquote>

<pre><code class="language-json">{
  "_links": {
    "next": {
      "name": "activate",
      "href": "https://your-domain.okta.com/api/v1/authn/factors/ostf2xjtDKWFPZIKYDZV/lifecycle/activate",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "prev": {
      "href": "https://your-domain.okta.com/api/v1/authn/previous",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h3 id="tokens">Tokens</h3>

<p>Authentication API operations will return different token types depending on the <a href="#authentication-status">status</a> of the authentication or recovery transaction.</p>

<h4 id="state-token">State Token</h4>

<p>Ephemeral token that encodes the current state of an authentication or recovery transaction.</p>

<ul>
  <li>The <code>stateToken</code> must be passed with every request except when verifying a <code>recoveryToken</code> that was distributed out-of-band</li>
  <li>The <code>stateToken</code> is only intended to be used between the web application performing end-user authentication and the Okta API. It should never distributed to the end-user via email or other out-of-band mechanism.</li>
  <li>The lifetime of the <code>stateToken</code> is currently fixed and not customizable.</li>
</ul>

<blockquote>
  <p>All Authentication API operations will return <code>401 Unauthorized</code> status code when you attempt to use an expired state token.</p>
</blockquote>

<pre><code class="language-http">HTTP/1.1 401 Unauthorized
Content-Type: application/json

{
    "errorCode": "E0000011",
    "errorSummary": "Invalid token provided",
    "errorLink": "E0000011",
    "errorId": "oaeY-4G_TBUTBSZAn9n7oZCfw",
    "errorCauses": []
}
</code></pre>

<blockquote>
  <p>State transitions are strictly enforced for state tokens.  You will receive a <code>403 Forbidden</code> status code if you attempt to use a state token for given <a href="#authentication-status">status</a> with invalid Authentication API operation for the status.</p>
</blockquote>

<pre><code class="language-http">HTTP/1.1 403 Forbidden
Content-Type: application/json

{
  "errorCode": "E0000079",
  "errorSummary": "This operation is not allowed in the current authentication state.",
  "errorLink": "E0000079",
  "errorId": "oaen9Ly_ivHQJ-STb8KiADh9w",
  "errorCauses": [
    {
      "errorSummary": "This operation is not allowed in the current authentication state."
    }
  ]
}
</code></pre>

<h4 id="recovery-token">Recovery Token</h4>

<p>One-time token issued as <code>recoveryToken</code> response parameter when a recovery transaction transitions to the <code>RECOVERY</code> status.</p>

<ul>
  <li>The token can be exchanged for a <code>stateToken</code> to recover a user’s password or unlock their account.</li>
  <li>Unlike the <code>statusToken</code> the <code>recoveryToken</code> should be distributed out-of-band to a user such as via email.</li>
  <li>The lifetime of the <code>recoveryToken</code> is managed by the organization’s security policy.</li>
</ul>

<blockquote>
  <p>The <code>recoveryToken</code> is usually sent directly to the end-user via email or SMS.  Obtaining a <code>recoveryToken</code> is a highly privileged operation and should be restricted to trusted web applications.  Anyone that obtains a <code>recoveryToken</code> for a user and knows the answer to a user’s recovery question can reset their password or unlock their account.</p>
</blockquote>

<h4 id="session-token">Session Token</h4>

<p>One-time token issued as <code>sessionToken</code> response parameter when an authentication transaction completes with the <code>SUCCESS</code> status.</p>

<ul>
  <li>The token can be exchanged for a session with the <a href="sessions.html#create-session">Session API</a> or converted to a <a href="/docs/examples/session_cookie.html">session cookie</a>.</li>
  <li>The lifetime of the <code>sessionToken</code> is the same as the lifetime of a user’s session and managed by the organization’s security policy.</li>
</ul>

<h3 id="factor-result">Factor Result</h3>

<p>The <code>MFA_CHALLENGE</code> state can return an additional attribute <strong>factorResult</strong> that provides additional context for the last factor verification attempt. The following table shows the possible values for this attribute.</p>

<table>
  <thead>
    <tr>
      <th>factorResult</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>WAITING</code></td>
      <td>Factor verification has started but not yet completed (e.g user hasn’t answered phone call yet)</td>
    </tr>
    <tr>
      <td><code>CANCELLED</code></td>
      <td>Factor verification was canceled by user</td>
    </tr>
    <tr>
      <td><code>TIMEOUT</code></td>
      <td>Unable to verify factor within the allowed time window</td>
    </tr>
    <tr>
      <td><code>TIME_WINDOW_EXCEEDED</code></td>
      <td>Factor was successfully verified but outside of the computed time window.  Another verification is required in current time window.</td>
    </tr>
    <tr>
      <td><code>PASSCODE_REPLAYED</code></td>
      <td>Factor was previously verified within the same time window.  User must wait another time window and retry with a new verification.</td>
    </tr>
    <tr>
      <td><code>ERROR</code></td>
      <td>Unexpected server error occurred verifying factor.</td>
    </tr>
  </tbody>
</table>

<h3 id="links-object">Links Object</h3>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the current authentication status using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  These links are used to transition the <a href="#authentication-status">authentication status</a> of the <a href="#state-token">state token</a>.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>next</td>
      <td>Transitions the authentication state machine to the next state.  <strong>Note: The <code>name</code> of the link relationship will provide a hint of the next operation required</strong></td>
    </tr>
    <tr>
      <td>prev</td>
      <td>Transitions the authentication state machine to the previous state.</td>
    </tr>
    <tr>
      <td>cancel</td>
      <td>Cancels the current authentication transaction and revokes the <a href="#state-token">state token</a>.</td>
    </tr>
    <tr>
      <td>resend</td>
      <td>Resends a challenge or OTP to a device</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>The Links Object is <strong>read-only</strong></p>
</blockquote>

<h2 id="embedded-resources">Embedded Resources</h2>

<h3 id="user-object">User Object</h3>

<p>A subset of attributes of a <a href="users.html#user-model">User</a> is available after successful primary authentication or during recovery.</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>DataType</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>unique key for user</td>
      <td>String</td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>profile</td>
      <td>user’s profile</td>
      <td><a href="#user-profile-object">User Profile Object</a></td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>recovery_question</td>
      <td>user’s recovery question</td>
      <td><a href="#recovery-question-object">Recovery Question Object</a></td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<pre><code class="language-json">{
 "id": "00udnlQDVLVRIVXESCMZ",
 "profile": {
      "username": "isaac@example.org",
      "firstName":"Isaac",
      "lastName": "Brock",
      "locale": "en_US",
      "timeZone": "America/Los_Angeles"
 },
 "recovery_question": {
    "question": "Who's a major player in the cowboy scene?"
  }
}
</code></pre>

<h4 id="user-profile-object">User Profile Object</h4>

<p>Subset of <a href="users.html#profile-object">profile attributes</a> for a user</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>DataType</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>unique username for user</td>
      <td>String</td>
      <td>5</td>
      <td>100</td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>firstName</td>
      <td>first name of user</td>
      <td>String</td>
      <td>1</td>
      <td>50</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>lastName</td>
      <td>last name of user</td>
      <td>String</td>
      <td>1</td>
      <td>50</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>locale</td>
      <td>user’s preferred display formatting for localizing items such as currency, date time format, numerical representations, etc</td>
      <td>ISO 639-1 two letter language code, an underscore, and the ISO 3166-1 two letter country code (en_US)</td>
      <td>5</td>
      <td>5</td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>timeZone</td>
      <td>user’s time zone in the “<a href="https://en.wikipedia.org/wiki/Tz_database">Olson</a>” timezone database format</td>
      <td>“Area/Location” of “Olson” timezone</td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h4 id="recovery-question-object">Recovery Question Object</h4>

<p>User’s recovery question used for verification of a recovery transaction</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>DataType</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>question</td>
      <td>user’s recovery question</td>
      <td>String</td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h3 id="factor-object">Factor Object</h3>

<p>A subset of attributes of a supported <a href="factors.html#factor-model">Factor</a></p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>DataType</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>unique key for factor</td>
      <td>String</td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>type of factor</td>
      <td><a href="factors.html#factor-type">Factor Type</a></td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>provider</td>
      <td>factor provider</td>
      <td><a href="factors.html#provider-type">Provider Type</a></td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of a <a href="factors.html#supported-factors">supported factor</a></td>
      <td><a href="factors.html#factor-profile-object">Factor Profile Object</a></td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_embedded</td>
      <td><a href="#factor-embedded-resources">embedded resources</a> related to the factor</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_links</td>
      <td><a href="#factor-links-object">discoverable resources</a> for the factor</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<pre><code class="language-json">{
  "id": "ostfm3hPNYSOIOIVTQWY",
  "factorType": "token:software:totp",
  "provider": "OKTA",
  "profile": {
      "credentialId": "isaac@example.org"
  },
  "_links": {
      "verify": {
          "href": "https://your-domain.okta.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify",
          "hints": {
              "allow": [
                  "POST"
              ]
          }
      }
  }
}
</code></pre>

<h4 id="factor-embedded-resources">Factor Embedded Resources</h4>

<h5 id="totp-factor-activation-object">TOTP Factor Activation Object</h5>

<p>TOTP factors when activated have an embedded verification object which describes the <a href="http://tools.ietf.org/html/rfc6238">TOTP</a> algorithm parameters.</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>DataType</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>timeStep</td>
      <td>time-step size for TOTP</td>
      <td>String</td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>sharedSecret</td>
      <td>unique secret key for prover</td>
      <td>String</td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>encoding</td>
      <td>encoding of <code>sharedSecret</code></td>
      <td><code>base32</code> or <code>base64</code></td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>keyLength</td>
      <td>number of digits in an HOTP value</td>
      <td>Number</td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>_links</td>
      <td>discoverable resources related to the activation</td>
      <td><a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON HAL</a></td>
      <td> </td>
      <td> </td>
      <td>TRUE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<pre><code class="language-json"> "activation": {
    "timeStep": 30,
    "sharedSecret": "HE64TMLL2IUZW2ZLB",
    "encoding": "base32",
    "keyLength": 6
} 
</code></pre>

<h6 id="totp-activation-links-object">TOTP Activation Links Object</h6>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the TOTP activation object using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  This object is used for dynamic discovery of related resources and operations.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>qrcode</td>
      <td>QR code that encodes the TOTP parameters that can be used for enrollment</td>
    </tr>
  </tbody>
</table>

<h5 id="phone-object">Phone Object</h5>

<p>The phone object describes previously enrolled phone numbers for the <code>sms</code> factor or for account recovery.</p>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>DataType</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>unique key for phone</td>
      <td>String</td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>TRUE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of phone</td>
      <td><a href="#phone-profile-object">Phone Profile Object</a></td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>status</td>
      <td>status of phone</td>
      <td><code>ACTIVE</code> or <code>INACTIVE</code></td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<pre><code class="language-json">{
    "id": "mbl198rKSEWOSKRIVIFT",
    "profile": {
        "phoneNumber": "+1 XXX-XXX-1337"
    },
    "status": "ACTIVE"
}
</code></pre>

<h6 id="phone-profile-object">Phone Profile Object</h6>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>DataType</th>
      <th>MinLength</th>
      <th>MaxLength</th>
      <th>Nullable</th>
      <th>Unique</th>
      <th>Readonly</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>phoneNumber</td>
      <td>masked phone number</td>
      <td>String</td>
      <td> </td>
      <td> </td>
      <td>FALSE</td>
      <td>FALSE</td>
      <td>TRUE</td>
    </tr>
  </tbody>
</table>

<h5 id="factor-links-object">Factor Links Object</h5>

<p>Specifies link relations (See <a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>) available for the factor using the <a href="http://tools.ietf.org/html/draft-kelly-json-hal-06">JSON Hypertext Application Language</a> specification.  This object is used for dynamic discovery of related resources and operations.</p>

<table>
  <thead>
    <tr>
      <th>Link Relation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>enroll</td>
      <td><a href="#enroll-factor">Enrolls a factor</a></td>
    </tr>
    <tr>
      <td>verify</td>
      <td><a href="#verify-factor">Verifies a factor</a></td>
    </tr>
    <tr>
      <td>questions</td>
      <td>Lists all possible questions for the <code>question</code> factor type</td>
    </tr>
    <tr>
      <td>resend</td>
      <td>Resends a challenge or OTP to a device</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>The Links Object is <strong>read-only</strong></p>
</blockquote>

<h2 id="authentication-operations">Authentication Operations</h2>

<h3 class="api api-operation" id="primary-authentication">Primary Authentication</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn</span></p>

<p>Every authentication transaction starts with primary authentication which validates a user’s username/password credential.  The <a href="#authentication-status">authentication status</a> of the response will depend on the user’s group memberships and assigned policies.  Password Policy and Sign-On Policy is evaluated during primary authentication to determine if the user’s password is expired or if additional verification is required.</p>

<ul>
  <li><a href="#primary-authentication-with-invalid-credentials">Primary Authentication with Invalid Credentials</a></li>
  <li><a href="#primary-authentication-with-expired-password">Primary Authentication with Expired Password</a></li>
  <li><a href="#primary-authentication-without-additional-verification">Primary Authentication without Additional Verification</a></li>
  <li><a href="#primary-authentication-with-additional-verification-for-enrolled-factors">Primary Authentication with Additional Verification for Enrolled Factors</a></li>
  <li><a href="#primary-authentication-with-factor-enrollment">Primary Authentication with Factor Enrollment</a></li>
</ul>

<blockquote>
  <p>You must first enable MFA factors for your organization and assign a MFA Sign-On Policy to a group to enroll and/or verify an additional factor during authentication</p>
</blockquote>

<h4 class="api api-request api-request-params" id="request-parameters">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>MaxLength</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>User’s non-qualified short-name (e.g. isaac) or unique fully-qualified login (e.g issac@example.org)</td>
      <td>Body</td>
      <td>String</td>
      <td> </td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>password</td>
      <td>User’s password credential</td>
      <td>Body</td>
      <td>String</td>
      <td> </td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the authentication transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>2048</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
    <tr>
      <td>context</td>
      <td>Provides additional context for the authentication transaction</td>
      <td>Body</td>
      <td><a href="#context-object">Context Object</a></td>
      <td> </td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 id="context-object">Context Object</h5>

<p>The Authentication API derives default context from the HTTP request and client socket.  The context object allows trusted web applications to override the default context by forwarding the originating context in the primary authentication request.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ipAddress</td>
      <td>IP Address of the user</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
    <tr>
      <td>userAgent</td>
      <td>User Agent of the user</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
    <tr>
      <td>deviceToken</td>
      <td>A globally unique ID identifying the device of the user</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Sign-On Security Policy may optionally require MFA based on network location.  Overriding HTTP request context is a highly privileged operation that should be limited to trusted web applications.  </p>
</blockquote>

<h6 id="device-token">Device Token</h6>

<p>You must always pass the same <code>deviceToken</code> for a user’s device with every authentication request for <strong>per-device</strong> or <strong>per-session</strong> Sign-On Policy factor challenges.  If the <code>deviceToken</code> is absent or does not match the previous <code>deviceToken</code>, the user will still be challenged everytime instead of <strong>per-device</strong> or <strong>per-session</strong>.  It is recommend that you generate a UUID or GUID for each client and persist the <code>deviceToken</code> as a persistent cookie or HTML5 localStorage item scoped to your web application’s origin.  The max length for <code>deviceToken</code> is 32 characters.</p>

<h4 class="api api-response api-response-params" id="response-parameters">Response Parameters</h4>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>If the username or password is invalid you will receive a <code>401 Unauthorized</code> status code with the following error: </p>

<pre><code class="language-http">HTTP/1.1 401 Unauthorized
Content-Type: application/json

{
  "errorCode": "E0000004",
  "errorSummary": "Authentication failed",
  "errorLink": "E0000004",
  "errorId": "oaeuHRrvMnuRga5UzpKIOhKpQ",
  "errorCauses": []
}
</code></pre>

<h4 class="api api-operation" id="primary-authentication-with-invalid-credentials">Primary Authentication with Invalid Credentials</h4>

<p>Authenticates a user with an invalid username or password.</p>

<h5 class="api api-request api-request-example" id="request-example">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn
-d \
'{
  "username": "isaac@example.org",
  "password" : "GoAw@y123",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "context": {
    "ipAddress": "192.168.12.11",
    "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3)",
    "deviceToken": "26q43Ak9Eh04p7H6Nnx0m69JqYOrfVBY"
  }
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example">Response Example</h5>

<pre><code class="language-http">HTTP/1.1 401 Unauthorized
Content-Type: application/json

{
  "errorCode": "E0000004",
  "errorSummary": "Authentication failed",
  "errorLink": "E0000004",
  "errorId": "oaeuHRrvMnuRga5UzpKIOhKpQ",
  "errorCauses": []
}
</code></pre>

<h4 id="primary-authentication-with-expired-password">Primary Authentication with Expired Password</h4>

<p>Authenticates a user with an expired password.  The user must <a href="#change-expired-password">change their expired password</a> to complete the authentication transaction.</p>

<h5 class="api api-request api-request-example" id="request-example-1">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn
-d \
'{
  "username": "isaac@example.org",
  "password" : "GoAw@y123",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "context": {
    "ipAddress": "192.168.12.11",
    "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3)",
    "deviceToken": "26q43Ak9Eh04p7H6Nnx0m69JqYOrfVBY"
  }
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-1">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00s1pd3bZuOv-meJE13hz1B7SZl5EGc14Ii_CTBIYd",
  "expiresAt": "2014-11-02T23:39:03.319Z",
  "status": "PASSWORD_EXPIRED",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  },
  "_links": {
    "next": {
      "name": "password",
      "href": "https://your-domain.okta.com/api/v1/authn/credentials/change_password",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h4 id="primary-authentication-without-additional-verification">Primary Authentication without Additional Verification</h4>

<p>Authenticates a user that is not assigned to a Sign-On Policy with a MFA challenge requirement.</p>

<h5 class="api api-request api-request-example" id="request-example-2">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn
-d \
'{
  "username": "isaac@example.org",
  "password": "GoAw@y123",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "context": {
    "ipAddress": "192.168.12.11",
    "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3)",
    "deviceToken": "26q43Ak9Eh04p7H6Nnx0m69JqYOrfVBY"
  }
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-2">Response Example</h5>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T10:15:57.000Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h4 id="primary-authentication-with-additional-verification-for-enrolled-factors">Primary Authentication with Additional Verification for Enrolled Factors</h4>

<p>Authenticates a user that has previously enrolled a factor for additional verification and assigned to a Sign-On Policy with a MFA challenge requirement.  The user must select and <a href="#verify-factor">verify</a> a <a href="#factor-object">factor</a> by <code>id</code> to complete the authentication transaction.</p>

<h5 class="api api-request api-request-example" id="request-example-3">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn
-d \
'{
  "username": "isaac@example.org",
  "password": "GoAw@y123",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "context": {
    "ipAddress": "192.168.12.11",
    "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3)",
    "deviceToken": "26q43Ak9Eh04p7H6Nnx0m69JqYOrfVBY"
  }
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-3">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00FpGOgqHfl-6KZxh1bLXJDz35ENsShIY-lc5XHPzc",
  "expiresAt": "2014-11-02T23:35:28.269Z",
  "status": "MFA_REQUIRED",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    },
    "factors": [
      {
        "id": "ufsm3jZGDQXPJDEIXZMP",
        "factorType": "question",
        "provider": "OKTA",
        "profile": {
          "question": "disliked_food",
          "questionText": "What is the food you least liked as a child?"
        },
        "_links": {
          "verify": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors/ufsm3jZGDQXPJDEIXZMP/verify",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      },
      {
        "id": "rsalhpMQVYKHZKXZJQEW",
        "factorType": "token",
        "provider": "RSA",
        "profile": {
          "credentialId": "isaac@example.org"
        },
        "_links": {
          "verify": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors/rsalhpMQVYKHZKXZJQEW/verify",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      },
      {
        "id": "uftm3iHSGFQXHCUSDAND",
        "factorType": "token:software:totp",
        "provider": "GOOGLE",
        "profile": {
          "credentialId": "isaac@example.org"
        },
        "_links": {
          "verify": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors/uftm3iHSGFQXHCUSDAND/verify",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      },
      {
        "id": "ostfm3hPNYSOIOIVTQWY",
        "factorType": "token:software:totp",
        "provider": "OKTA",
        "profile": {
          "credentialId": "isaac@example.org"
        },
        "_links": {
          "verify": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      },
      {
        "id": "sms193zUBEROPBNZKPPE",
        "factorType": "sms",
        "provider": "OKTA",
        "profile": {
          "phoneNumber": "+1 XXX-XXX-1337"
        },
        "_links": {
          "verify": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      }
    ]
  },
  "_links": {
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h4 id="primary-authentication-with-factor-enrollment">Primary Authentication with Factor Enrollment</h4>

<p>Authenticates a user assigned to a Sign-On Policy with a MFA challenge requirement who has not previously enrolled a factor for additional verification.  The user must select a <a href="#factor-object">factor</a> to <a href="#enroll-factor">enroll</a> to complete the authentication transaction.</p>

<h5 class="api api-request api-request-example" id="request-example-4">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn
-d \
'{
  "username": "isaac@example.org",
  "password": "GoAw@y123",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "context": {
    "ipAddress": "192.168.12.11",
    "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3)",
    "deviceToken": "26q43Ak9Eh04p7H6Nnx0m69JqYOrfVBY"
  }
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-4">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00Z20ZhXVrmyR3z8R-m77BvknHyckWCy5vNwEA6huD",
  "expiresAt": "2014-11-02T23:44:41.736Z",
  "status": "MFA_ENROLL",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    },
    "factors": [
      {
        "factorType": "question",
        "provider": "OKTA",
        "_links": {
          "questions": {
            "href": "https://your-domain.okta.com/api/v1/users/00uoy3CXZHSMMJPHYXXP/factors/questions",
            "hints": {
              "allow": [
                "GET"
              ]
            }
          },
          "enroll": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      },
      {
        "factorType": "token",
        "provider": "RSA",
        "_links": {
          "enroll": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      },
      {
        "factorType": "token:software:totp",
        "provider": "GOOGLE",
        "_links": {
          "enroll": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      },
      {
        "factorType": "token:software:totp",
        "provider": "OKTA",
        "_links": {
          "enroll": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      },
      {
        "factorType": "sms",
        "provider": "OKTA",
        "_links": {
          "enroll": {
            "href": "https://your-domain.okta.com/api/v1/authn/factors",
            "hints": {
              "allow": [
                "POST"
              ]
            }
          }
        }
      }
    ]
  },
  "_links": {
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h3 class="api api-operation" id="change-expired-password">Change Expired Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/credentials/change_password</span></p>

<p>Okta enforces changing expired passwords during authentication when primary authentication returns the <code>PASSWORD_EXPIRED</code> status.  The user must change their existing password by posting a new password to the <code>next</code> link relation to successfully complete authentication.  </p>

<h4 class="api api-request api-request-params" id="request-parameters-1">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>oldPassword</td>
      <td>User’s current password that is expired</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>newPassword</td>
      <td>New password for user</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-1">Response Parameters</h4>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>If the <code>oldPassword</code> is invalid you will receive a <code>403 Forbidden</code> status code with the following error: </p>

<pre><code class="language-http">HTTP/1.1 403 Forbidden
Content-Type: application/json

{
  "errorCode": "E0000014",
  "errorSummary": "Update of credentials failed",
  "errorLink": "E0000014",
  "errorId": "oaeYx8fd_-VQdONMI5OYcqoqw",
  "errorCauses": [
    {
      "errorSummary": "oldPassword: The credentials provided were incorrect."
    }
  ]
}
</code></pre>

<p>If the <code>newPassword</code> does not meet password policy requirements, you will receive a <code>403 Forbidden</code> status code with the following error: </p>

<pre><code class="language-http">HTTP/1.1 403 Forbidden
Content-Type: application/json

{
  "errorCode": "E0000080",
  "errorSummary": "The password does meet the complexity requirements of the current password policy.",
  "errorLink": "E0000080",
  "errorId": "oaeuNNAquYEQkWFnUVG86Abbw",
  "errorCauses": [
    {
      "errorSummary": "Passwords must have at least 8 characters, a lowercase letter, an uppercase letter, a number, no parts of your username"
    }
  ]
}
</code></pre>

<h5 class="api api-request api-request-example" id="request-example-5">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/credentials/change_password
-d \
'{
  "stateToken": "00s1pd3bZuOv-meJE13hz1B7SZl5EGc14Ii_CTBIYd",
  "oldPassword": "GoAw@y123",
  "newPassword": "Ch-ch-ch-ch-Changes!"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-5">Response Example</h5>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T10:15:57.000Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h3 class="api api-operation" id="enroll-factor">Enroll Factor</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/factors</span></p>

<p>Enrolls a user with a <a href="factors.html#supported-factors">factor</a> assigned by their administrator.  The operation is only available for users that have not previously enrolled a factor and have transitioned to the <code>MFA_ENROLL</code> <a href="#authentication-status">authentication status</a>. </p>

<ul>
  <li><a href="#enroll-user-with-security-question">Enroll User with Security Question</a></li>
  <li><a href="#enroll-user-with-okta-sms-factor">Enroll User with Okta SMS Factor</a></li>
  <li><a href="#enroll-user-with-okta-verify-factor">Enroll User with Okta Verify Factor</a></li>
  <li><a href="#enroll-user-with-google-authenticator-factor">Enroll User with Google Authenticator Factor</a></li>
</ul>

<h4 class="api api-request api-request-params" id="request-parameters-2">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>factorType</td>
      <td>type of factor</td>
      <td>Body</td>
      <td><a href="factors.html#factor-type">Factor Type</a></td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>provider</td>
      <td>factor provider</td>
      <td>Body</td>
      <td><a href="factors.html#provider-type">Provider Type</a></td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>profile</td>
      <td>profile of a <a href="factors.html#supported-factors">supported factor</a></td>
      <td>Body</td>
      <td><a href="factors.html#factor-profile-object">Factor Profile Object</a></td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-2">Response Parameters</h4>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<blockquote>
  <p>Some <a href="factors.html#factor-types">factor types</a> require <a href="#activate-factor">activation</a> to complete the enrollment process.  The <a href="#authentication-status">authentication status</a> will transition to <code>MFA_ENROLL_ACTIVATE</code> if a factor requires activation.</p>
</blockquote>

<h4 class="api api-operation" id="enroll-user-with-security-question">Enroll User with Security Question</h4>

<p>Enrolls a user with the Okta <code>question</code> factor and <a href="factors.html#question-profile">question profile</a>.</p>

<blockquote>
  <p>Security Question factor does not require activation and is <code>ACTIVE</code> after enrollment</p>
</blockquote>

<h5 class="api api-request api-request-example" id="request-example-6">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors
-d \
'{
  "stateToken": "00Z20ZhXVrmyR3z8R-m77BvknHyckWCy5vNwEA6huD",
  "factorType": "question",
  "provider": "OKTA",
  "profile": {
    "question": "name_of_first_plush_toy",
    "answer": "blah"
  }
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-6">Response Example</h5>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T12:36:40.000Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00OhZsSfoCtbJTrU2XkwntfEl-jCj6ck6qcU_kA049",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h4 class="api api-operation" id="enroll-user-with-okta-sms-factor">Enroll User with Okta SMS Factor</h4>

<p>Enrolls a user with the Okta <code>sms</code> factor and a <a href="factors.html#sms-profile">SMS profile</a>.  A text message with an OTP is sent to the device during enrollment and must be <a href="#activate-sms-factor">activated</a> by following the <code>next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-7">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors
-d \
'{
  "stateToken": "00Z20ZhXVrmyR3z8R-m77BvknHyckWCy5vNwEA6huD",
  "factorType": "sms",
  "provider": "OKTA",
  "profile": {
    "phoneNumber": "+1-555-415-1337"
  }
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-7">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00lT7DEzQaeP6mv1_y3pdXjNEONzk83mXX-yhgEdVQ",
  "expiresAt": "2014-11-03T00:46:09.700Z",
  "status": "MFA_ENROLL_ACTIVATE",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    },
    "factor": {
      "id": "mbl198rKSEWOSKRIVIFT",
      "factorType": "sms",
      "provider": "OKTA",
      "profile": {
        "phoneNumber": "+1 XXX-XXX-1337"
      }
    }
  },
  "_links": {
    "next": {
      "name": "activate",
      "href": "https://your-domain.okta.com/api/v1/authn/factors/mbl198rKSEWOSKRIVIFT/lifecycle/activate",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "prev": {
      "href": "https://your-domain.okta.com/api/v1/authn/previous",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "resend": [
      {
        "name": "sms",
        "href": "https://your-domain.okta.com/api/v1/authn/factors/mbl198rKSEWOSKRIVIFT/lifecycle/resend",
        "hints": {
          "allow": [
            "POST"
          ]
        }
      }
    ]
  }
}
</code></pre>

<h4 class="api api-operation" id="enroll-user-with-okta-verify-factor">Enroll User with Okta Verify Factor</h4>

<p>Enrolls a user with the Okta <code>token:software:totp</code> factor.  The factor must be <a href="#activate-totp-factor">activated</a> after enrollment by following the <code>next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-8">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors
-d \
'{
  "stateToken": "00Z20ZhXVrmyR3z8R-m77BvknHyckWCy5vNwEA6huD",
  "factorType": "token:software:totp",
  "provider": "OKTA"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-8">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00wlafXU2GV9I3tNvDNkOA1thqM5gDwCOgHID_-Iej",
  "expiresAt": "2014-11-03T00:50:49.912Z",
  "status": "MFA_ENROLL_ACTIVATE",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    },
    "factor": {
      "id": "ostf2xjtDKWFPZIKYDZV",
      "factorType": "token:software:totp",
      "provider": "OKTA",
      "profile": {
        "credentialId": "isaac@example.org"
      },
      "_embedded": {
        "activation": {
          "timeStep": 30,
          "sharedSecret": "KBMTM32UJZSXQ2DW",
          "encoding": "base32",
          "keyLength": 6,
          "_links": {
            "qrcode": {
              "href": "https://your-domain.okta.com/api/v1/users/00uoy3CXZHSMMJPHYXXP/factors/ostf2xjtDKWFPZIKYDZV/qr/00Mb0zqhJQohwCDkB2wOifajAsAosEAXvDwuCmsAZs",
              "type": "image/png"
            }
          }
        }
      }
    }
  },
  "_links": {
    "next": {
      "name": "activate",
      "href": "https://your-domain.okta.com/api/v1/authn/factors/ostf2xjtDKWFPZIKYDZV/lifecycle/activate",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "prev": {
      "href": "https://your-domain.okta.com/api/v1/authn/previous",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h4 class="api api-operation" id="enroll-user-with-google-authenticator-factor">Enroll User with Google Authenticator Factor</h4>

<p>Enrolls a user with the Google <code>token:software:totp</code> factor.  The factor must be <a href="#activate-totp-factor">activated</a> after enrollment by following the <code>next</code> link relation to complete the enrollment process.</p>

<h5 class="api api-request api-request-example" id="request-example-9">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors
-d \
'{
  "stateToken": "00Z20ZhXVrmyR3z8R-m77BvknHyckWCy5vNwEA6huD",
  "factorType": "token:software:totp",
  "provider": "OKTA"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-9">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00wlafXU2GV9I3tNvDNkOA1thqM5gDwCOgHID_-Iej",
  "expiresAt": "2014-11-03T00:50:49.912Z",
  "status": "MFA_ENROLL_ACTIVATE",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    },
    "factor": {
      "id": "ostf2xjtDKWFPZIKYDZV",
      "factorType": "token:software:totp",
      "provider": "GOOGLE",
      "profile": {
        "credentialId": "isaac@example.org"
      },
      "_embedded": {
        "activation": {
          "timeStep": 30,
          "sharedSecret": "KYCRM33UJZSXQ2DW",
          "encoding": "base32",
          "keyLength": 6,
          "_links": {
            "qrcode": {
              "href": "https://your-domain.okta.com/api/v1/users/00ub0oNGTSWTBKOLGLNR/factors/uftm3iHSGFQXHCUSDAND/qr/00Mb0zqhJQohwCDkB2wOifajAsAosEAXvDwuCmsAZs",
              "type": "image/png"
            }
          }
        }
      }
    }
  },
  "_links": {
    "next": {
      "name": "activate",
      "href": "https://your-domain.okta.com/api/v1/authn/factors/uftm3iHSGFQXHCUSDAND/lifecycle/activate",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "prev": {
      "href": "https://your-domain.okta.com/api/v1/authn/previous",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h3 class="api api-operation" id="activate-factor">Activate Factor</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/factors/<em>:fid</em>/lifecycle/activate</span></p>

<p>The <code>sms</code> and <code>token:software:totp</code> <a href="factors.html#factor-types">factor types</a> require activation to complete the enrollment process.</p>

<ul>
  <li><a href="#activate-totp-factor">Activate TOTP Factor</a></li>
  <li><a href="#activate-sms-factor">Activate SMS Factor</a></li>
</ul>

<h4 class="api api-operation" id="activate-totp-factor">Activate TOTP Factor</h4>

<p>Activates a <code>token:software:totp</code> factor by verifying the OTP.</p>

<h4 class="api api-request api-request-params" id="request-parameters-3">Request Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code>id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a>  for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP generated by device</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 class="api api-response api-response-params" id="response-parameters-3">Response Parameters</h4>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>If the passcode is invalid you will receive a <code>403 Forbidden</code> status code with the following error: </p>

<pre><code class="language-http">HTTP/1.1 403 Forbidden
Content-Type: application/json

{
  "errorCode": "E0000068",
  "errorSummary": "Invalid Passcode/Answer",
  "errorLink": "E0000068",
  "errorId": "oaei_IfXcpnTHit_YEKGInpFw",
  "errorCauses": [
    {
      "errorSummary": "Your passcode doesn't match our records. Please try again."
    }
  ]
}
</code></pre>

<h4 class="api api-request api-request-example" id="request-example-10">Request Example</h4>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors/ostf1fmaMGJLMNGNLIVG/lifecycle/activate
-d \
'{
  "stateToken": "00wlafXU2GV9I3tNvDNkOA1thqM5gDwCOgHID_-Iej",
  "passCode": "123456"
}'
</code></pre>

<h4 class="api api-response api-response-example" id="response-example-10">Response Example</h4>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T10:15:57.000Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h4 class="api api-operation" id="activate-sms-factor">Activate SMS Factor</h4>

<p>Activates a <code>sms</code> factor by verifying the OTP.  The request/response is identical to <a href="#activate-totp-factor">activating a TOTP factor</a></p>

<h5 class="api api-request api-request-params" id="request-parameters-4">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code>id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to mobile device</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-4">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>If the passcode is invalid you will receive a <code>403 Forbidden</code> status code with the following error: </p>

<pre><code class="language-http">HTTP/1.1 403 Forbidden
Content-Type: application/json

{
  "errorCode": "E0000068",
  "errorSummary": "Invalid Passcode/Answer",
  "errorLink": "E0000068",
  "errorId": "oaei_IfXcpnTHit_YEKGInpFw",
  "errorCauses": [
    {
      "errorSummary": "Your passcode doesn't match our records. Please try again."
    }
  ]
}
</code></pre>

<h5 class="api api-request api-request-example" id="request-example-11">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors/sms1o51EADOTFXHHBXBP/lifecycle/activate
-d \
'{
  "stateToken": "00wlafXU2GV9I3tNvDNkOA1thqM5gDwCOgHID_-Iej",
  "passCode": "123456"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-11">Response Example</h5>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T10:15:57.000Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00Fpzf4en68pCXTsMjcX8JPMctzN2Wiw4LDOBL_9pe",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h3 id="verify-factor">Verify Factor</h3>

<p>Verifies an enrolled factor for an authentication transaction with the <code>MFA_REQUIRED</code> or <code>MFA_CHALLENGE</code> <a href="#authentication-status">status</a></p>

<ul>
  <li><a href="#verify-security-question-factor">Verify Security Question Factor</a></li>
  <li><a href="#verify-sms-factor">Verify SMS Factor</a></li>
  <li><a href="#verify-totp-factor">Verify TOTP Factor</a></li>
</ul>

<h4 class="api api-operation" id="verify-security-question-factor">Verify Security Question Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/factors/<em>:fid</em>/verify</span></p>

<p>Verifies an answer to a <code>question</code> factor.</p>

<h5 class="api api-request api-request-params" id="request-parameters-5">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code>id</code> of factor returned from enrollment</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>answer</td>
      <td>answer to security question</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-5">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>If the <code>answer</code> is invalid you will receive a <code>403 Forbidden</code> status code with the following error: </p>

<pre><code class="language-json">{
  "errorCode": "E0000068",
  "errorSummary": "Invalid Passcode/Answer",
  "errorLink": "E0000068",
  "errorId": "oaei_IfXcpnTHit_YEKGInpFw",
  "errorCauses": [
    {
      "errorSummary": "Your answer doesn't match our records. Please try again."
    }
  ]
}
</code></pre>

<h5 class="api api-request api-request-example" id="request-example-12">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors/ufs1pe3ISGKGPYKXRBKK/verify
-d \
'{
  "stateToken": "00wlafXU2GV9I3tNvDNkOA1thqM5gDwCOgHID_-Iej",
  "answer": "mayonnaise"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-12">Response Example</h5>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T13:50:17.000Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00ZD3Z7ixppspFljXV2t_Z6GfrYzqG7cDJ8reWo2hy",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h4 class="api api-operation" id="verify-sms-factor">Verify SMS Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/factors/<em>:fid</em>/verify</span></p>

<h5 class="api api-request api-request-params" id="request-parameters-6">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code>id</code> of factor</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>If you omit <code>passCode</code> in the request a new OTP will be sent to the device, otherwise the request will attempt to verify the <code>passCode</code></p>
</blockquote>

<h4 class="api api-response api-response-params" id="response-parameters-6">Response Parameters</h4>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>If the <code>passCode</code> is invalid you will receive a <code>403 Forbidden</code> status code with the following error: </p>

<pre><code class="language-json">{
  "errorCode": "E0000068",
  "errorSummary": "Invalid Passcode/Answer",
  "errorLink": "E0000068",
  "errorId": "oaei_IfXcpnTHit_YEKGInpFw",
  "errorCauses": [
    {
      "errorSummary": "Your answer doesn't match our records. Please try again."
    }
  ]
}
</code></pre>

<h5 id="send-sms-otp">Send SMS OTP</h5>

<p>Omit <code>passCode</code> in the request to sent an OTP to the device</p>

<h6 class="api api-request api-request-example" id="request-example-13">Request Example</h6>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify
-d \
'{
  "stateToken": "00wlafXU2GV9I3tNvDNkOA1thqM5gDwCOgHID_-Iej"
}'
</code></pre>

<h6 class="api api-response api-response-example" id="response-example-13">Response Example</h6>

<pre><code class="language-json">{
  "stateToken": "00_7ekoccZn32i1u1hD_02dI54yW_cCXk2jniDYnMD",
  "expiresAt": "2014-11-03T01:58:09.097Z",
  "status": "MFA_CHALLENGE",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    },
    "factor": {
      "id": "sms193zUBEROPBNZKPPE",
      "factorType": "sms",
      "provider": "OKTA",
      "profile": {
        "phoneNumber": "+1 XXX-XXX-1337"
      }
    }
  },
  "_links": {
    "next": {
      "name": "verify",
      "href": "https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "prev": {
      "href": "https://your-domain.okta.com/api/v1/authn/previous",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "resend": [
      {
        "name": "sms",
        "href": "https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify/resend",
        "hints": {
          "allow": [
            "POST"
          ]
        }
      }
    ]
  }
}
</code></pre>

<h5 id="verify-sms-otp">Verify SMS OTP</h5>

<p>Specify <code>passCode</code> in the request to verify the factor.</p>

<h6 class="api api-request api-request-example" id="request-example-14">Request Example</h6>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify
-d \
'{
  "stateToken": "00wlafXU2GV9I3tNvDNkOA1thqM5gDwCOgHID_-Iej",
  "passCode": "657866"
}'
</code></pre>

<h6 class="api api-response api-response-example" id="response-example-14">Response Example</h6>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T14:02:27.000Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h4 class="api api-operation" id="verify-totp-factor">Verify TOTP Factor</h4>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/factors/<em>:fid</em>/verify</span></p>

<p>Verifies an OTP for a <code>token:software:totp</code> factor.</p>

<h5 class="api api-request api-request-params" id="request-parameters-7">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fid</td>
      <td><code>id</code> of factor</td>
      <td>URL</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>passCode</td>
      <td>OTP sent to device</td>
      <td>Body</td>
      <td>String</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-7">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>If the passcode is invalid you will receive a <code>403 Forbidden</code> status code with the following error: </p>

<pre><code class="language-json">{
  "errorCode": "E0000068",
  "errorSummary": "Invalid Passcode/Answer",
  "errorLink": "E0000068",
  "errorId": "oaei_IfXcpnTHit_YEKGInpFw",
  "errorCauses": [
    {
      "errorSummary": "Your passcode doesn't match our records. Please try again."
    }
  ]
}
</code></pre>

<h6 class="api api-request api-request-example" id="request-example-15">Request Example</h6>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/factors/ostfm3hPNYSOIOIVTQWY/verify
-d \
'{
  "stateToken": "00wlafXU2GV9I3tNvDNkOA1thqM5gDwCOgHID_-Iej",
  "passCode": "657866"
}'
</code></pre>

<h6 class="api api-response api-response-example" id="response-example-15">Response Example</h6>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T14:02:27.000Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h2 id="recovery-operations">Recovery Operations</h2>

<h3 class="api api-operation" id="forgot-password">Forgot Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/recovery/password</span></p>

<p>Issues a <a href="#recovery-token">recovery token</a> for a given user that can be used to reset a user’s password.</p>

<blockquote>
  <p>The <code>recoveryToken</code> is usually sent directly to the end-user via email or SMS.  Obtaining a <code>recoveryToken</code> is a highly privileged operation and should be restricted to trusted web applications.  Anyone that obtains a <code>recoveryToken</code> for a user and knows the answer to user’s recovery question can reset their password or unlock their account.</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-8">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>MaxLength</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>User’s non-qualified short-name (e.g. isaac) or unique fully-qualified login (e.g issac@example.org)</td>
      <td>Body</td>
      <td>String</td>
      <td> </td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>2048</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-8">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> with a <code>RECOVERY</code> status and an issued <code>recoveryToken</code> that can be distributed to the end-user.</p>

<p>You will receive a <code>404 Not Found</code> status code if the <code>username</code> requested is not valid</p>

<h5 class="api api-request api-request-example" id="request-example-16">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/recovery/password
-d \
'{
  "username": "isaac@example.org",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-16">Response Example</h5>

<pre><code class="language-json">{
  "expiresAt": "2014-11-10T04:06:58.000Z",
  "status": "RECOVERY",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "recoveryToken": "VBQ0gwBp5LyJJFdbmWCM",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  },
  "_links": {
    "next": {
      "name": "recovery",
      "href": "https://your-domain.okta.com/api/v1/authn/recovery/token",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h3 class="api api-operation" id="unlock-account">Unlock Account</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/recovery/unlock</span></p>

<p>Issues a <a href="#recovery-token">recovery token</a> for a user that can be used to unlock their account.</p>

<blockquote>
  <p>Self-service unlock must be enabled in your organization’s password policy.</p>
</blockquote>

<blockquote>
  <p>The <code>recoveryToken</code> is usually sent directly to the end-user via email or SMS.  Obtaining a <code>recoveryToken</code> is a highly privileged operation and should be restricted to trusted web applications.  Anyone that obtains a <code>recoveryToken</code> for a user and knows the answer to user’s recovery question can reset their password or unlock their account.</p>
</blockquote>

<h5 class="api api-request api-request-params" id="request-parameters-9">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>MaxLength</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>User’s non-qualified short-name (e.g. isaac) or unique fully-qualified login (e.g issac@example.org)</td>
      <td>Body</td>
      <td>String</td>
      <td> </td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>relayState</td>
      <td>Optional state value that is persisted for the lifetime of the recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>2048</td>
      <td>FALSE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-9">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> with a <code>RECOVERY</code> status and an issued <code>recoveryToken</code> that can be distributed to the end-user.</p>

<p>You will receive a <code>404 Not Found</code> status code if the <code>username</code> requested is not valid</p>

<h5 class="api api-request api-request-example" id="request-example-17">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/recovery/unlock
-d \
'{
  "username": "isaac@example.org",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-17">Response Example</h5>

<pre><code class="language-json">{
  "expiresAt": "2014-11-10T04:06:58.000Z",
  "status": "RECOVERY",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "recoveryToken": "VBQ0gwBp5LyJJFdbmWCM",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  },
  "_links": {
    "next": {
      "name": "recovery",
      "href": "https://your-domain.okta.com/api/v1/authn/recovery/token",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h3 class="api api-operation" id="verify-recovery-token">Verify Recovery Token</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/recovery/token</span></p>

<p>Validates a <a href="#recovery-token">recovery token</a> that was distributed to the end-user to continue the recovery transaction. </p>

<h5 class="api api-request api-request-params" id="request-parameters-10">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>recoveryToken</td>
      <td><a href="#recovery-token">Recovery token</a> that was distributed to end-user via out-of-band mechanism such as email</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-10">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> with a <code>RECOVERY</code> status and an issued <code>stateToken</code> that must be used to complete the recovery transaction.</p>

<p>You will receive a <code>401 Unauthorized</code> status code if you attempt to use an expired or invalid <a href="#recovery-token">recovery token</a>.</p>

<pre><code class="language-http">HTTP/1.1 401 Unauthorized
Content-Type: application/json

{
    "errorCode": "E0000011",
    "errorSummary": "Invalid token provided",
    "errorLink": "E0000011",
    "errorId": "oaeY-4G_TBUTBSZAn9n7oZCfw",
    "errorCauses": []
}
</code></pre>

<h5 class="api api-request api-request-example" id="request-example-18">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/recovery/token
-d \
'{
  "recoveryToken": "/myapp/some/deep/link/i/want/to/return/to"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-18">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb",
  "expiresAt": "2014-11-03T04:35:20.748Z",
  "status": "RECOVERY",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      },
      "recovery_question": {
        "question": "Who's a major player in the cowboy scene?"
      }
    }
  },
  "_links": {
    "next": {
      "name": "answer",
      "href": "https://your-domain.okta.com/api/v1/authn/recovery/answer",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h3 class="api api-operation" id="answer-recovery-question">Answer Recovery Question</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/recovery/answer</span></p>

<p>Answers the user’s recovery question to ensure only the end-user reclaimed the <a href="#recovery-token">recovery token</a> for recovery transaction with a <code>RECOVERY</code> <a href="#authentication-status">status</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-11">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>answer</td>
      <td>answer to user’s recovery question</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-11">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>You will receive a <code>403 Forbidden</code> status code if the <code>answer</code> to the user’s <a href="#recovery-question-object">recovery question</a> is invalid</p>

<pre><code class="language-http">HTTP/1.1 403 Forbidden
Content-Type: application/json

{
    "errorCode": "E0000087",
    "errorSummary": "The recovery question answer did not match our records.",
    "errorLink": "E0000087",
    "errorId": "oaeGEiIPFfeR3a_XxpezUH9ug",
    "errorCauses": []
}
</code></pre>

<h5 class="api api-request api-request-example" id="request-example-19">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/recovery/answer
-d \
'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb",
  "answer": "Cowboy Dan"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-19">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00Ehr_AX8eU6E0LTLaa1uCWUmM2cMUa-2WVNxfnyyg",
  "expiresAt": "2014-11-03T04:57:56.038Z",
  "status": "PASSWORD_RESET",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  },
  "_links": {
    "next": {
      "name": "password",
      "href": "https://your-domain.okta.com/api/v1/authn/credentials/reset_password",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h3 class="api api-operation" id="reset-password">Reset Password</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/credentials/reset_password</span></p>

<p>Resets a user’s password to complete a recovery transaction with a <code>PASSWORD_RESET</code> <a href="#authentication-status">status</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-12">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for current transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
    <tr>
      <td>newPassword</td>
      <td>user’s new password</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-12">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> for the next <a href="#authentication-status">authentication status</a>.</p>

<p>You will receive a <code>403 Forbidden</code> status code if the <code>answer</code> to the user’s <a href="#recovery-question-object">recovery question</a> is invalid.</p>

<pre><code class="language-http">HTTP/1.1 403 Forbidden
Content-Type: application/json

{
    "errorCode": "E0000087",
    "errorSummary": "The recovery question answer did not match our records.",
    "errorLink": "E0000087",
    "errorId": "oaeGEiIPFfeR3a_XxpezUH9ug",
    "errorCauses": []
}
</code></pre>

<p>You will also receive a <code>403 Forbidden</code> status code if the <code>newPassword</code> does not meet password policy requirements for the user.</p>

<pre><code class="language-http">HTTP/1.1 403 Forbidden
Content-Type: application/json

{
    "errorCode": "E0000080",
    "errorSummary": "The password does meet the complexity requirements of the current password policy.",
    "errorLink": "E0000080",
    "errorId": "oaeS4O7BUp5Roefkk_y4Z2u8Q",
    "errorCauses": [
        {
            "errorSummary": "Passwords must have at least 8 characters, a lowercase letter, an uppercase letter, a number, no parts of your username"
        }
    ]
}
</code></pre>

<h5 class="api api-request api-request-example" id="request-example-20">Request Example</h5>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/credentials/reset_password
-d \
'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb",
  "newPassword": "Ch-ch-ch-ch-Changes!"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-20">Response Example</h5>

<pre><code class="language-json">{
  "expiresAt": "2014-11-03T04:57:56.038Z",
  "status": "SUCCESS",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "sessionToken": "00t6IUQiVbWpMLgtmwSjMFzqykb5QcaBNtveiWlGeM",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    }
  }
}
</code></pre>

<h2 id="state-management-operations">State Management Operations</h2>

<h3 class="api api-operation" id="get-authentication-status-for-transaction">Get Authentication Status for Transaction</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn</span></p>

<p>Retrieves the current <a href="#authentication-status">authentication status</a> for a <a href="#state-token">state token</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-13">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-13">Response Parameters</h5>

<p><a href="#authentication-model">Authentication Object</a> for the current <a href="#authentication-status">authentication status</a>.</p>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn
-d \
'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-21">Response Example</h5>

<pre><code class="language-json">{
  "stateToken": "00OxquNRT_jR-Vy1KoVLYcGvb-0Swj6NN6rWL0krV5",
  "expiresAt": "2014-11-03T05:28:30.000Z",
  "status": "MFA_CHALLENGE",
  "relayState": "/myapp/some/deep/link/i/want/to/return/to",
  "_embedded": {
    "user": {
      "id": "00ub0oNGTSWTBKOLGLNR",
      "profile": {
        "login": "isaac@example.org",
        "firstName": "Isaac",
        "lastName": "Brock",
        "locale": "en_US",
        "timeZone": "America/Los_Angeles"
      }
    },
    "factor": {
      "id": "sms193zUBEROPBNZKPPE",
      "factorType": "sms",
      "provider": "OKTA",
      "profile": {
        "phoneNumber": "+1 XXX-XXX-1337"
      }
    }
  },
  "_links": {
    "next": {
      "name": "verify",
      "href": "https://your-domain.okta.com/api/v1/authn/factors/sms193zUBEROPBNZKPPE/verify",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "cancel": {
      "href": "https://your-domain.okta.com/api/v1/authn/cancel",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    },
    "prev": {
      "href": "https://your-domain.okta.com/api/v1/authn/previous",
      "hints": {
        "allow": [
          "POST"
        ]
      }
    }
  }
}
</code></pre>

<h3 class="api api-operation" id="cancel-transaction">Cancel Transaction</h3>

<p><span class="api-uri-template api-uri-post"><span class="api-label">POST</span> /authn/cancel</span></p>

<p>Cancels the current authentication transaction and revokes the <a href="#state-token">state token</a>.</p>

<h5 class="api api-request api-request-params" id="request-parameters-14">Request Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>stateToken</td>
      <td><a href="#state-token">state token</a> for a transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 class="api api-response api-response-params" id="response-parameters-14">Response Parameters</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Param Type</th>
      <th>DataType</th>
      <th>Required</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>relayState</td>
      <td>Optional state value that was persisted for the authentication or recovery transaction</td>
      <td>Body</td>
      <td>String</td>
      <td>TRUE</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<pre><code class="language-sh">curl -v -H "Authorization: SSWS yourtoken" \
-H "Accept: application/json" \
-H "Content-Type: application/json" \
-X POST "https://your-domain.okta.com/api/v1/authn/cancel
-d \
'{
  "stateToken": "00lMJySRYNz3u_rKQrsLvLrzxiARgivP8FB_1gpmVb"
}'
</code></pre>

<h5 class="api api-response api-response-example" id="response-example-22">Response Example</h5>

<pre><code class="language-json">{
  "relayState": "/myapp/some/deep/link/i/want/to/return/to"
}
</code></pre>


	</div>
</section>
		
		
			
	</div>
	
	<!-- Remarketing tag -->
	<script type="text/javascript">
		/* <![CDATA[ */
		var google_conversion_id = 1006913831;
		var google_custom_params = window.google_tag_params;
		var google_remarketing_only = true;
		/* ]]> */
	</script>
	<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
	</script>
	<noscript>
		<div style="display:inline;">
			<img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"/>
		</div>
	</noscript>
<!-- End Remarketing tag -->

<!-- Crazy Egg Tracking -->
<script type="text/javascript">
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>
<!-- End Crazy Egg Tracking -->

<footer class="site-footer">
	<div class="wrap">

		<ul>
			<li><a href="http://www.okta.com" target="_blank">Okta.com</a></li>
			<li><a href="/blog">Blog</a></li>
			<li><a href="/terms/">Terms &amp; Conditions</a></li>
			<li><a href="/privacy/">Privacy Policy</a></li>
			<li><a href="http://okta.com/developer/contact/">Contact Sales</a></li>
			<li><a href="mailto:developers@okta.com">Contact Support</a></li>
		</ul>

		<ul>
			<li><a class="icon-with-hover--github" href="http://github.com/okta" target="_blank">Github</a></li>
			<li><a class="icon-with-hover--twitter" href="http://twitter.com/okta" target="_blank">Twitter</a></li>
			<li><a class="icon-with-hover--stack-overflow" href="http://stackoverflow.com/search?q=okta" target="_blank">Stack Overflow</a></li>
			<li><a class="icon-with-hover--rss" href="http://feeds.feedburner.com/OktaBlog" target="_blank">News</a></li>
			<li><a class="icon-with-hover--help" href="http://community.okta.com" target="_blank">Help</a></li>
		</ul>

	</div>
</footer>

	
</body>
	
</html>