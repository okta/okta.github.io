<!doctype html>
<!--[if lt IE 7 ]> <html class="ie6 no-flexbox"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7 no-flexbox"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8 no-flexbox"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9 no-flexbox"> <![endif]-->
<!--[if IE 10 ]>    <html class="ie10 no-flexbox"> <![endif]-->
<!--[if (gt IE 10)|!(IE)]><!--> <html class=""> <!--<![endif]-->
<head>
	
	<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="/favicon.ico">
	<title>Session Cookie | Okta Developer</title>
	<meta name="description" content="Secure, scalable, and highly available authentication and user management for any app.">

	<link rel="canonical" href="http://developer.okta.com/docs/examples/session_cookie.html">

	<link rel="stylesheet" href="/assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/assets/css/animate.css">
	<link rel="stylesheet" href="/assets/css/master.css">
	<link rel="stylesheet" href="/assets/css/layout-docs.css">
	<link rel="stylesheet" href="/assets/css/responsive.css">


  
	<script type="text/javascript" defer="defer" src="/assets/js/jquery.min.js"></script>
	<script type="text/javascript" defer="defer" src="/assets/js/tabber.js"></script>
	<script type="text/javascript" defer="defer" src="/assets/js/pacnav.js"></script>
	<script type="text/javascript" defer="defer" src="/assets/js/master.js"></script>
	<script type="text/javascript" defer="defer" src="/assets/js/scrollspy.js"></script>

	<script type="text/javascript" defer="defer" src="/assets/js/docs.js"></script>
	<!-- TypeKit -->
	<script src="//use.typekit.net/pls8pog.js"></script>
	<script>try{Typekit.load();}catch(e){}</script>
	<!-- GA -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-15777010-3', 'auto');
		ga('send', 'pageview');
	</script>
</head>

	
<body>
	
	<header class="site-header">
	<div class="wrap">

		<h1 class="site-title"><a href="/">Okta Developer</a></h1>

		<nav id="primary-nav" class="site-nav loaded">
			<ul>
				<li><a href="/product/">Product</a></li>
				<li><a href="/pricing/">Pricing</a></li>
				<li><a href="/customers/">Customers</a></li>
				<li><a href="/docs/guides/overview.html">Docs</a></li>
				<li><a href="/discussion/">Discussion</a></li>
				<li class="has-dropdown"><a href="#">Support</a>
					<div class="dropdown-window">
						<p class="stack-overflow">
							Post your question on <a href="http://stackoverflow.com/search?q=okta" target="_blank">Stack Overflow</a>.<br />
							We'll answer it within 24 hours.
						</p>
						<p class="email">
							Email us:<br />
							<a href="mailto:developers@okta.com">developers@okta.com</a>
						</p>
						<p class="tel">
							Call us:<br />
							<a href="tel:18887227871">1 (888) 722-7871</a>
						</p>
					</div>
				</li>
			</ul>
		</nav>

		<a href="/search" class="gsc-trigger search-button"></a>


		<div class="search-container">
			<div class="gsc-container">
				<script defer="defer">
					(function() {
						var cx = '005121479574088032773:mmh_vhv8uns';
						var gcse = document.createElement('script');
						gcse.type = 'text/javascript';
						gcse.async = true;
						gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
						'//cse.google.com/cse.js?cx=' + cx;
						var s = document.getElementsByTagName('script')[0];
						s.parentNode.insertBefore(gcse, s);
					})();
				</script>
				<gcse:searchbox-only resultsUrl="/search" enableAutoComplete="true"></gcse:searchbox-only>
			</div>
		</div>
		<a href="https://www.okta.com/developer/signup/" class="cta-button button--small">Get Started</a>

	</div>
</header>

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-P6JKVN"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P6JKVN');</script>
<!-- End Google Tag Manager -->


	
	<div class="page-content">
		
		
			
		

<section class="section--with-sidebar docs-page">
	<aside id="sidebar-wrapper-aside" class="sticky-nav--sidebar">

		



<!-- Work around to remove blank lines -->
<div class="scrollable">
	<span class="toggle-menu"></span>
	<div id="sidebar-wrapper">
		<div class="docs-sidebar-block" id="myScrollspy" >
		<h2>Examples</h2>                                                <ul class="nav sidebar-nav nav-title"><li data-name="Session Cookie" class="on"><a id="toc_current_doc" href="/docs/examples/session_cookie.html">Session Cookie</a></li></ul><div id="gen-toc-container"><div class="gen-toc" id="gen-toc"><div class="gen-toc-title hide"><h2><div id="gen-toctitle" class="caret2 hide">Session Cookie</div></h2></div><ul class="nav sidebar-nav hide"><li class="gen-toc_level-1 toc_section-1"><a href="#overview"><span class="gen-toctext">Overview</span></a></li><li class="gen-toc_level-1 toc_section-2"><a href="#retrieving-a-session-cookie-by-visiting-a-session-redirect-link"><span class="gen-toctext">Retrieving a session cookie by visiting a session redirect link</span></a><ul class="closed"><li class="gen-toc_level-2 toc_section-3"><a href="#validate-credentials--retrieve-a-one-time-token"><span class="gen-toctext">Validate credentials & retrieve a one-time token</span></a></li><li class="gen-toc_level-2 toc_section-4"><a href="#visit-session-redirect-url-with-the-one-time-token"><span class="gen-toctext">Visit session redirect URL with the one-time token</span></a></li></ul></li><li class="gen-toc_level-1 toc_section-5"><a href="#retrieving-a-session-cookie-by-visiting-an-application-embed-link"><span class="gen-toctext">Retrieving a session cookie by visiting an application embed link</span></a><ul class="closed"><li class="gen-toc_level-2 toc_section-6"><a href="#validate-credentials--retrieve-a-one-time-token-1"><span class="gen-toctext">Validate credentials & retrieve a one-time token</span></a></li><li class="gen-toc_level-2 toc_section-7"><a href="#visit-an-embed-link-with-the-one-time-token"><span class="gen-toctext">Visit an embed link with the one-time token</span></a></li><li class="gen-toc_level-2 toc_section-8"><a href="#initiate-a-saml-sso-with-the-one-time-token"><span class="gen-toctext">Initiate a SAML SSO with the one-time token</span></a></li><li class="gen-toc_level-2 toc_section-9"><a href="#initiate-a-ws-federation-sso-with-the-one-time-token"><span class="gen-toctext">Initiate a WS-Federation SSO with the one-time token</span></a></li></ul></li><li class="gen-toc_level-1 toc_section-10"><a href="#retrieving-a-session-cookie-with-a-hidden-image"><span class="gen-toctext">Retrieving a session cookie with a hidden image</span></a><ul class="closed"><li class="gen-toc_level-2 toc_section-11"><a href="#validate-credentials--retrieve-a-session-cookie-image-url"><span class="gen-toctext">Validate credentials & retrieve a session cookie image URL</span></a></li><li class="gen-toc_level-2 toc_section-12"><a href="#add-image-tag-with-session-cookie-image-url"><span class="gen-toctext">Add image tag with session cookie image URL</span></a></li></ul></li></ul></div></div>                            <ul class="nav sidebar-nav" data-item="dotnet_sample_application" data-section=""><li data-name=".NET Sample Application" ><a href="/docs/examples/dotnet_sample_application.html">.NET Sample Application</a></li></ul>                                            
		</div>
	</div>
</div>

	</aside>

	<div id="docs-body" class="body docs-body">

		<nav id="sticky-nav" class="sticky-nav--top">

			
	<a  href="/docs/guides/overview.html">
		Guides
	</a>
	<a  href="/docs/api/getting_started/design_principles.html">
		API
	</a>
	<a  href="/docs/sdk/core/api.html">
		SDKs
	</a>
	<a  class="on"  href="/docs/examples/session_cookie.html">
		Examples
	</a>

		</nav>

		<a href="#docs-body" id="scroll-top-button">Scroll to Top</a>

		
		<header>
			<a href="https://github.com/okta/okta.github.io/tree/master/_source/docs/examples/session_cookie.md" target="_blank" class="btn btn-default btn-sm btn-github"><i class="fa fa-github"></i> Edit on GitHub</a>
			<h1 class="h3">Session Cookie</h1>
		</header>
		

		<ul class="list-unstyled toc" id="markdown-toc">
  <li><a href="#overview">Overview</a></li>
  <li><a href="#retrieving-a-session-cookie-by-visiting-a-session-redirect-link">Retrieving a session cookie by visiting a session redirect link</a>    <ul>
      <li><a href="#validate-credentials--retrieve-a-one-time-token">Validate credentials &amp; retrieve a one-time token</a></li>
      <li><a href="#visit-session-redirect-url-with-the-one-time-token">Visit session redirect URL with the one-time token</a></li>
    </ul>
  </li>
  <li><a href="#retrieving-a-session-cookie-by-visiting-an-application-embed-link">Retrieving a session cookie by visiting an application embed link</a>    <ul>
      <li><a href="#validate-credentials--retrieve-a-one-time-token-1">Validate credentials &amp; retrieve a one-time token</a></li>
      <li><a href="#visit-an-embed-link-with-the-one-time-token">Visit an embed link with the one-time token</a></li>
      <li><a href="#initiate-a-saml-sso-with-the-one-time-token">Initiate a SAML SSO with the one-time token</a></li>
      <li><a href="#initiate-a-ws-federation-sso-with-the-one-time-token">Initiate a WS-Federation SSO with the one-time token</a></li>
    </ul>
  </li>
  <li><a href="#retrieving-a-session-cookie-with-a-hidden-image">Retrieving a session cookie with a hidden image</a>    <ul>
      <li><a href="#validate-credentials--retrieve-a-session-cookie-image-url">Validate credentials &amp; retrieve a session cookie image URL</a></li>
      <li><a href="#add-image-tag-with-session-cookie-image-url">Add image tag with session cookie image URL</a></li>
    </ul>
  </li>
</ul>

<h2 id="overview">Overview</h2>

<p>Okta utilizes a non-persistent HTTP session cookie to provide access to your Okta organization and applications across web requests for an interactive user-agents such as a browser.  This document provides examples for programmatically retrieving and setting a session cookie for different deployment scenarios to provide SSO capabilities for custom web applications built on the Okta platform.</p>

<p>Okta sessions are created and managed with the <a href="/docs/api/rest/sessions.html">Session API</a>.</p>

<h2 id="retrieving-a-session-cookie-by-visiting-a-session-redirect-link">Retrieving a session cookie by visiting a session redirect link</h2>

<p>This scenario is ideal for deployment scenarios where you have implemented both a custom login page and custom landing page for your application.  The login page will typically collect the user’s credentials via a HTML form submit or POST and the web application will validate the credentials against your Okta organization by calling the <a href="/docs/api/rest/sessions.html#create-session-with-one-time-token">Create Session</a> API to obtain a one-time token.</p>

<p>The generated one-time token along with the URL for your landing page can then be used to complete the following <a href="http://tools.ietf.org/html/rfc6570">URI Template</a> <code>https://your-subdomain.okta.com/login/sessionCookieRedirect?token={cookieToken}&amp;redirectUrl={redirectUrl}</code> that will retrieve a session cookie for a user’s browser when visited.</p>

<blockquote>
  <p>The one-time token may only be used <strong>once</strong> to establish a session.  If the session expires or the user logs out of Okta after using the token, they will not be able to reuse the same one-time token to get a new session cookie.</p>
</blockquote>

<h3 id="validate-credentials--retrieve-a-one-time-token">Validate credentials &amp; retrieve a one-time token</h3>

<p>When processing a user’s login request in your web application, retrieve an one-time token by passing the user’s credentials with the <code>cookieToken</code> additionalFields query param to the <a href="/docs/api/rest/sessions.html#create-session-with-one-time-token">Create Session</a> operation.</p>

<h4 class="api api-request api-request-example" id="request-example">Request Example</h4>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">POST</span> <span class="regexp"><span class="delimiter">/</span><span class="content">api</span><span class="delimiter">/</span></span>v1/sessions?additionalFields=cookieToken <span class="constant">HTTP</span>/<span class="float">1.1</span>
<span class="key">Host</span>: your-subdomain.okta.com
<span class="key">Authorization</span>: <span class="constant">SSWS</span> yourtoken
<span class="key">Accept</span>: application/json
<span class="constant">Content</span>-<span class="key">Type</span>: application/json

{
  <span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">art.vandelay@example.com</span><span class="delimiter">&quot;</span></span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">correct horse battery staple</span><span class="delimiter">&quot;</span></span>
}
</pre></div>
</div>
</div>

<h4 class="api api-response api-response-example" id="response-example">Response Example</h4>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">200</span> <span class="constant">OK</span>
<span class="constant">Content</span>-<span class="key">Type</span>: application/json

{
    <span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">000kYk6cDF7R02z4PxV5mhL4g</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">00u9apFCRAIKHVPZLGXT</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">mfaActive</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">false</span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieToken</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">009Db9G6Sc8o8VfE__SlGj4FPxaG63Wm89TpJnaDF6</span><span class="delimiter">&quot;</span></span>
}
</pre></div>
</div>
</div>

<h3 id="visit-session-redirect-url-with-the-one-time-token">Visit session redirect URL with the one-time token</h3>

<p>After your login flow is complete you often need to establish a session cookie for your own application as well as a session cookie for Okta before visiting your landing page.  This is accomplished by returning a HTTP redirect status code for the login response that includes both your app’s session cookie as well as the completed URI template with the one-time token for the Okta session redirect URL:
<code>https://your-subdomain.okta.com/login/sessionCookieRedirect?token={cookieToken}&amp;redirectUrl={redirectUrl}</code></p>

<blockquote>
  <p>Only the Okta session redirect URL with one-time token is required</p>
</blockquote>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">302</span> <span class="constant">Moved</span> <span class="constant">Temporarily</span>
<span class="constant">Set</span>-<span class="key">Cookie</span>: my_app_session_cookie_name=my_apps_session_cookie_value; <span class="constant">Path</span>=<span class="regexp"><span class="delimiter">/</span><span class="content">
Location: https:</span><span class="delimiter">/</span></span>/your-subdomain.okta.com/login/sessionCookieRedirect?token=<span class="integer">00</span><span class="integer">9</span><span class="constant">Db9G6Sc8o8VfE__SlGj4FPxaG63Wm89TpJnaDF6</span>&amp;redirectUrl=https%<span class="integer">3</span><span class="constant">A</span>%<span class="integer">2</span><span class="constant">F</span>%<span class="integer">2</span><span class="constant">Fwww</span>.example.com%<span class="integer">2</span><span class="constant">Fportal</span>%<span class="integer">2</span><span class="constant">Fhome</span>
</pre></div>
</div>
</div>

<p>The user’s browser will set your app’s session cookie and follow the redirect to Okta.  Okta will validate the one-time token and return a 302 status response that sets a session cookie for Okta and redirects the user’s browser back to your landing page.  After the page has loaded the user will have an active session with Okta and will be able to SSO into their applications until the session is expired or the user closes the session (logout) or browser application.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">GET</span> <span class="regexp"><span class="delimiter">/</span><span class="content">login</span><span class="delimiter">/</span><span class="modifier">session</span></span>CookieRedirect?token=<span class="integer">00</span><span class="integer">9</span><span class="constant">Db9G6Sc8o8VfE__SlGj4FPxaG63Wm89TpJnaDF6</span>&amp;redirectUrl=https%<span class="integer">3</span><span class="constant">A</span>%<span class="integer">2</span><span class="constant">F</span>%<span class="integer">2</span><span class="constant">Fwww</span>.example.com%<span class="integer">2</span><span class="constant">Fportal</span>%<span class="integer">2</span><span class="constant">Fhome</span> <span class="constant">HTTP</span>/<span class="float">1.1</span>
<span class="key">Host</span>: your-subdomain.okta.com
<span class="key">Accept</span>: *<span class="regexp"><span class="delimiter">/</span><span class="content">*
</span></span></pre></div>
</div>
</div>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">302</span> <span class="constant">Moved</span> <span class="constant">Temporarily</span>
<span class="constant">Set</span>-<span class="key">Cookie</span>: sid=<span class="integer">000</span>aC_z7AZKTpSqtHFc0Ak6Vg; <span class="constant">Path</span>=<span class="regexp"><span class="delimiter">/</span><span class="content">
Location: https:</span><span class="delimiter">/</span></span>/www.example.com/portal/home
</pre></div>
</div>
</div>

<h2 id="retrieving-a-session-cookie-by-visiting-an-application-embed-link">Retrieving a session cookie by visiting an application embed link</h2>

<p>This scenario is ideal for deployment scenarios where you have a custom login page but immediately want to launch an Okta application after login without returning to a landing page.  The login page will typically collect the user’s credentials via a HTML form submit or POST and validate the credentials against your Okta organization by calling the <a href="/docs/api/rest/sessions.html#create-session-with-one-time-token">Create Session</a> API to obtain a one-time token.</p>

<p>The generated one-time token can than be passed as a query parameter to an Okta application’s embed link that will set a session cookie as well as launch the application in a single web request.</p>

<blockquote>
  <p>The one-time token may only be used <strong>once</strong> to establish a session.  If the session expires or the user logs out of Okta after using the token, they will not be able to reuse the same one-time token to get a new session cookie.</p>
</blockquote>

<h3 id="validate-credentials--retrieve-a-one-time-token-1">Validate credentials &amp; retrieve a one-time token</h3>

<p>When processing a user’s login request in your web application, retrieve an one-time token by passing the user’s credentials with the <code>cookieToken</code> additionalFields query param to the <a href="/docs/api/rest/sessions.html#create-session-with-one-time-token">Create Session</a> operation.</p>

<h4 class="api api-request api-request-example" id="request-example-1">Request Example</h4>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">POST</span> <span class="regexp"><span class="delimiter">/</span><span class="content">api</span><span class="delimiter">/</span></span>v1/sessions?additionalFields=cookieToken <span class="constant">HTTP</span>/<span class="float">1.1</span>
<span class="key">Host</span>: your-subdomain.okta.com
<span class="key">Authorization</span>: <span class="constant">SSWS</span> yourtoken
<span class="key">Accept</span>: application/json
<span class="constant">Content</span>-<span class="key">Type</span>: application/json

{
  <span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">art.vandelay@example.com</span><span class="delimiter">&quot;</span></span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">correct horse battery staple</span><span class="delimiter">&quot;</span></span>
}
</pre></div>
</div>
</div>

<h4 class="api api-response api-response-example" id="response-example-1">Response Example</h4>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">200</span> <span class="constant">OK</span>
<span class="constant">Content</span>-<span class="key">Type</span>: application/json

{
    <span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">000kYk6cDF7R02z4PxV5mhL4g</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">00u9apFCRAIKHVPZLGXT</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">mfaActive</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">false</span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieToken</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">009Db9G6Sc8o8VfE__SlGj4FPxaG63Wm89TpJnaDF6</span><span class="delimiter">&quot;</span></span>
}
</pre></div>
</div>
</div>

<h3 id="visit-an-embed-link-with-the-one-time-token">Visit an embed link with the one-time token</h3>

<p>After your login flow is complete you can launch an Okta application for the user with an <a href="/docs/api/rest/users.html#get-assigned-app-links">embed link</a> that contains the the one-time token as a query parameter <code>onetimetoken</code>.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">302</span> <span class="constant">Moved</span> <span class="constant">Temporarily</span>
<span class="key">Location</span>: <span class="key">https</span>:<span class="regexp"><span class="delimiter">/</span><span class="delimiter">/</span></span>your-subdomain/app/google/go1013td3mXAQOJCHEHQ/mail?onetimetoken=<span class="integer">00</span><span class="integer">9</span><span class="constant">Db9G6Sc8o8VfE__SlGj4FPxaG63Wm89TpJnaDF6</span>
</pre></div>
</div>
</div>

<p>When the link is visited, the token in the request will be used to initiate the user’s session before processing the application launch request. A session cookie will be set in the browser and the user will have an active session with Okta and will be able to SSO into additional applications until the session is expired or the user closes the session (logout) or browser application.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">302</span> <span class="constant">Moved</span> <span class="constant">Temporarily</span>
<span class="constant">Set</span>-<span class="key">Cookie</span>: sid=<span class="integer">000</span>aC_z7AZKTpSqtHFc0Ak6Vg; <span class="constant">Path</span>=<span class="regexp"><span class="delimiter">/</span><span class="content">
Location: https:</span><span class="delimiter">/</span></span>/mail.google.com/a/your-subdomain
</pre></div>
</div>
</div>

<blockquote>
  <p>The HTTP response will vary depending on the specific Okta application but will always contain a <code>Set-Cookie</code> header.</p>
</blockquote>

<h3 id="initiate-a-saml-sso-with-the-one-time-token">Initiate a SAML SSO with the one-time token</h3>

<p>After your login flow is complete you can also initiate a SAML SSO into an Okta application for the user with either the <code>HTTP-Redirect</code> or <code>HTTP-POST</code>binding to the application’s SAML SSO URL
that contains the the one-time token as query parameter <code>onetimetoken</code>.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">GET</span> <span class="regexp"><span class="delimiter">/</span><span class="content">app</span><span class="delimiter">/</span></span>template_saml_2_0/kbiyMOIMHNLGHJNCBURM/sso/saml?<span class="constant">RelayState</span>=%<span class="integer">2</span><span class="constant">Fsome</span>%<span class="integer">2</span><span class="constant">Fdeep</span>%<span class="integer">2</span><span class="constant">Flink</span>&amp;onetimetoken=<span class="integer">00</span><span class="integer">9</span><span class="constant">Db9G6Sc8o8VfE__SlGj4FPxaG63Wm89TpJnaDF6</span> <span class="constant">HTTP</span>/<span class="float">1.1</span>
<span class="key">Host</span>: your-subdomain.okta.com
<span class="key">Accept</span>: *<span class="regexp"><span class="delimiter">/</span><span class="content">*
</span></span></pre></div>
</div>
</div>

<p>When the link is visited, the token in the request will be used to initiate the user’s session before processing the SAML SSO request. A session cookie will be set in the browser and the user will have an active session with Okta and will be able to SSO into additional applications until the session is expired or the user closes the session (logout) or browser application.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">200</span> <span class="constant">OK</span>
<span class="constant">Content</span>-<span class="key">Type</span>: text/html;charset=utf-<span class="integer">8</span>
<span class="constant">Set</span>-<span class="key">Cookie</span>: sid=<span class="integer">000</span>aC_z7AZKTpSqtHFc0Ak6Vg; <span class="constant">Path</span>=<span class="regexp"><span class="delimiter">/</span><span class="content">
&lt;html&gt;
&lt;body&gt;
    &lt;div&gt;
        &lt;form id=&quot;appForm&quot; action=&quot;https:</span><span class="delimiter">/</span></span>/sp.example.com/auth/saml20<span class="string"><span class="delimiter">&quot;</span><span class="content"> method=</span><span class="delimiter">&quot;</span></span><span class="constant">POST</span><span class="string"><span class="delimiter">&quot;</span><span class="content">&gt;
            &lt;input name=</span><span class="delimiter">&quot;</span></span><span class="constant">SAMLResponse</span><span class="string"><span class="delimiter">&quot;</span><span class="content"> type=</span><span class="delimiter">&quot;</span></span>hidden<span class="string"><span class="delimiter">&quot;</span><span class="content"> value=</span><span class="delimiter">&quot;</span></span><span class="constant">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c2FtbDJwOlJlc3BvbnNlIHhtbG5zOnNhbWwycD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnByb3RvY29sIiBEZXN0aW5hdGlvbj0iaHR0cHM6Ly9va3RhcHMxLm9rdGEuY29tL2F1dGgvc2FtbDIwL2thcmwiIElEPSJpZDEzODE1MzU1NjY3MTAwODkwMDAxMzkzODMwOTY2IiBJc3N1ZUluc3RhbnQ9IjIwMTMtMTAtMTFUMjM6NTI6NDYuNjk4WiIgVmVyc2lvbj0iMi4wIj48c2FtbDI6SXNzdWVyIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIiBGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpuYW1laWQtZm9ybWF0OmVudGl0eSI</span>+aHR0cDovL3d3dy5va3RhLmNvbS9rYml5TU9JTUhOTEdISk5DQlVSTTwvc2FtbDI6SXNzdWVyPjxkczpTaWduYXR1cmUgeG1sbnM6ZHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiPjxkczpTaWduZWRJbmZvPjxkczpDYW5vbmljYWxpemF0aW9uTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jIi8+<span class="constant">PGRzOlNpZ25hdHVyZU1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNyc2Etc2hhMSIvPjxkczpSZWZlcmVuY2UgVVJJPSIjaWQxMzgxNTM1NTY2NzEwMDg5MDAwMTM5MzgzMDk2NiI</span>+<span class="constant">PGRzOlRyYW5zZm9ybXM</span>+<span class="constant">PGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNlbnZlbG9wZWQtc2lnbmF0dXJlIi8</span>+<span class="constant">PGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4Yy1jMTRuIyIvPjwvZHM6VHJhbnNmb3Jtcz48ZHM6RGlnZXN0TWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3NoYTEiLz48ZHM6RGlnZXN0VmFsdWU</span>+enNDNjJuOUI3S1RxN1pZdG5YM3M2dW9jYXRBPTwvZHM6RGlnZXN0VmFsdWU+<span class="constant">PC9kczpSZWZlcmVuY2U</span>+<span class="constant">PC9kczpTaWduZWRJbmZvPjxkczpTaWduYXR1cmVWYWx1ZT5aZ3YvamFJdkpGSW9EV29GRnUyM0dJVVJLSU9JMUdOd2FmWXhZbmdWY01pRnQ5UTRwOS9MQUhMSXVKYzhjdXh4UmlmYlpza1ZlRWh1TG1xV3JSSFpMRHh2djJ4Wm15eUM4UGlSc2xFSGlzMEhhQTY3bDF3dlBaTURTSWxhV3lJaFFzVkppVE90Nk9GSXpjNkZwZEFZVWU0Y3ptcEEyaW4vK2RmQTl0S1dYbkU9PC9kczpTaWduYXR1cmVWYWx1ZT48ZHM6S2V5SW5mbz48ZHM6WDUwOURhdGE</span>+<span class="constant">PGRzOlg1MDlDZXJ0aWZpY2F0ZT5NSUlDblRDQ0FnYWdBd0lCQWdJR0FTbE1OYXdETUEwR0NTcUdTSWIzRFFFQkJRVUFNSUdSTVFzd0NRWURWUVFHRXdKVlV6RVRNQkVHCkExVUVDQXdLUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnd3TlUyRnVJRVp5WVc1amFYTmpiekVOTUFzR0ExVUVDZ3dFVDJ0MFlURVUKTUJJR0ExVUVDd3dMVTFOUFVISnZkbWxrWlhJeEVqQVFCZ05WQkFNTUNXSnZiM1J6ZEhKaGNERWNNQm9HQ1NxR1NJYjNEUUVKQVJZTgphVzVtYjBCdmEzUmhMbU52YlRBZUZ3MHhNREEyTVRneE56VTJOVEphRncwME1EQTJNVGd4TnpVM05USmFNSUdSTVFzd0NRWURWUVFHCkV3SlZVekVUTUJFR0ExVUVDQXdLUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnd3TlUyRnVJRVp5WVc1amFYTmpiekVOTUFzR0ExVUUKQ2d3RVQydDBZVEVVTUJJR0ExVUVDd3dMVTFOUFVISnZkbWxrWlhJeEVqQVFCZ05WQkFNTUNXSnZiM1J6ZEhKaGNERWNNQm9HQ1NxRwpTSWIzRFFFSkFSWU5hVzVtYjBCdmEzUmhMbU52YlRDQm56QU5CZ2txaGtpRzl3MEJBUUVGQUFPQmpRQXdnWWtDZ1lFQWtIUDlpSGNYCnRja0ZVMmliNkpWUTNVUDRaMDFoc1QyWXh1ZUhqa2pxL0Z3N1o3aEtueDMwb0JBeFl6dGxUZitsSVpjVWlRVnc5WUF2NVVKNC9uaEMKSTdiQmM2SVVuYnIzUTZ5NitjbWJ1VlVnaVhodzVsTTR5a2tMQ2dLZ01uVk5hcHRYNGt4RGY0ZGVRbEorS0pLeFdDWjN5TXR5aEZYZQo0bUtvbUwxQzRyc0NBd0VBQVRBTkJna3Foa2lHOXcwQkFRVUZBQU9CZ1FBbVJEODBnMVYzU2lNYjdEdHZwMG1CZWk5elczaEw3Y0RYCnV2ZFlBMXU0Vmhhais1bWppYVJ5QlFDODJLaU1UZ1l4MGExOWZGeUVRWHlwcGU0Nzh3MUNBUFFBbjhIWEFMVHR3WUJpMUgvbHpKRTUKaU5MRE55dWVtTjhaUVV5TTFNeVNYbDhiVmNRSE4wZmpnOWVmWG9kYkw4VzVhLzZwTW9Mc2NaaDJHTUsrVkE9PTwvZHM6WDUwOUNlcnRpZmljYXRlPjwvZHM6WDUwOURhdGE</span>+<span class="constant">PC9kczpLZXlJbmZvPjwvZHM6U2lnbmF0dXJlPjxzYW1sMnA6U3RhdHVzIHhtbG5zOnNhbWwycD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnByb3RvY29sIj48c2FtbDJwOlN0YXR1c0NvZGUgVmFsdWU9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpzdGF0dXM6U3VjY2VzcyIvPjwvc2FtbDJwOlN0YXR1cz48c2FtbDI6QXNzZXJ0aW9uIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIiBJRD0iaWQxMzgxNTM1NTY2NzE0OTg5MDAwMjMxOTQzNDgiIElzc3VlSW5zdGFudD0iMjAxMy0xMC0xMVQyMzo1Mjo0Ni42OThaIiBWZXJzaW9uPSIyLjAiPjxzYW1sMjpJc3N1ZXIgRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6bmFtZWlkLWZvcm1hdDplbnRpdHkiIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj5odHRwOi8vd3d3Lm9rdGEuY29tL2tiaXlNT0lNSE5MR0hKTkNCVVJNPC9zYW1sMjpJc3N1ZXI</span>+<span class="constant">PGRzOlNpZ25hdHVyZSB4bWxuczpkcz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI</span>+<span class="constant">PGRzOlNpZ25lZEluZm8</span>+<span class="constant">PGRzOkNhbm9uaWNhbGl6YXRpb25NZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3htbC1leGMtYzE0biMiLz48ZHM6U2lnbmF0dXJlTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3JzYS1zaGExIi8</span>+<span class="constant">PGRzOlJlZmVyZW5jZSBVUkk9IiNpZDEzODE1MzU1NjY3MTQ5ODkwMDAyMzE5NDM0OCI</span>+<span class="constant">PGRzOlRyYW5zZm9ybXM</span>+<span class="constant">PGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNlbnZlbG9wZWQtc2lnbmF0dXJlIi8</span>+<span class="constant">PGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4Yy1jMTRuIyIvPjwvZHM6VHJhbnNmb3Jtcz48ZHM6RGlnZXN0TWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3NoYTEiLz48ZHM6RGlnZXN0VmFsdWU</span>+<span class="constant">LzRvakxrbFE3SDVLVlQvYXhMSk9nVEttQkRRPTwvZHM6RGlnZXN0VmFsdWU</span>+<span class="constant">PC9kczpSZWZlcmVuY2U</span>+<span class="constant">PC9kczpTaWduZWRJbmZvPjxkczpTaWduYXR1cmVWYWx1ZT5OSGNxQVJGT2FHd2N3bVlyRklMeTlGendnWDZDenVMcDlhQm5UZkxXdFpic0tOWFRvSS92dG9GVjhDMzFEOUlKVlVoOVhNcmtQckN4Q2VZZGczdnlUbmx5dG80SlJ1TlR2elhncFBEcGlDZ2RGaWhHeFJPRk9JVFhoQkdkRFNXbVdkYkNuQWJDZzBWT2xlZHNnQjMxTExudXFJaGIxSGJGVy9ZeFBhUTRmbEU9PC9kczpTaWduYXR1cmVWYWx1ZT48ZHM6S2V5SW5mbz48ZHM6WDUwOURhdGE</span>+<span class="constant">PGRzOlg1MDlDZXJ0aWZpY2F0ZT5NSUlDblRDQ0FnYWdBd0lCQWdJR0FTbE1OYXdETUEwR0NTcUdTSWIzRFFFQkJRVUFNSUdSTVFzd0NRWURWUVFHRXdKVlV6RVRNQkVHCkExVUVDQXdLUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnd3TlUyRnVJRVp5WVc1amFYTmpiekVOTUFzR0ExVUVDZ3dFVDJ0MFlURVUKTUJJR0ExVUVDd3dMVTFOUFVISnZkbWxrWlhJeEVqQVFCZ05WQkFNTUNXSnZiM1J6ZEhKaGNERWNNQm9HQ1NxR1NJYjNEUUVKQVJZTgphVzVtYjBCdmEzUmhMbU52YlRBZUZ3MHhNREEyTVRneE56VTJOVEphRncwME1EQTJNVGd4TnpVM05USmFNSUdSTVFzd0NRWURWUVFHCkV3SlZVekVUTUJFR0ExVUVDQXdLUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnd3TlUyRnVJRVp5WVc1amFYTmpiekVOTUFzR0ExVUUKQ2d3RVQydDBZVEVVTUJJR0ExVUVDd3dMVTFOUFVISnZkbWxrWlhJeEVqQVFCZ05WQkFNTUNXSnZiM1J6ZEhKaGNERWNNQm9HQ1NxRwpTSWIzRFFFSkFSWU5hVzVtYjBCdmEzUmhMbU52YlRDQm56QU5CZ2txaGtpRzl3MEJBUUVGQUFPQmpRQXdnWWtDZ1lFQWtIUDlpSGNYCnRja0ZVMmliNkpWUTNVUDRaMDFoc1QyWXh1ZUhqa2pxL0Z3N1o3aEtueDMwb0JBeFl6dGxUZitsSVpjVWlRVnc5WUF2NVVKNC9uaEMKSTdiQmM2SVVuYnIzUTZ5NitjbWJ1VlVnaVhodzVsTTR5a2tMQ2dLZ01uVk5hcHRYNGt4RGY0ZGVRbEorS0pLeFdDWjN5TXR5aEZYZQo0bUtvbUwxQzRyc0NBd0VBQVRBTkJna3Foa2lHOXcwQkFRVUZBQU9CZ1FBbVJEODBnMVYzU2lNYjdEdHZwMG1CZWk5elczaEw3Y0RYCnV2ZFlBMXU0Vmhhais1bWppYVJ5QlFDODJLaU1UZ1l4MGExOWZGeUVRWHlwcGU0Nzh3MUNBUFFBbjhIWEFMVHR3WUJpMUgvbHpKRTUKaU5MRE55dWVtTjhaUVV5TTFNeVNYbDhiVmNRSE4wZmpnOWVmWG9kYkw4VzVhLzZwTW9Mc2NaaDJHTUsrVkE9PTwvZHM6WDUwOUNlcnRpZmljYXRlPjwvZHM6WDUwOURhdGE</span>+<span class="constant">PC9kczpLZXlJbmZvPjwvZHM6U2lnbmF0dXJlPjxzYW1sMjpTdWJqZWN0IHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj48c2FtbDI6TmFtZUlEIEZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6MS4xOm5hbWVpZC1mb3JtYXQ6ZW1haWxBZGRyZXNzIj5mcmVkZmxpbnRzdG9uZUByaW5jb25oaWxsLmNvbTwvc2FtbDI6TmFtZUlEPjxzYW1sMjpTdWJqZWN0Q29uZmlybWF0aW9uIE1ldGhvZD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmNtOmJlYXJlciI</span>+<span class="constant">PHNhbWwyOlN1YmplY3RDb25maXJtYXRpb25EYXRhIE5vdE9uT3JBZnRlcj0iMjAxMy0xMC0xMVQyMzo1Nzo0Ni43MTdaIiBSZWNpcGllbnQ9Imh0dHBzOi8vb2t0YXBzMS5va3RhLmNvbS9hdXRoL3NhbWwyMC9rYXJsIi8</span>+<span class="constant">PC9zYW1sMjpTdWJqZWN0Q29uZmlybWF0aW9uPjwvc2FtbDI6U3ViamVjdD48c2FtbDI6Q29uZGl0aW9ucyBOb3RCZWZvcmU9IjIwMTMtMTAtMTFUMjM6NDc6NDYuNzE3WiIgTm90T25PckFmdGVyPSIyMDEzLTEwLTExVDIzOjU3OjQ2LjcxN1oiIHhtbG5zOnNhbWwyPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj48c2FtbDI6QXVkaWVuY2VSZXN0cmljdGlvbj48c2FtbDI6QXVkaWVuY2U</span>+aHR0cHM6Ly93d3cub2t0YS5jb20vc2FtbDIvc2VydmljZS1wcm92aWRlci9zcGJmZHY5MnFLU0JUR1VZR1VQTzwvc2FtbDI6QXVkaWVuY2U+<span class="constant">PC9zYW1sMjpBdWRpZW5jZVJlc3RyaWN0aW9uPjwvc2FtbDI6Q29uZGl0aW9ucz48c2FtbDI6QXV0aG5TdGF0ZW1lbnQgQXV0aG5JbnN0YW50PSIyMDEzLTEwLTExVDIzOjUyOjQ2LjY5OFoiIFNlc3Npb25JbmRleD0iaWQxMzgxNTM1NTY2Njk4LjY4MDQ3Mjc3IiB4bWxuczpzYW1sMj0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiI</span>+<span class="constant">PHNhbWwyOkF1dGhuQ29udGV4dD48c2FtbDI6QXV0aG5Db250ZXh0Q2xhc3NSZWY</span>+dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFjOmNsYXNzZXM6UGFzc3dvcmRQcm90ZWN0ZWRUcmFuc3BvcnQ8L3NhbWwyOkF1dGhuQ29udGV4dENsYXNzUmVmPjwvc2FtbDI6QXV0aG5Db250ZXh0Pjwvc2FtbDI6QXV0aG5TdGF0ZW1lbnQ+<span class="constant">PC9zYW1sMjpBc3NlcnRpb24</span>+<span class="constant">PC9zYW1sMnA6UmVzcG9uc2U</span>+<span class="string"><span class="delimiter">&quot;</span><span class="content">/&gt;
            &lt;input name=</span><span class="delimiter">&quot;</span></span><span class="constant">RelayState</span><span class="string"><span class="delimiter">&quot;</span><span class="content"> type=</span><span class="delimiter">&quot;</span></span>hidden<span class="string"><span class="delimiter">&quot;</span><span class="content"> value=</span><span class="delimiter">&quot;</span></span>/some/deep/link<span class="string"><span class="delimiter">&quot;</span><span class="content">/&gt;
        &lt;/form&gt;

        &lt;script type=</span><span class="delimiter">&quot;</span></span>text/javascript<span class="string"><span class="delimiter">&quot;</span><span class="content">&gt;

          $(function(){
            document.getElementById('appForm').submit();
          });
      &lt;/script&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</span></span></pre></div>
</div>
</div>

<h3 id="initiate-a-ws-federation-sso-with-the-one-time-token">Initiate a WS-Federation SSO with the one-time token</h3>

<p>You can also use the same <a href="#initiate-a-saml-sso-with-the-one-time-token">flow as SAML</a> for template WS-Federation application as well by passing the one-time token as query parameter <code>onetimetoken</code>.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">GET</span> <span class="regexp"><span class="delimiter">/</span><span class="content">app</span><span class="delimiter">/</span></span>template_wsfed/k9x69oiKYSUWMIYZBKTY/sso/wsfed/passive?wa=wsignin1.<span class="error">0</span>&amp;wtrealm=https%<span class="integer">3</span><span class="constant">A</span>%<span class="integer">2</span><span class="constant">F</span>%<span class="integer">2</span><span class="constant">Fexample</span>.com%<span class="integer">2</span><span class="constant">FApp</span>%<span class="integer">2</span><span class="constant">F</span>&amp;wctx=rm%<span class="integer">3</span><span class="constant">D0</span>%<span class="integer">26</span>id%<span class="integer">3</span><span class="constant">Dpassive</span>%<span class="integer">26</span>ru%<span class="integer">3</span><span class="constant">D</span>%<span class="integer">2</span><span class="constant">FApp</span>%<span class="integer">2</span><span class="constant">FHome</span>%<span class="integer">2</span><span class="constant">FAbout</span>&amp;onetimetoken=<span class="integer">00</span><span class="integer">9</span><span class="constant">Db9G6Sc8o8VfE__SlGj4FPxaG63Wm89TpJnaDF6</span> <span class="constant">HTTP</span>/<span class="float">1.1</span>
<span class="key">Host</span>: your-subdomain.okta.com
<span class="key">Accept</span>: *<span class="regexp"><span class="delimiter">/</span><span class="content">*
</span></span></pre></div>
</div>
</div>

<h2 id="retrieving-a-session-cookie-with-a-hidden-image">Retrieving a session cookie with a hidden image</h2>

<p>This flow uses a browser trick to establish a session by setting a cookie when retrieving a transparent 1x1 image with a one-time token.  Your login page will typically collect the user’s credentials via a HTML form submit or POST and validate the credentials against your Okta organization by calling the <a href="/docs/api/rest/sessions.html#create-session-with-embed-image-url">Create Session</a> API to obtain a session cookie image URL with a one-time token.</p>

<blockquote>
  <p>This flow is now deprecated as some major browser vendors such as Safari block cookies from 3rd-party sites by default.  Please use an alternative flow as browser vendors are increasingly blocking cookies from 3rd party sites by default</p>
</blockquote>

<h3 id="validate-credentials--retrieve-a-session-cookie-image-url">Validate credentials &amp; retrieve a session cookie image URL</h3>

<p>When processing a user’s login request in your web application, retrieve a session cookie image URL by passing the user’s credentials with the <code>cookieTokenUrl</code> additionalFields query param to the <a href="/docs/api/rest/sessions.html#create-session-with-embed-image-url">Create Session</a> operation.</p>

<h4 class="api api-request api-request-example" id="request-example-2">Request Example</h4>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">POST</span> <span class="regexp"><span class="delimiter">/</span><span class="content">api</span><span class="delimiter">/</span></span>v1/sessions?additionalFields=cookieTokenUrl <span class="constant">HTTP</span>/<span class="float">1.1</span>
<span class="key">Host</span>: your-subdomain.okta.com
<span class="key">Authorization</span>: <span class="constant">SSWS</span> yourtoken
<span class="key">Accept</span>: application/json
<span class="constant">Content</span>-<span class="key">Type</span>: application/json

{
  <span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">art.vandelay@example.com</span><span class="delimiter">&quot;</span></span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">correct horse battery staple</span><span class="delimiter">&quot;</span></span>
}
</pre></div>
</div>
</div>

<h4 class="api api-response api-response-example" id="response-example-2">Response Example</h4>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">200</span> <span class="constant">OK</span>
<span class="constant">Content</span>-<span class="key">Type</span>: application/json

{
    <span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">000kYk6cDF7R02z4PxV5mhL4g</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">00u9apFCRAIKHVPZLGXT</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">mfaActive</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">false</span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieTokenUrl</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://your-subdomain.okta.com/login/sessionCookie?token=00nwBmuBFS4o2E5l58eSbgnr4NmY0-ELQR4Pvn2RZV</span><span class="delimiter">&quot;</span></span>
}
</pre></div>
</div>
</div>

<h3 id="add-image-tag-with-session-cookie-image-url">Add image tag with session cookie image URL</h3>

<p>When you are ready to establish a session with Okta for the user, include the session cookie image URL in an image tag.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https://your-subdomain.okta.com/login/sessionCookie?token=00nwBmuBFS4o2E5l58eSbgnr4NmY0-ELQR4Pvn2RZV</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
</pre></div>
</div>
</div>

<p>When the page containing the tag is loaded, the token in the request will be used to initiate the user’s session, and a session cookie will be set in the browser. The image that renders is a 1x1 transparent image. After the page has loaded the user will have an active session with Okta and will be able to SSO into their applications. The token is a one-time token, so successive page loads will have no impact on the user’s session. If the user logs out of Okta after using the token, they will not be able to reuse that same token to get a session cookie.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="constant">HTTP</span>/<span class="float">1.1</span> <span class="integer">200</span> <span class="constant">OK</span>
<span class="constant">Content</span>-<span class="key">Type</span>: image/png
<span class="constant">Set</span>-<span class="key">Cookie</span>: sid=<span class="integer">000</span><span class="constant">O8P2OlZLTHuz4RZV8locXA</span>; <span class="constant">Path</span>=<span class="regexp"><span class="delimiter">/</span><span class="content">
</span></span></pre></div>
</div>
</div>

	</div>
	
<!-- Remarketing tag -->
	<script type="text/javascript">
		/* <![CDATA[ */
		var google_conversion_id = 1006913831;
		var google_custom_params = window.google_tag_params;
		var google_remarketing_only = true;
		/* ]]> */
	</script>
	<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
	</script>
	<noscript>
		<div style="display:inline;">
			<img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"/>
		</div>
	</noscript>
<!-- End Remarketing tag -->

<!-- Crazy Egg Tracking -->
<script type="text/javascript">
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>
<!-- End Crazy Egg Tracking -->

<footer class="site-footer">
	<div class="wrap">

		<ul>
			<li><a href="http://www.okta.com" target="_blank">Okta.com</a></li>
			<li><a href="/blog">Blog</a></li>
			<li><a href="/terms/">Terms &amp; Conditions</a></li>
			<li><a href="/privacy/">Privacy Policy</a></li>
			<li><a href="http://okta.com/developer/contact/">Contact Sales</a></li>
			<li><a href="mailto:developers@okta.com">Contact Support</a></li>
		</ul>

		<ul>
			<li><a class="icon-with-hover--github" href="http://github.com/okta" target="_blank">Github</a></li>
			<li><a class="icon-with-hover--twitter" href="http://twitter.com/okta" target="_blank">Twitter</a></li>
			<li><a class="icon-with-hover--stack-overflow" href="http://stackoverflow.com/search?q=okta" target="_blank">Stack Overflow</a></li>
			<li><a class="icon-with-hover--rss" href="http://feeds.feedburner.com/OktaBlog" target="_blank">News</a></li>
			<li><a class="icon-with-hover--help" href="http://community.okta.com" target="_blank">Help</a></li>
		</ul>

	</div>
</footer>

</section>
		
		
			
	</div>	
</body>
	
</html>