<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
<head>
  <script>
    var isProduction = window.location.hostname === 'developer.okta.com';
    if (isProduction) {
      // TypeKit
      (function(d) {
        var config = {
          kitId: 'jff5neq',
          scriptTimeout: 3000,
          async: true
        },
        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
      })(document);

      // Google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-15777010-3', 'auto');
      ga('send', 'pageview');

      // START Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TJ45R6');
      // END Google Tag Manager
    }
	</script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 	
  <link type="text/css" rel="stylesheet" href="/assets/animate-ec43d72c3ed45e08a460b8a2966d8dba6006aebfa0530935c3973fa493a8771f.css">
  <link type="text/css" rel="stylesheet" href="/assets/okta-c9d8d47e5d0b2c3f60c41beea5371ccb83174ddc23c0f090acf1ae9a6735cb31.css">
  
  
  <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico">
  <title>Okta Auth SDK | Okta Developer</title>
  <meta name="description" content="A Javascript wrapper for Okta's Authentication APIs. Build your own branded UI and power sign-in with Okta.">
  <link rel="canonical" href="https://developer.okta.com/code/javascript/okta_auth_sdk">
  <link rel="alternate" type="application/rss+xml" title="Okta Developer" href="https://developer.okta.com/feed.xml"><!-- GA -->
</head>

<body>
  <div class="Page okta-auth-sdk">
    <!-- START Header -->
    
<header id="header">
      <div class="Wrap">
        <h1 class="logo"><a href="/">Okta</a></h1><!-- START Primary Nav -->
        <nav>
          <div id="top-nav">
            <a href="#" id="mobile-close" class="mobile-toggle">
              <span></span>
              <span></span>
            </a>
            <a class="Button--green" href="https://developer.okta.com/signup/" id="top-nav-cta">Get Started</a>
            <a class="SearchIcon" href="#"></a>
            <ul>
              <li>
                <a href="/product/">Product</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/code/">Code</a>
              </li>
              <li class="has-dropdown">
                <a href="#">Support</a>
                <div class="dropdown-window">
                  <p class="devforum">Post your question on <a href="https://devforum.okta.com/" title="Okta Developer Forums" target="_blank">Okta Developer Forums</a></p>
                  <p class="email">Email us:<br>
                  <a href="mailto:developers@okta.com">developers@okta.com</a></p>
                  <p class="tel">Call us:<br>
                  <a href="tel:18887227871">1 (888) 722-7871</a></p>
                </div>
              </li>
            </ul>
            <form id="form_search" method="get" action="/search/" name="form_search">
              <input type="text" name="q" id="q" autocomplete="off">
            </form>
          </div>
          <div id="mobile-nav">
            <a id="mobile-search" href="/search/"><span class="icon-search-light"></span></a>
            <a id="mobile-open" class="mobile-toggle" href="#top-nav">
              <span></span>
              <span></span>
              <span></span>
            </a>
          </div>
        </nav><!-- END Primary Nav -->
      </div>
    </header>

    <!-- END Header -->
     <!-- START Page Center w/Sub Nav & Content -->
    <section class="PageContent DynamicSidebar has-tableOfContents">
      <!-- START Fixed sidebar --><aside class="Sidebar">
        <h2 class="Sidebar-location Sidebar-toggle h6">Navigation</h2>
        <div class="Sidebar-close Sidebar-toggle"></div>
        <div>
          <h3 class="Sidebar-title">Use Cases</h3>
          <ul class="Sidebar-nav">
            <li>
              <a href="/use_cases/authentication/">Authentication</a>
            </li>
            <li>
              <a href="/use_cases/mfa/">Multi-Factor Authentication</a>
            </li>
            <li>
              <a href="/use_cases/api_access_management/">API Access Management</a>
            </li>
            <li>
              <a href="/use_cases/integrate_with_okta/">Integrate with Okta</a>
            </li>
          </ul>
          <h3 class="Sidebar-title">Reference</h3>
          <ul class="Sidebar-nav">
            <li>
              <a href="/docs/api/getting_started/api_test_client.html">Getting Started</a>
            </li>
            <li>
              <a href="/docs/api/resources/authn.html">Authentication Reference</a>
            </li>
            <li>
              <a href="/docs/api/resources/apps.html">API Reference</a>
            </li>
            <li>
              <a href="/reference/error_codes/">Error Codes</a>
            </li>
            <li>
              <a href="/reference/okta_expression_language/">Okta Expression Language</a>
            </li>
            <li>
              <a href="/docs/platform-release-notes/platform-release-notes.html">Platform Release Notes</a>
            </li>
          </ul>

          <h3 class="Sidebar-title">Standards</h3>
          <ul class="Sidebar-nav">
            
            
            
            <li>
              <a href="/standards/OAuth/">OAuth 2.0 and Okta</a>
            </li>
            
            
            <li>
              <a href="/standards/OIDC/">OpenID Connect and Okta</a>
            </li>
            
            
            <li>
              <a href="/standards/SAML/">SAML</a>
            </li>
            
            
            
            
            <li>
              <a href="/standards/SCIM/">SCIM Provisioning with Lifecycle Management</a>
            </li>
            
          </ul>
          <script>
            if (document.querySelectorAll("#Sidebar_Resources .is-active").length) {
                document.getElementById('Sidebar_Resources').classList.remove('Sidebar-hide');
            }

            if (document.querySelectorAll("#Sidebar_References .is-active").length) {
                document.getElementById('Sidebar_References').classList.remove('Sidebar-hide');
            }
          </script>
        </div>
      </aside>
<!-- END Fixed sidebar -->
      <!-- START Page Content -->
      <div class="PageContent-main" id="docs-body">
        <a id="edit-link" href="https://github.com/okta/okta.github.io/edit/master/_source/_code/javascript/okta_auth_sdk.md">Edit Page</a>
      <h1 id="overview">Overview</h1>

<p>The Okta Auth SDK builds on top of our <a href="/docs/api/resources/authn.html">Authentication API</a> and <a href="/docs/api/resources/oidc.html">OAuth 2.0 API</a> to enable you to create a fully branded sign-in experience using JavaScript.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>An Okta org - Register for <a href="https://www.okta.com/developer/signup/">Okta Developer Edition</a> if you don’t have an existing org</li>
  <li>A domain that is <a href="/docs/api/getting_started/enabling_cors.html">CORS enabled for your org</a></li>
</ul>

<h2 id="installation">Installation</h2>

<p>Include the following script tag in your target web page:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ok1static.oktacdn.com/assets/js/sdk/okta-auth-js/1.8.0/okta-auth-js.min.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
</div>

<h2 id="authentication-flow">Authentication Flow</h2>

<p>The goal of an authentication flow is to set an Okta session cookie on the user’s browser.</p>

<p>All Auth SDK methods return <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a>, deferred objects that resolve when the method has finished. For more information about why Promises are useful, and how to use our specific promise library, check out the <a href="https://github.com/kriskowal/q">Q.js readme</a>.</p>

<p>An example authentication flow would look like this:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">authClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OktaAuth</span><span class="p">({</span><span class="na">url</span><span class="p">:</span> <span class="s1">'https://your-org.okta.com'</span><span class="p">});</span>
<span class="nx">authClient</span><span class="p">.</span><span class="nx">signIn</span><span class="p">({</span>
  <span class="na">username</span><span class="p">:</span> <span class="s1">'some-username'</span><span class="p">,</span>
  <span class="na">password</span><span class="p">:</span> <span class="s1">'some-password'</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">transaction</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// On success</span>
  <span class="k">switch</span><span class="p">(</span><span class="nx">transaction</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">case</span> <span class="s1">'SUCCESS'</span><span class="err">:</span>
      <span class="nx">authClient</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">setCookieAndRedirect</span><span class="p">(</span><span class="nx">transaction</span><span class="p">.</span><span class="nx">sessionToken</span><span class="p">);</span> <span class="c1">// Sets a cookie on redirect</span>
      <span class="k">break</span><span class="p">;</span>

    <span class="nl">default</span><span class="p">:</span>
      <span class="k">throw</span> <span class="s1">'We cannot handle the '</span> <span class="o">+</span> <span class="nx">transaction</span><span class="p">.</span><span class="nx">status</span> <span class="o">+</span> <span class="s1">' status'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// On failure</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="transactions">Transactions</h2>

<p>When Auth SDK methods resolve, they return a Transaction object that encapsulates the new state in the authentication flow. This Transaction object contains metadata about the current state, and methods that can be used to progress to the next state.</p>

<p>More information about Transaction states, their definitions, and the flow between them can be found in our <a href="/docs/api/resources/authn.html#transaction-state">Authentication API documentation</a>.</p>

<h3 id="transaction-states">Transaction States</h3>

<blockquote>
  <p>Keep in mind:</p>

  <ul>
    <li>
      <p>Methods listed for a state are not always guaranteed to be available.</p>
    </li>
    <li>
      <p><code class="highlighter-rouge">stateToken</code> is never required as a parameter.</p>
    </li>
    <li>
      <p>All transactions have a <code class="highlighter-rouge">data</code> attribute that contains the response body as an object.</p>
    </li>
  </ul>
</blockquote>

<h4 id="locked-out">Locked Out</h4>

<p>The user account is locked; self-service unlock or admin unlock is required.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">LOCKED_OUT</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">unlock</code></td>
      <td>Function</td>
      <td><a href="/docs/api/resources/authn.html#unlock-account">Parameters</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">transaction</span><span class="p">.</span><span class="nx">unlock</span><span class="p">({</span>
  <span class="na">username</span><span class="p">:</span> <span class="s1">'dade.murphy@example.com'</span><span class="p">,</span>
  <span class="na">factorType</span><span class="p">:</span> <span class="s1">'EMAIL'</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="password-expired">Password Expired</h4>

<p>The user’s password was successfully validated but is expired.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">PASSWORD_EXPIRED</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the transaction will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">changePassword</code></td>
      <td>Function</td>
      <td><a href="/docs/api/resources/authn.html#change-password">Parameters</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">transaction</span><span class="p">.</span><span class="nx">changePassword</span><span class="p">({</span>
  <span class="na">oldPassword</span><span class="p">:</span> <span class="s1">'0ldP4ssw0rd'</span><span class="p">,</span>
  <span class="na">newPassword</span><span class="p">:</span> <span class="s1">'N3wP4ssw0rd'</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="password-reset">Password Reset</h4>

<p>The user successfully answered their recovery question and can set a new password.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">PASSWORD_RESET</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the transaction will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">resetPassword</code></td>
      <td>Function</td>
      <td><a href="/docs/api/resources/authn.html#reset-password">Parameters</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">transaction</span><span class="p">.</span><span class="nx">resetPassword</span><span class="p">({</span>
  <span class="na">newPassword</span><span class="p">:</span> <span class="s1">'N3wP4ssw0rd'</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="password-almost-expired">Password Almost Expired</h4>

<p>The user’s password was successfully validated but is about to expire and should be changed.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">PASSWORD_WARN</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the transaction will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">policy</code></td>
      <td><a href="/docs/api/resources/authn#password-policy-object">Policy</a></td>
      <td>Password requirements</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">changePassword</code></td>
      <td>Function</td>
      <td><a href="/docs/api/resources/authn.html#change-password">Parameters</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">skip</code></td>
      <td>Function</td>
      <td>Ignore the warning and continue</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">transaction</span><span class="p">.</span><span class="nx">changePassword</span><span class="p">({</span>
  <span class="na">oldPassword</span><span class="p">:</span> <span class="s1">'0ldP4ssw0rd'</span><span class="p">,</span>
  <span class="na">newPassword</span><span class="p">:</span> <span class="s1">'N3wP4ssw0rd'</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="recovery">Recovery</h4>

<p>The user has requested a recovery token to reset their password or unlock their account.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">RECOVERY</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">recoveryType</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">PASSWORD</code> or <code class="highlighter-rouge">UNLOCK</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">answer</code></td>
      <td>Function</td>
      <td><a href="/docs/api/resources/authn#answer-recovery-question">Parameters</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">transaction</span><span class="p">.</span><span class="nx">answer</span><span class="p">({</span>
  <span class="na">answer</span><span class="p">:</span> <span class="s1">'My favorite recovery question answer'</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="verify-recovery">Verify Recovery</h4>

<p>The user must verify the factor-specific recovery challenge.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">RECOVERY_CHALLENGE</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the transaction will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factorType</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">EMAIL</code> or <code class="highlighter-rouge">SMS</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">recoveryType</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">PASSWORD</code> or <code class="highlighter-rouge">UNLOCK</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">verify</code></td>
      <td>Function</td>
      <td><a href="/docs/api/resources/authn.html#verify-recovery-factor">Parameters</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">resend</code></td>
      <td>Function</td>
      <td>Resend the recovery email or text</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<p>Examples:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// Verify the recovery</span>
<span class="nx">transaction</span><span class="p">.</span><span class="nx">verify</span><span class="p">({</span>
  <span class="na">passCode</span><span class="p">:</span> <span class="s1">'615243'</span>
<span class="p">});</span>

<span class="c1">// Resend recovery email or sms</span>
<span class="nx">transaction</span><span class="p">.</span><span class="nx">resend</span><span class="p">();</span>
</code></pre>
</div>

<h4 id="begin-mfa-enrollment">Begin MFA Enrollment</h4>

<p>When MFA is required, but a user isn’t enrolled in MFA, they must enroll in at least one factor.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">MFA_ENROLL</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the transaction will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factors</code></td>
      <td>List of <a href="#enroll-factor">Enroll Factors</a></td>
      <td>Factors enabled for an org</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">skip</code></td>
      <td>Function</td>
      <td>Ignore enrollment and continue</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<h5 id="enroll-factor">Enroll Factor</h5>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">enrollment</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">OPTIONAL</code> or <code class="highlighter-rouge">REQUIRED</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">NOT_SETUP</code>, <code class="highlighter-rouge">PENDING_ACTIVATION</code>, <code class="highlighter-rouge">ENROLLED</code>, <code class="highlighter-rouge">ACTIVE</code>, <code class="highlighter-rouge">INACTIVE</code>, or <code class="highlighter-rouge">EXPIRED</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factorType</code></td>
      <td><a href="/docs/api/resources/factors.html#factor-type">Factor Type</a></td>
      <td>Type of factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">provider</code></td>
      <td><a href="/docs/api/resources/factors.html#provider-type">Factor Provider</a></td>
      <td>Provider of the given <code class="highlighter-rouge">factorType</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">enroll</code></td>
      <td>Function</td>
      <td><a href="/docs/api/resources/authn.html#enroll-factor">Parameters</a>. <code class="highlighter-rouge">factorType</code> and <code class="highlighter-rouge">provider</code> are optional</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">questions</code></td>
      <td>Function</td>
      <td>Returns <a href="/docs/api/resources/factors.html#response-example-3">available questions</a>, not a transaction. Only available for the <code class="highlighter-rouge">question</code> factorType</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// Assume the first factor is a question</span>
<span class="kd">var</span> <span class="nx">factor</span> <span class="o">=</span> <span class="nx">transaction</span><span class="p">.</span><span class="nx">factors</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

<span class="c1">// Returns the available questions</span>
<span class="nx">factor</span><span class="p">.</span><span class="nx">questions</span><span class="p">();</span>

<span class="c1">// Enroll after selecting a question and entering an answer</span>
<span class="nx">factor</span><span class="p">.</span><span class="nx">enroll</span><span class="p">({</span>
  <span class="na">profile</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">question</span><span class="p">:</span> <span class="s1">'disliked_food'</span><span class="p">,</span>
    <span class="na">answer</span><span class="p">:</span> <span class="s1">'mayonnaise'</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="activate-a-factor-for-mfa-enrollment">Activate a Factor for MFA Enrollment</h4>

<p>The user must activate the factor to complete enrollment.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">MFA_ENROLL_ACTIVATE</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the transaction will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factorResult</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">WAITING</code>, <code class="highlighter-rouge">CANCELLED</code>, <code class="highlighter-rouge">TIMEOUT</code>, or <code class="highlighter-rouge">ERROR</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factor</code></td>
      <td><a href="#activate-enroll-factor">Activate Enroll Factor</a></td>
      <td>Factor to activate</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">activate</code></td>
      <td>Function</td>
      <td>Verify the OTP or restart the activation process if the activation is expired</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">poll</code></td>
      <td>Function</td>
      <td>Poll until <code class="highlighter-rouge">factorResult</code> changes. Throws <a href="#authpollstoperror">AuthPollStopError</a> when <code class="highlighter-rouge">prev</code> or <code class="highlighter-rouge">cancel</code> is called</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">resend</code></td>
      <td>Function</td>
      <td>Send another OTP if user doesn’t receive the original activation SMS OTP</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">prev</code></td>
      <td>Function</td>
      <td>End current factor enrollment and return to <a href="#begin-mfa-enrollment">MFA_ENROLL</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<h5 id="activate-enroll-factor">Activate Enroll Factor</h5>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">id</code></td>
      <td>String</td>
      <td>Unique id for the factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factorType</code></td>
      <td><a href="/docs/api/resources/factors.html#factor-type">Factor Type</a></td>
      <td>Type of factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">provider</code></td>
      <td><a href="/docs/api/resources/factors.html#provider-type">Factor Provider</a></td>
      <td>Provider of the given <code class="highlighter-rouge">factorType</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">activation</code></td>
      <td><a href="#activation">Activation</a></td>
      <td>Activation properties</td>
    </tr>
  </tbody>
</table>

<h5 id="activation">Activation</h5>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the activation will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factorResult</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">WAITING</code>, <code class="highlighter-rouge">CANCELLED</code>, <code class="highlighter-rouge">TIMEOUT</code>, or <code class="highlighter-rouge">ERROR</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">send</code></td>
      <td>Function</td>
      <td>Takes a <code class="highlighter-rouge">name</code> parameter that’s <code class="highlighter-rouge">sms</code> or <code class="highlighter-rouge">email</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">qrcode</code></td>
      <td><a href="/docs/api/getting_started/design_principles.html#links">Link</a></td>
      <td>Contains <code class="highlighter-rouge">href</code> and <code class="highlighter-rouge">type</code> to embed as an image</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">transaction</span><span class="p">.</span><span class="nx">activate</span><span class="p">({</span>
  <span class="na">passCode</span><span class="p">:</span> <span class="s1">'615243'</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="select-mfa-when-required">Select MFA When Required</h4>

<p>The user must provide additional verification with a previously enrolled factor.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">MFA_REQUIRED</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the transaction will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factors</code></td>
      <td>List of <a href="#enrolled-factor">Enrolled Factors</a></td>
      <td>Factors available to pass MFA</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<h5 id="enrolled-factor">Enrolled Factor</h5>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">id</code></td>
      <td>String</td>
      <td>Unique id for the factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factorType</code></td>
      <td><a href="/docs/api/resources/factors.html#factor-type">Factor Type</a></td>
      <td>Type of factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">provider</code></td>
      <td><a href="/docs/api/resources/factors.html#provider-type">Factor Provider</a></td>
      <td>Provider of the given <code class="highlighter-rouge">factorType</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">profile</code></td>
      <td><a href="/docs/api/resources/factors.html#factor-profile-object">Factor Profile</a></td>
      <td>Details about the factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">verify</code></td>
      <td>Function</td>
      <td><a href="/docs/api/resources/authn.html#verify-factor">Parameters</a></td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// Assume the first factor is a question</span>
<span class="kd">var</span> <span class="nx">factor</span> <span class="o">=</span> <span class="nx">transaction</span><span class="p">.</span><span class="nx">factors</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

<span class="nx">factor</span><span class="p">.</span><span class="nx">verify</span><span class="p">({</span>
  <span class="na">answer</span><span class="p">:</span> <span class="s1">'mayonnaise'</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="mfa-enforcement">MFA Enforcement</h4>

<p>The user must verify the factor-specific challenge.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">MFA_CHALLENGE</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the transaction will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factorResult</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">WAITING</code>, <code class="highlighter-rouge">CANCELLED</code>, <code class="highlighter-rouge">TIMEOUT</code>, or <code class="highlighter-rouge">ERROR</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factor</code></td>
      <td><a href="#challenge-factor">Challenge Factor</a></td>
      <td>Factor currently being challenged</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">poll</code></td>
      <td>Function</td>
      <td>Poll until <code class="highlighter-rouge">factorResult</code> is not <code class="highlighter-rouge">WAITING</code>. Throws <a href="#authpollstoperror">AuthPollStopError</a> if <code class="highlighter-rouge">prev</code>, <code class="highlighter-rouge">resend</code>, or <code class="highlighter-rouge">cancel</code> is called</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">resend</code></td>
      <td>Function</td>
      <td>Takes a <code class="highlighter-rouge">name</code> parameter that’s usually <code class="highlighter-rouge">sms</code> or <code class="highlighter-rouge">push</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">prev</code></td>
      <td>Function</td>
      <td>End current factor enrollment and return to <a href="#begin-mfa-enrollment">MFA_ENROLL</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">cancel</code></td>
      <td>Function</td>
      <td>Ends the transaction</td>
    </tr>
  </tbody>
</table>

<h5 id="challenge-factor">Challenge Factor</h5>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">id</code></td>
      <td>String</td>
      <td>Unique id for the factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">factorType</code></td>
      <td><a href="/docs/api/resources/factors.html#factor-type">Factor Type</a></td>
      <td>Type of factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">provider</code></td>
      <td><a href="/docs/api/resources/factors.html#provider-type">Factor Provider</a></td>
      <td>Provider of the given <code class="highlighter-rouge">factorType</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">profile</code></td>
      <td><a href="/docs/api/resources/factors.html#factor-profile-object">Factor Profile</a></td>
      <td>Details about the factor</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">verification</code></td>
      <td><a href="/docs/api/resources/authn.html#verify-factor">Verification</a></td>
      <td>Verification properties</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">transaction</span><span class="p">.</span><span class="nx">poll</span><span class="p">();</span>
</code></pre>
</div>

<h4 id="successful-sign-in">Successful Sign-In</h4>

<p>At the end of the authentication flow, a transaction with a status of <code class="highlighter-rouge">SUCCESS</code> is returned. This transaction contains a <code class="highlighter-rouge">sessionToken</code> that you can <a href="#create-a-session">exchange for an Okta cookie</a>.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">status</code></td>
      <td>String</td>
      <td><code class="highlighter-rouge">SUCCESS</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expiresAt</code></td>
      <td><a href="https://tools.ietf.org/html/rfc3339">Date String</a></td>
      <td>Time the sessionToken will expire</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">sessionToken</code></td>
      <td><a href="/docs/api/resources/authn.html#session-token">Session Token</a></td>
      <td>Token that can be exchanged for a cookie</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">user</code></td>
      <td><a href="/docs/api/resources/authn.html#user-object">User</a></td>
      <td>Subset of user properties</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">setCookieAndRedirect</span><span class="p">(</span><span class="nx">transaction</span><span class="p">.</span><span class="nx">sessionToken</span><span class="p">);</span>
</code></pre>
</div>

<h2 id="transaction-management">Transaction Management</h2>

<p>If the user navigates away from the page during an authentication flow, you may want to resume the transaction.</p>

<h3 id="check-for-existing-transaction">Check for Existing Transaction</h3>

<p>Check for a transaction to be resumed. This is synchronous and returns <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">exists</span><span class="p">();</span>
</code></pre>
</div>

<h3 id="resume-the-transaction">Resume the transaction</h3>

<p>Returns a transaction with a user’s previous state.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>
</code></pre>
</div>

<h2 id="social-authentication-and-openid-connect">Social Authentication and OpenID Connect</h2>

<p>If you want to create a token via <a href="/docs/api/resources/oidc.html">OpenID Connect</a> or <a href="/docs/api/resources/social_authentication.html">social authentication</a>, it’s possible to manage the flow with this SDK. To do so, instantiate your client with a <code class="highlighter-rouge">clientId</code> and <code class="highlighter-rouge">redirectUri</code>. If you don’t have either of those, <a href="https://github.com/oktadeveloper/okta-oauth-spa-authjs-osw/blob/master/Okta-OIDC_SPA_JS-OSW_DevSetupGuide.pdf">set up OpenID Connect with these instructions</a>.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">authClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OktaAuth</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://your-org.okta.com'</span><span class="p">,</span>
  <span class="na">clientId</span><span class="p">:</span> <span class="s1">'your-client-id'</span><span class="p">,</span>
  <span class="na">redirectUri</span><span class="p">:</span> <span class="s1">'https://your.redirect.uri/redirect'</span> <span class="c1">// defaults to current url if omitted</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Each method to create a token (or tokens) takes an optional argument:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// Defaults</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">responseType</span><span class="p">:</span> <span class="s1">'id_token'</span><span class="p">,</span>
  <span class="na">scopes</span><span class="p">:</span> <span class="p">[</span><span class="s1">'openid'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">]</span>
<span class="p">};</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">responseType</code> option can be a string (<code class="highlighter-rouge">id_token</code>, <code class="highlighter-rouge">token</code>, or <code class="highlighter-rouge">code</code>) or an array with multiple responseTypes. When a string is passed, the response is a single token. When an array is passed, the response is a token array in the order they were requested. For example:</p>

<p>A single token</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">getWithPopup</span><span class="p">({</span>
  <span class="na">responseType</span><span class="p">:</span> <span class="s1">'id_token'</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">idToken</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Manage the idToken</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle OAuthError</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Multiple tokens</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">getWithPopup</span><span class="p">({</span>
  <span class="na">responseType</span><span class="p">:</span> <span class="p">[</span><span class="s1">'token'</span><span class="p">,</span> <span class="s1">'id_token'</span><span class="p">]</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">tokenArray</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// The tokenArray order corresponds with the responseType array</span>

  <span class="c1">// 'token' was first, so the first item is an accessToken</span>
  <span class="kd">var</span> <span class="nx">accessToken</span> <span class="o">=</span> <span class="nx">tokenArray</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

  <span class="c1">// 'id_token' was second, so the second item is an idToken</span>
  <span class="kd">var</span> <span class="nx">idToken</span> <span class="o">=</span> <span class="nx">tokenArray</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

  <span class="c1">// Manage the tokens</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle OAuthError</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Each <code class="highlighter-rouge">responseType</code> has its own format:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// id_token</span>
<span class="p">{</span>
  <span class="nl">idToken</span><span class="p">:</span> <span class="s1">'theIdTokenString'</span><span class="p">,</span>
  <span class="nx">claims</span><span class="err">:</span> <span class="p">{},</span> <span class="c1">// The claims of the idToken (they're determined by the scopes requested)</span>
  <span class="nx">expiresAt</span><span class="err">:</span> <span class="mi">123456789</span><span class="p">,</span> <span class="c1">// When the token expires in unix time</span>
  <span class="nx">scopes</span><span class="err">:</span> <span class="p">[]</span> <span class="c1">// The scopes requested</span>
<span class="p">}</span>

<span class="c1">// token</span>
<span class="p">{</span>
  <span class="nl">accessToken</span><span class="p">:</span> <span class="s1">'theAccessTokenString'</span><span class="p">,</span>
  <span class="nx">expiresAt</span><span class="err">:</span> <span class="mi">123456789</span><span class="p">,</span> <span class="c1">// When the token expires in unix time,</span>
  <span class="nx">tokenType</span><span class="err">:</span> <span class="s1">'Bearer'</span><span class="p">,</span> <span class="c1">// This is the default type for access tokens</span>
  <span class="nx">scopes</span><span class="err">:</span> <span class="p">[]</span> <span class="c1">// The scopes requested</span>
<span class="p">}</span>

<span class="c1">// code</span>
<span class="p">{</span>
  <span class="nl">authorizationCode</span><span class="p">:</span> <span class="s1">'theAuthorizationCodeString'</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="create-token-with-a-popup">Create token with a popup</h3>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">getWithPopup</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">tokenOrTokens</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Manage token or tokens</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle OAuthError</span>
<span class="p">});</span>
</code></pre>
</div>

<p>This is commonly used to create a token with an external idp.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">getWithPopup</span><span class="p">({</span>
  <span class="na">idp</span><span class="p">:</span> <span class="s1">'target-idp'</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="create-token-using-a-redirect">Create token using a redirect</h3>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">getWithRedirect</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>

<span class="c1">// If the token is in the url after the redirect</span>
<span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">parseFromUrl</span><span class="p">()</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">tokenOrTokens</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Manage token or tokens</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle OAuthError</span>
<span class="p">});</span>
</code></pre>
</div>

<p>This is commonly used to create an authorization code.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">getWithRedirect</span><span class="p">({</span>
  <span class="na">responseType</span><span class="p">:</span> <span class="s1">'code'</span>
<span class="p">});</span>

<span class="c1">// authClient.token.parseFromUrl isn't necessary, because it's parsed from the query param by your server</span>
</code></pre>
</div>

<h3 id="exchange-a-sessiontoken-for-a-token">Exchange a sessionToken for a token</h3>

<p>When you’ve obtained a sessionToken from the authorization flows, or a session already exists, you can obtain a token or tokens without prompting the user to log in.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">getWithoutPrompt</span><span class="p">({</span>
  <span class="na">responseType</span><span class="p">:</span> <span class="s1">'id_token'</span><span class="p">,</span> <span class="c1">// or array of types</span>
  <span class="na">sessionToken</span><span class="p">:</span> <span class="s1">'testSessionToken'</span> <span class="c1">// optional if the user has an existing Okta session</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">tokenOrTokens</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Manage token or tokens</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle OAuthError</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Note: If the Okta cookie is not set and you are using <code class="highlighter-rouge">token.getWithoutPrompt</code>, try enabling third-party cookies in the browser.</p>

<h3 id="refresh-a-token">Refresh a token</h3>

<p>Returns a new token if the Okta session is still valid.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">refresh</span><span class="p">(</span><span class="nx">tokenToRefresh</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">freshToken</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Manage freshToken</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle OAuthError</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="decode-an-id-token">Decode an ID Token</h3>

<p>Decode a raw ID Token</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">token</span><span class="p">.</span><span class="nx">decode</span><span class="p">(</span><span class="nx">idTokenString</span><span class="p">);</span>
</code></pre>
</div>

<h2 id="session-management">Session Management</h2>

<p>The SDK allows managing your Okta session. Each of these methods returns a Promise.</p>

<h3 id="create-a-session">Create a session</h3>

<p>To create a session, you must first have a <code class="highlighter-rouge">sessionToken</code>. This can be created by going through the <a href="#authentication-flow">Authentication Flow</a> until the <a href="#successful-sign-in">SUCCESS</a> status. The transaction will contain the <code class="highlighter-rouge">sessionToken</code>. If a <code class="highlighter-rouge">redirectUri</code> is not passed, Okta will redirect to the current page.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">setCookieAndRedirect</span><span class="p">(</span><span class="nx">sessionToken</span><span class="p">,</span> <span class="nx">redirectUri</span><span class="p">);</span>
</code></pre>
</div>

<h3 id="check-for-an-existing-session">Check for an existing session</h3>

<p>Resolves with <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">exists</span><span class="p">();</span>
</code></pre>
</div>

<h3 id="get-an-existing-session">Get an existing session</h3>

<p>Resolves with a <a href="/docs/api/resources/sessions.html#example">session</a>.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>
</code></pre>
</div>

<h3 id="refresh-a-session">Refresh a session</h3>

<p>Resolves with a refreshed version of your existing <a href="/docs/api/resources/sessions.html#example">session</a>.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
</code></pre>
</div>

<h3 id="close-a-session">Close a session</h3>

<p>Terminates an existing <a href="/docs/api/resources/sessions.html#example">session</a>.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">authClient</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
</code></pre>
</div>

<h2 id="errors">Errors</h2>

<p>A <code class="highlighter-rouge">fail</code> on a promise will resolve with one of these failures:</p>

<h4 id="authapierror">AuthApiError</h4>

<p>This is thrown when we receive a response from the Okta service that is not a 200. It contains the same properties as our <a href="/docs/api/getting_started/design_principles.html#errors">API errors</a>.</p>

<h4 id="authsdkerror">AuthSdkError</h4>

<p>This is thrown when an error occurs within the SDK.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">errorCode</code></td>
      <td>String</td>
      <td>Always <code class="highlighter-rouge">INTERNAL</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">errorSummary</code></td>
      <td>String</td>
      <td>Summary of the error</td>
    </tr>
  </tbody>
</table>

<h4 id="authpollstoperror">AuthPollStopError</h4>

<p>This is thrown when a <code class="highlighter-rouge">poll</code> has been initiated, but another action is taken before the <code class="highlighter-rouge">poll</code> is finished.</p>

<h4 id="oautherror">OAuthError</h4>

<p>This is thrown when an <a href="/reference/error_codes/index#openid-connect-and-okta-social-authentication">error occurs during the OAuth flow</a>.</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">errorCode</code></td>
      <td>String</td>
      <td>The OAuth error code</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">errorSummary</code></td>
      <td>String</td>
      <td>Summary of the error</td>
    </tr>
  </tbody>
</table>

      </div>
      <div class="TableOfContents TableOfContentsPreload">
        <div class="TableOfContents-item is-level1">
          <script>
                  document.write(document.title.split('|')[0].trim());
          </script>
        </div>
        <div class="TableOfContentsLoader"></div>
      </div><!-- END Page Content -->
    </section><!-- END Page Center w/Sub Nav & Content -->

    <!-- START Footer -->
    <footer class="footer">
      <div class="Wrap">
        <ul>
          <li>
            <a href="https://www.okta.com" target="_blank">Okta.com</a>
          </li>
          <li>
            <a href="/blog/">Blog</a>
          </li>
          <li>
            <a href="/docs/platform-release-notes/platform-release-notes.html">Platform Release Notes</a>
          </li>
          <li>
            <a href="/terms/">Terms & Conditions</a>
          </li>
          <li>
            <a href="/3rd_party_notices/">3rd Party Notices</a>
          </li>
          <li>
            <a href="/privacy/">Privacy Policy</a>
          </li>
          <li>
            <a href="/contact/">Contact Sales</a>
          </li>
          <li>
            <a href="mailto:developers@okta.com">Contact Support</a>
          </li>
        </ul>
        <ul>
          <li>
            <a class="icon" href="http://github.com/oktadeveloper" target="_blank"><i class="fa fa-github"></i></a>
          </li>
          <li>
            <a class="icon" href="http://twitter.com/okta" target="_blank"><i class="fa fa-twitter"></i></a>
          </li>
          <li>
            <a class="icon" href="https://devforum.okta.com/" title="Okta Developer Forums" target="_blank"><i class="fa fa-comments"></i></a>
          </li>
          <li>
            <a class="icon" href="http://feeds.feedburner.com/OktaBlog" target="_blank"><i class="fa fa-rss"></i></a>
          </li><!-- <li><a class="icon" href="http://community.okta.com" target="_blank"><i class="fa fa-comments"></i></a></li> -->
        </ul>
      </div>
    </footer>
    <script type="text/javascript" src="/assets/master-d164e3cb90ad42ea74c141546269db0efdbc2259b7d44b7f52babb60097099a8.js"></script>
    
    
    
    
      <script type="text/javascript" src="/assets/docs-a2d1c410ee8c45eaa505f76f4f72815741c3bb6532081ae1abe25e3d8d00f4fa.js"></script>
    

    <!-- END Footer -->
  </div>
  <!-- START Post Footer -->
  
  <!-- START Google Tag Manager -->
  <!-- https://support.google.com/tagmanager/answer/6103696?hl=en -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- END Google Tag Manager -->
  <!-- START Google Remarketing Tag -->
  <script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1006913831;
    var google_custom_params = window.google_tag_params;
    var google_remarketing_only = true;
    /* ]]> */
  </script>
  <div style="display:none;"><script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script></div>
  <noscript><div style="display:inline;"><img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"></div></noscript>
  <!-- END Google Remarketing Tag -->
  <!-- START Crazy Egg Tracking -->
  <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
  <!-- END Crazy Egg Tracking -->

  <!-- END Post Footer -->
</body>
</html>
