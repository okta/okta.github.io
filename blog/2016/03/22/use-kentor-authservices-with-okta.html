<!doctype html>
<!--[if lt IE 7 ]> <html class="ie6 no-flexbox"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7 no-flexbox"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8 no-flexbox"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9 no-flexbox"> <![endif]-->
<!--[if IE 10 ]>    <html class="ie10 no-flexbox"> <![endif]-->
<!--[if (gt IE 10)|!(IE)]><!--> <html class="modern wf-loading" lang="en"> <!--<![endif]-->
  <head><head>
  <script>
    var isProduction = window.location.hostname === 'developer.okta.com';
    if (isProduction) {
      // TypeKit
      (function(d) {
        var config = {
          kitId: 'jff5neq',
          scriptTimeout: 3000,
          async: true
        },
        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
      })(document);

      // Google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-15777010-3', 'auto');
      ga('send', 'pageview');

      // START Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TJ45R6');
      // END Google Tag Manager
    }
	</script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 	
  <link type="text/css" rel="stylesheet" href="/assets/animate-ec43d72c3ed45e08a460b8a2966d8dba6006aebfa0530935c3973fa493a8771f.css">
  <link type="text/css" rel="stylesheet" href="/assets/okta-c9d8d47e5d0b2c3f60c41beea5371ccb83174ddc23c0f090acf1ae9a6735cb31.css">
  
  
    <link type="text/css" rel="stylesheet" href="/assets/page-blog-367850afad8093d512ce46256493ec36aa919ccb2ed99af419063c06816ac5d8.css">
  
  <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico">
  <title>How to use KentorIT AuthServices with Okta | Okta Developer</title>
  <meta name="description" content="If you’re wondering how to configure an ASP.NET application with KentorIT’s AuthServices and Okta, you’ve come to the right place. But before delving into th...">
  <link rel="canonical" href="https://developer.okta.com/blog/2016/03/22/use-kentor-authservices-with-okta">
  <link rel="alternate" type="application/rss+xml" title="Okta Developer" href="https://developer.okta.com/feed.xml"><!-- GA -->
</head>

    <body id="blog">
	
<header id="header">
      <div class="Wrap">
        <h1 class="logo"><a href="/">Okta</a></h1><!-- START Primary Nav -->
        <nav>
          <div id="top-nav">
            <a href="#" id="mobile-close" class="mobile-toggle">
              <span></span>
              <span></span>
            </a>
            <a class="Button--green" href="https://developer.okta.com/signup/" id="top-nav-cta">Get Started</a>
            <a class="SearchIcon" href="#"></a>
            <ul>
              <li>
                <a href="/product/">Product</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/code/">Code</a>
              </li>
              <li class="has-dropdown">
                <a href="#">Support</a>
                <div class="dropdown-window">
                  <p class="devforum">Post your question on <a href="https://devforum.okta.com/" title="Okta Developer Forums" target="_blank">Okta Developer Forums</a></p>
                  <p class="email">Email us:<br>
                  <a href="mailto:developers@okta.com">developers@okta.com</a></p>
                  <p class="tel">Call us:<br>
                  <a href="tel:18887227871">1 (888) 722-7871</a></p>
                </div>
              </li>
            </ul>
            <form id="form_search" method="get" action="/search/" name="form_search">
              <input type="text" name="q" id="q" autocomplete="off">
            </form>
          </div>
          <div id="mobile-nav">
            <a id="mobile-search" href="/search/"><span class="icon-search-light"></span></a>
            <a id="mobile-open" class="mobile-toggle" href="#top-nav">
              <span></span>
              <span></span>
              <span></span>
            </a>
          </div>
        </nav><!-- END Primary Nav -->
      </div>
    </header>

	<div class="page-content">
		<section id="blog-post" class="main-container">
	<div class="wrap blog">
		<section >
  <div class="wrap">
    <article class="post-block">
      <header class="post-title-block">
        <h1><a href="/blog/2016/03/22/use-kentor-authservices-with-okta">How to use KentorIT AuthServices with Okta</a></h1>
        <div class="attribution">
          
            
            
              <img src="/assets/avatar-raphael-03c53b3fc146b4d4d5049144d19a0dd37775693ad7544e1539537e1a7c562eed.jpg" alt="avatar-raphael.jpg" class="author-avatar">
            
            <address>Raphael Londner</address>&nbsp;
            
              <a class="social_link" href="https://github.com/rlondner"><i class="fa fa-github-square"></i></a>
            
            
              <a class="social_link" href="https://twitter.com/rlondner"><i class="fa fa-twitter-square"></i></a>
            
            
            
              <a class="social_link" href="https://www.linkedin.com/in/londner"><i class="fa fa-external-link-square"></i></a>
            
            <span class="sepr">&middot;</span>
          
          <time datetime="2016-03-22">March 22, 2016</time>
	      </div>
	    </header>
	    <section class="post-content">
	     <p>If you’re wondering how to configure an ASP.NET application with <a href="https://github.com/KentorIT/authservices">KentorIT’s AuthServices</a> and Okta, you’ve come to the right place. But before delving into the specifics of how to make Okta work with an SAML-enabled ASP.NET application powered by KentorIT AuthServices, is is worth spending some time going over a critical, but easily fixable issue:</p>

<p><strong>Important note</strong> : As of March 22nd, 2016, you have 2 choices:</p>

<ol>
  <li>
    <p>Either get the source code of the AuthServices assemblies and compile them on your own machine. In this case, no specific adjustment is necessary.</p>
  </li>
  <li>
    <p>Or use the v0.17 KentorIT NuGet assemblies. In this case, if you plan to use the SampleApplication project (not the SampleMvcApplication) for testing purposes, make sure you remove the following line from the web.config file:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code> <span class="nt">&lt;requestedAuthnContextclassRef</span><span class="err">="Password"</span> <span class="na">comparison=</span><span class="s">"Minimum"</span> <span class="nt">/&gt;</span>
</code></pre>
    </div>

    <p>If you don’t, the SP-initiated login flow will fail because Okta won’t manage to deserialize the SAMLRequest parameter (due to a case issue).</p>
  </li>
</ol>

<p>Here’s how you should configure an app powered by Kentor AuthServices to make it work with Okta:</p>

<ol>
  <li>Download the latest version of KentorIT’s AuthServices from <a href="https://github.com/KentorIT/authservices">https://github.com/KentorIT/authservices</a> and open the Kentor.AuthServices.sln solution in Visual Studio.</li>
  <li>Identify the SampleApplication project and make a note of its URL property:
  <img src="/assets/KentorOkta/VSProjectProperties-894b4f35b40452adbda65e396b2f77d6ee54722ddfefb2e8b1b110d21ea14d65.png" alt="Visual Studio Project properties" /></li>
  <li>Go to you Okta organization and navigate to Admin =&gt; Applications.</li>
  <li>Press the <strong>Add Application</strong> button and the green <strong>Create New App</strong> button
  <img src="/assets/KentorOkta/CreateNewAppButton-34ce571996f9d3bcb7a56c3b06006e4b3481d687be046c8b67a8210db5c8c381.png" alt="Press the Create a new Okta app" /></li>
  <li>Select the <strong>SAML 2.0</strong> option and press the <strong>Create</strong> button.
  <img src="/assets/KentorOkta/SAML2Option-2f7d8fae80847c3d7becd573c9d8150928c810c98c29d8a6dcc654f3464b9d9d.png" alt="Choose the SAML 2.0 template" /></li>
  <li>Give your application a name and optionally upload a custom logo. We’ll call it “<strong>Kentor AuthServices App 1</strong>”
  <img src="/assets/KentorOkta/OktaAppName-cd53f2a7c06794e10f57b1d93eab0c0fe3921677fa40994f9d8eb5dfc4650df2.png" alt="Give your Okta app a name" /></li>
  <li>Press <strong>Next</strong>.</li>
  <li>In the <strong>Single sign on URL</strong> field, enter the url you retrieved above in step #2 and append “ <strong>/AuthServices/Acs</strong>”, for instance <strong>http://localhost:18714/SamplePath/AuthServices/Acs</strong></li>
  <li>For the Audience URI field, enter the Url you retrieved above in step #2 and append “ <strong>/AuthServices</strong>”, for instance <strong>http://localhost:18714/SamplePath/AuthServices</strong></li>
  <li>In the <strong>Name ID format</strong> field, select the default <strong>Unspecified</strong> (or select any other value of your choice).</li>
  <li>
    <p>Select the <strong>Show Advanced Settings</strong> link. For the <strong>Signature Algorithm</strong> field, we suggest that you leave the default value, SHA-256. However, if you do, you will need to add the following line of code to the Application_Start() method of your Global.asax.cs file:</p>

    <div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Kentor</span><span class="o">.</span><span class="na">AuthServices</span><span class="o">.</span><span class="na">Configuration</span><span class="o">.</span><span class="na">Options</span><span class="o">.</span><span class="na">GlobalEnableSha256XmlSignatures</span><span class="o">();</span>
</code></pre>
    </div>

    <p>Otherwise, you may switch to RSA-SHA1 though we do not recommend it (as it less secure than SHA-256).</p>
  </li>
  <li>In the Attribute Statements section, optionally enter additional attributes, such as in the following screenshot:
  <img src="/assets/KentorOkta/OptionalAttributeStatements-fba16e17b56be1e56820bfe4eb115f882e4bf2e58475d07c726c0db8ad766582.png" alt="Optional Attribute Statements" /></li>
  <li>Press the <strong>Next</strong> button. Select the <strong>I’m a software vendor</strong> option (if you’re indeed a vendor - if you are developing an internal app, select the first option) and press the Finish button.
  <img src="/assets/KentorOkta/VendorOrCustomerOption-00764161453e0f5de30afb8f79fb255dfd9ff4fe62aad63ac9670128551fc23a.png" alt="Select the customer or vendor option" /></li>
  <li>Now edit the web.config file of the SampleApplication project.</li>
  <li>In the <code class="highlighter-rouge">&lt;kentor.authServices&gt;</code> section, enter the following values:
    <ul>
      <li><strong>entityId</strong> = same value as the Audience URI for the Okta app, e.g. <a href="http://localhost:18714/SamplePath/AuthServices">http://localhost:18714/SamplePath/AuthServices</a></li>
      <li><strong>returnUrl</strong> = value of the web application’s url, i.e. <a href="http://localhost:18714/SamplePath">http://localhost:18714/SamplePath</a></li>
    </ul>
  </li>
  <li>In the <identityProviders> section, enter the following values:
</identityProviders>    <ul>
      <li><strong>entityId</strong> = <strong>Identity Provider Issuer</strong> from <strong>Sign On</strong> =&gt; <strong>View Setup Instructions</strong>
<img src="/assets/KentorOkta/ViewSetupInstructions-5b84fcb652fc6dc3480000e73db926367b638e657e9143c5f12361af0ab70be6.png" alt="View setup instructions" />
<img src="/assets/KentorOkta/IdentityProviderIssuer-6d097c5b8c2e12adf8463887e43200fc1c0fb9d46ed92c84b91b84c5cc090478.png" alt="Identity Provider Issuer" /></li>
      <li><strong>signOnUrl</strong> = value of the <strong>Identity Provider Single Sign-On URL</strong> below
<img src="/assets/KentorOkta/IdPSSOUrl-5c5b57ceefc845fb39eff86a39d234e93ea2865156b3e3ab4ce2c3ba9f32b231.png" alt="Identity Provider Single Sign-On URL" /></li>
      <li>In the <code class="highlighter-rouge">&lt;signingCertificate&gt;</code> section, download the <strong>okta.cert</strong> X.509 certificate from the instructions page in the Okta app and put it in the <strong>App_Data</strong> folder of your web application. Then reference it accordingly (such as with <strong>fileName=”~/App_Data/okta.cert</strong>”) in the web.config file.</li>
    </ul>
  </li>
</ol>

<p>You should be good to go now! Don’t forget to assign users to your Okta application and test that you can sign in into your SAML application both from the Okta portal (IdP-initiated sign-in flow) and from your SAML application itself (SP-initiated sign-in flow).</p>

<p>If you run into any issue while using the SP-initiated login flow (when a user clicks on the “Sign In” link of the /SamplePath page), then try to recompile the KentorIT.AuthServices project and make sure it is used by your project. If your project uses v0.17 of the NuGet corresponding library, make sure to comment out any <code class="highlighter-rouge">&lt;requestedAuthnContext &gt;</code> section in your web.config file.</p>

<p><strong>Happy Okta’ing!</strong></p>

	    </section>
	  </article>
  </div>
</section>

	</div>
</section>

		
	</div><footer class="footer">
      <div class="Wrap">
        <ul>
          <li>
            <a href="https://www.okta.com" target="_blank">Okta.com</a>
          </li>
          <li>
            <a href="/blog/">Blog</a>
          </li>
          <li>
            <a href="/docs/platform-release-notes/platform-release-notes.html">Platform Release Notes</a>
          </li>
          <li>
            <a href="/terms/">Terms & Conditions</a>
          </li>
          <li>
            <a href="/3rd_party_notices/">3rd Party Notices</a>
          </li>
          <li>
            <a href="/privacy/">Privacy Policy</a>
          </li>
          <li>
            <a href="/contact/">Contact Sales</a>
          </li>
          <li>
            <a href="mailto:developers@okta.com">Contact Support</a>
          </li>
        </ul>
        <ul>
          <li>
            <a class="icon" href="http://github.com/oktadeveloper" target="_blank"><i class="fa fa-github"></i></a>
          </li>
          <li>
            <a class="icon" href="http://twitter.com/okta" target="_blank"><i class="fa fa-twitter"></i></a>
          </li>
          <li>
            <a class="icon" href="https://devforum.okta.com/" title="Okta Developer Forums" target="_blank"><i class="fa fa-comments"></i></a>
          </li>
          <li>
            <a class="icon" href="http://feeds.feedburner.com/OktaBlog" target="_blank"><i class="fa fa-rss"></i></a>
          </li><!-- <li><a class="icon" href="http://community.okta.com" target="_blank"><i class="fa fa-comments"></i></a></li> -->
        </ul>
      </div>
    </footer>
    <script type="text/javascript" src="/assets/master-d164e3cb90ad42ea74c141546269db0efdbc2259b7d44b7f52babb60097099a8.js"></script>
    
    
    
    

  <!-- START Post Footer -->
  
  <!-- START Google Tag Manager -->
  <!-- https://support.google.com/tagmanager/answer/6103696?hl=en -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- END Google Tag Manager -->
  <!-- START Google Remarketing Tag -->
  <script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1006913831;
    var google_custom_params = window.google_tag_params;
    var google_remarketing_only = true;
    /* ]]> */
  </script>
  <div style="display:none;"><script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script></div>
  <noscript><div style="display:inline;"><img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"></div></noscript>
  <!-- END Google Remarketing Tag -->
  <!-- START Crazy Egg Tracking -->
  <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
  <!-- END Crazy Egg Tracking -->

  <!-- END Post Footer -->
</body>
</html>
